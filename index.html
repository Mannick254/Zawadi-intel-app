<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zawadi Intel — Legacy Archive</title>
  <meta name="description" content="A cinematic archive for personal intel, dreams, and legacy notes." />
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" type="image/png" />
</head>
<body>
  <button class="theme-toggle" id="themeToggle">🌙</button>
  <!-- Persistent User Profile -->
  <div class="user-profile" id="userProfile">
    <div class="avatar" id="profileAvatar">👤</div>
    <input type="file" id="avatarUpload" accept="image/*" />
    <div class="name" id="profileName"></div>
    <div class="bio" id="profileBio"></div>
  </div>

  <!-- Vertical Sidebar -->
  <div class="sidebar">
    <h2>Navigation</h2>
    <ul>
      <li><a href="index.html">🏠 Home</a></li>
      <li><a href="app.html">🔐 Archive</a></li>
      <li><a href="biography.html">📖 Biographies</a></li>
      <li><a href="books.html">📚 Books</a></li>
      <li><a href="legacy.html">🏛️ Legacy</a></li>
      <li><a href="media.html">📺 Media</a></li>
    </ul>
  </div>

  <header>
    <h1>📜 Zawadi Intel</h1>
    <p class="tagline">“Every entry is a seed of memory. Every login, a step toward legacy.”</p>
    <div class="button-group">
      <a href="app.html" class="btn">🔐 Enter the Archive</a>
      <a href="biography.html" class="btn">📖 View Public Biographies</a>
    </div>
  </header>
  <footer>
    <p>&copy; 2025 Zawadi Intel. Built by Nickson Ochieng Okoth.</p>
  </footer>
  <script>
    // Theme toggle functionality
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      themeToggle.textContent = isDark ? '☀️' : '🌙';
      themeToggle.classList.toggle('dark-mode', isDark);
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark-mode');
      themeToggle.textContent = '☀️';
      themeToggle.classList.add('dark-mode');
    }

    window.onload = () => {
      setTimeout(() => {
        document.title = "Zawadi Intel 🔐 Legacy Archive";
      }, 500);

      // Check for logged-in user and display profile
      const currentUser = localStorage.getItem('currentUser');
      if (currentUser) {
        const profile = JSON.parse(localStorage.getItem(`profile_${currentUser}`)) || {};
        document.getElementById('profileName').textContent = profile.displayName || currentUser;
        document.getElementById('profileBio').textContent = profile.bio || '';
        if (profile.avatar) {
          document.getElementById('profileAvatar').innerHTML = `<img src="${profile.avatar}" alt="Avatar" style="width: 50px; height: 50px; border-radius: 50%;">`;
        }
        document.getElementById('userProfile').style.display = 'block';
      }

      // Avatar upload functionality
      document.getElementById('avatarUpload').addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            const avatarData = e.target.result;
            document.getElementById('profileAvatar').innerHTML = `<img src="${avatarData}" alt="Avatar" style="width: 50px; height: 50px; border-radius: 50%;">`;
            // Save to localStorage
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
              const profile = JSON.parse(localStorage.getItem(`profile_${currentUser}`)) || {};
              profile.avatar = avatarData;
              localStorage.setItem(`profile_${currentUser}`, JSON.stringify(profile));
            }
          };
          reader.readAsDataURL(file);
        }
      });
    };
  </script>
</body>
</html>


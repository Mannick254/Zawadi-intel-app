import{r as R,a as Mo,b as qo,c as pn,g as Dr}from"./react-FoVpDZ-V.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hs={exports:{}},En={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vo=R,Wo=Symbol.for("react.element"),Ho=Symbol.for("react.fragment"),Ko=Object.prototype.hasOwnProperty,Jo=Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Go={key:!0,ref:!0,__self:!0,__source:!0};function Ks(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Ko.call(t,r)&&!Go.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Wo,type:e,key:s,ref:a,props:i,_owner:Jo.current}}En.Fragment=Ho;En.jsx=Ks;En.jsxs=Ks;Hs.exports=En;var _=Hs.exports,yi={},wi=Mo;yi.createRoot=wi.createRoot,yi.hydrateRoot=wi.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mt.apply(this,arguments)}var We;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(We||(We={}));const bi="popstate";function Yo(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return ur("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gn(i)}return Qo(t,n,null,e)}function te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $r(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xo(){return Math.random().toString(36).substr(2,8)}function vi(e,t){return{usr:e.state,key:e.key,idx:t}}function ur(e,t,n,r){return n===void 0&&(n=null),Mt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ct(t):t,{state:n,key:t&&t.key||r||Xo()})}function gn(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ct(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Qo(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=We.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(Mt({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=We.Pop;let b=c(),m=b==null?null:b-u;u=b,l&&l({action:o,location:g.location,delta:m})}function f(b,m){o=We.Push;let x=ur(g.location,b,m);u=c()+1;let v=vi(x,u),A=g.createHref(x);try{a.pushState(v,"",A)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(A)}s&&l&&l({action:o,location:g.location,delta:1})}function d(b,m){o=We.Replace;let x=ur(g.location,b,m);u=c();let v=vi(x,u),A=g.createHref(x);a.replaceState(v,"",A),s&&l&&l({action:o,location:g.location,delta:0})}function p(b){let m=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:gn(b);return x=x.replace(/ $/,"%20"),te(m,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,m)}let g={get action(){return o},get location(){return e(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(bi,h),l=b,()=>{i.removeEventListener(bi,h),l=null}},createHref(b){return t(i,b)},createURL:p,encodeLocation(b){let m=p(b);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:d,go(b){return a.go(b)}};return g}var _i;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_i||(_i={}));function Zo(e,t,n){return n===void 0&&(n="/"),el(e,t,n)}function el(e,t,n,r){let i=typeof t=="string"?Ct(t):t,s=Ur(i.pathname||"/",n);if(s==null)return null;let a=Js(e);tl(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=fl(s);o=cl(a[l],u)}return o}function Js(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(te(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=He([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(te(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Js(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:ll(u,s.index),routesMeta:c})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of Gs(s.path))i(s,a,l)}),t}function Gs(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Gs(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function tl(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ul(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nl=/^:[\w-]+$/,rl=3,il=2,sl=1,al=10,ol=-2,ki=e=>e==="*";function ll(e,t){let n=e.split("/"),r=n.length;return n.some(ki)&&(r+=ol),t&&(r+=il),n.filter(i=>!ki(i)).reduce((i,s)=>i+(nl.test(s)?rl:s===""?sl:al),r)}function ul(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function cl(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",h=hl({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:He([s,h.pathname]),pathnameBase:wl(He([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=He([s,h.pathnameBase]))}return a}function hl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=dl(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:f,isOptional:d}=c;if(f==="*"){let g=o[h]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return d&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:e}}function dl(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),$r(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function fl(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $r(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ur(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const pl=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gl=e=>pl.test(e);function ml(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ct(e):e,s;if(n)if(gl(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),$r(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=xi(n.substring(1),"/"):s=xi(n,t)}else s=t;return{pathname:s,search:bl(r),hash:vl(i)}}function xi(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $n(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yl(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Br(e,t){let n=yl(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Fr(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ct(e):(i=Mt({},e),te(!i.pathname||!i.pathname.includes("?"),$n("?","pathname","search",i)),te(!i.pathname||!i.pathname.includes("#"),$n("#","pathname","hash",i)),te(!i.search||!i.search.includes("#"),$n("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?t[h]:"/"}let l=ml(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const He=e=>e.join("/").replace(/\/\/+/g,"/"),wl=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bl=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vl=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _l(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ys=["post","put","patch","delete"];new Set(Ys);const kl=["get",...Ys];new Set(kl);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qt.apply(this,arguments)}const zr=R.createContext(null),xl=R.createContext(null),Ke=R.createContext(null),Cn=R.createContext(null),Ue=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Xs=R.createContext(null);function Sl(e,t){let{relative:n}=t===void 0?{}:t;Tt()||te(!1);let{basename:r,navigator:i}=R.useContext(Ke),{hash:s,pathname:a,search:o}=Zs(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:He([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Tt(){return R.useContext(Cn)!=null}function At(){return Tt()||te(!1),R.useContext(Cn).location}function Qs(e){R.useContext(Ke).static||R.useLayoutEffect(e)}function Tn(){let{isDataRoute:e}=R.useContext(Ue);return e?$l():El()}function El(){Tt()||te(!1);let e=R.useContext(zr),{basename:t,future:n,navigator:r}=R.useContext(Ke),{matches:i}=R.useContext(Ue),{pathname:s}=At(),a=JSON.stringify(Br(i,n.v7_relativeSplatPath)),o=R.useRef(!1);return Qs(()=>{o.current=!0}),R.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=Fr(u,JSON.parse(a),s,c.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:He([t,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[t,r,a,s,e])}function cb(){let{matches:e}=R.useContext(Ue),t=e[e.length-1];return t?t.params:{}}function Zs(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=R.useContext(Ke),{matches:i}=R.useContext(Ue),{pathname:s}=At(),a=JSON.stringify(Br(i,r.v7_relativeSplatPath));return R.useMemo(()=>Fr(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function Cl(e,t){return Tl(e,t)}function Tl(e,t,n,r){Tt()||te(!1);let{navigator:i}=R.useContext(Ke),{matches:s}=R.useContext(Ue),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=At(),c;if(t){var h;let b=typeof t=="string"?Ct(t):t;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||te(!1),c=b}else c=u;let f=c.pathname||"/",d=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");d="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=Zo(e,{pathname:d}),g=Pl(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:He([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:He([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return t&&g?R.createElement(Cn.Provider,{value:{location:qt({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:We.Pop}},g):g}function Al(){let e=Dl(),t=_l(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:i},n):null,null)}const Rl=R.createElement(Al,null);class Il extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?R.createElement(Ue.Provider,{value:this.props.routeContext},R.createElement(Xs.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ol(e){let{routeContext:t,match:n,children:r}=e,i=R.useContext(zr);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Ue.Provider,{value:t},r)}function Pl(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=(i=n)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||te(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:d}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!d||d[h.route.id]===void 0);if(h.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,f)=>{let d,p=!1,g=null,b=null;n&&(d=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||Rl,l&&(u<0&&f===0?(Ul("route-fallback"),p=!0,b=null):u===f&&(p=!0,b=h.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,f+1)),x=()=>{let v;return d?v=g:p?v=b:h.route.Component?v=R.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=c,R.createElement(Ol,{match:h,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?R.createElement(Il,{location:n.location,revalidation:n.revalidation,component:g,error:d,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}var ea=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ea||{}),ta=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ta||{});function jl(e){let t=R.useContext(zr);return t||te(!1),t}function Ll(e){let t=R.useContext(xl);return t||te(!1),t}function Nl(e){let t=R.useContext(Ue);return t||te(!1),t}function na(e){let t=Nl(),n=t.matches[t.matches.length-1];return n.route.id||te(!1),n.route.id}function Dl(){var e;let t=R.useContext(Xs),n=Ll(),r=na();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function $l(){let{router:e}=jl(ea.UseNavigateStable),t=na(ta.UseNavigateStable),n=R.useRef(!1);return Qs(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,qt({fromRouteId:t},s)))},[e,t])}const Si={};function Ul(e,t,n){Si[e]||(Si[e]=!0)}function Bl(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function hb(e){let{to:t,replace:n,state:r,relative:i}=e;Tt()||te(!1);let{future:s,static:a}=R.useContext(Ke),{matches:o}=R.useContext(Ue),{pathname:l}=At(),u=Tn(),c=Fr(t,Br(o,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return R.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function Fl(e){te(!1)}function zl(e){let{basename:t="/",children:n=null,location:r,navigationType:i=We.Pop,navigator:s,static:a=!1,future:o}=e;Tt()&&te(!1);let l=t.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:s,static:a,future:qt({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Ct(r));let{pathname:c="/",search:h="",hash:f="",state:d=null,key:p="default"}=r,g=R.useMemo(()=>{let b=Ur(c,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:d,key:p},navigationType:i}},[l,c,h,f,d,p,i]);return g==null?null:R.createElement(Ke.Provider,{value:u},R.createElement(Cn.Provider,{children:n,value:g}))}function db(e){let{children:t,location:n}=e;return Cl(cr(t),n)}new Promise(()=>{});function cr(e,t){t===void 0&&(t=[]);let n=[];return R.Children.forEach(e,(r,i)=>{if(!R.isValidElement(r))return;let s=[...t,i];if(r.type===R.Fragment){n.push.apply(n,cr(r.props.children,s));return}r.type!==Fl&&te(!1),!r.props.index||!r.props.children||te(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=cr(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hr(){return hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hr.apply(this,arguments)}function Ml(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function ql(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vl(e,t){return e.button===0&&(!t||t==="_self")&&!ql(e)}function dr(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Wl(e,t){let n=dr(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Hl=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Kl="6";try{window.__reactRouterVersion=Kl}catch{}const Jl="startTransition",Ei=qo[Jl];function fb(e){let{basename:t,children:n,future:r,window:i}=e,s=R.useRef();s.current==null&&(s.current=Yo({window:i,v5Compat:!0}));let a=s.current,[o,l]=R.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=R.useCallback(h=>{u&&Ei?Ei(()=>l(h)):l(h)},[l,u]);return R.useLayoutEffect(()=>a.listen(c),[a,c]),R.useEffect(()=>Bl(r),[r]),R.createElement(zl,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const Gl=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Yl=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xl=R.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=t,f=Ml(t,Hl),{basename:d}=R.useContext(Ke),p,g=!1;if(typeof u=="string"&&Yl.test(u)&&(p=u,Gl))try{let v=new URL(window.location.href),A=u.startsWith("//")?new URL(v.protocol+u):new URL(u),O=Ur(A.pathname,d);A.origin===v.origin&&O!=null?u=O+A.search+A.hash:g=!0}catch{}let b=Sl(u,{relative:i}),m=Ql(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h});function x(v){r&&r(v),v.defaultPrevented||m(v)}return R.createElement("a",hr({},f,{href:p||b,onClick:g||s?r:x,ref:n,target:l}))});var Ci;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ci||(Ci={}));var Ti;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ti||(Ti={}));function Ql(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=t===void 0?{}:t,l=Tn(),u=At(),c=Zs(e,{relative:a});return R.useCallback(h=>{if(Vl(h,n)){h.preventDefault();let f=r!==void 0?r:gn(u)===gn(c);l(e,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,r,i,n,e,s,a,o])}function pb(e){let t=R.useRef(dr(e)),n=R.useRef(!1),r=At(),i=R.useMemo(()=>Wl(r.search,n.current?null:t.current),[r.search]),s=Tn(),a=R.useCallback((o,l)=>{const u=dr(typeof o=="function"?o(i):o);n.current=!0,s("?"+u,l)},[s,i]);return[i,a]}function An(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Zl(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})}const eu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Mr extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class tu extends Mr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ai extends Mr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ri extends Mr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fr;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(fr||(fr={}));class nu{constructor(t,{headers:n={},customFetch:r,region:i=fr.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=eu(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Zl(this,arguments,void 0,function*(n,r={}){var i;let s,a;try{const{headers:o,method:l,body:u,signal:c,timeout:h}=r;let f={},{region:d}=r;d||(d=this.region);const p=new URL(`${this.url}/${n}`);d&&d!=="any"&&(f["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let g;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let b=c;h&&(a=new AbortController,s=setTimeout(()=>a.abort(),h),c?(b=a.signal,c.addEventListener("abort",()=>a.abort())):b=a.signal);const m=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:g,signal:b}).catch(O=>{throw new tu(O)}),x=m.headers.get("x-relay-error");if(x&&x==="true")throw new Ai(m);if(!m.ok)throw new Ri(m);let v=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),A;return v==="application/json"?A=yield m.json():v==="application/octet-stream"||v==="application/pdf"?A=yield m.blob():v==="text/event-stream"?A=m:v==="multipart/form-data"?A=yield m.formData():A=yield m.text(),{data:A,error:null,response:m}}catch(o){return{data:null,error:o,response:o instanceof Ri||o instanceof Ai?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var ru=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},iu=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let a=null,o=null,l=null,u=s.status,c=s.statusText;if(s.ok){var h,f;if(n.method!=="HEAD"){var d;const m=await s.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((d=n.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?o=m:o=JSON.parse(m))}const g=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(f=s.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,u=406,c="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var p;const g=await s.text();try{a=JSON.parse(g),Array.isArray(a)&&s.status===404&&(o=[],a=null,u=200,c="OK")}catch{s.status===404&&g===""?(u=204,c="No Content"):a={message:g}}if(a&&n.isMaybeSingle&&(!(a==null||(p=a.details)===null||p===void 0)&&p.includes("0 rows"))&&(a=null,u=200,c="OK"),a&&n.shouldThrowOnError)throw new ru(a)}return{error:a,data:o,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(i=i.catch(s=>{var a;let o="";const l=s==null?void 0:s.cause;if(l){var u,c,h,f;const p=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",g=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";o=`${(h=s==null?void 0:s.name)!==null&&h!==void 0?h:"FetchError"}: ${s==null?void 0:s.message}`,o+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${p}`,g&&(o+=` (${g})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var d;o=(d=s==null?void 0:s.stack)!==null&&d!==void 0?d:""}return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},su=class extends iu{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Ii=new RegExp("[,()]");var wt=class extends su{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Ii.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Ii.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},au=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new wt({method:i,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST",{url:s,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),n||a.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);s.searchParams.set("columns",l.join(","))}}return new wt({method:i,url:s,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);o.searchParams.set("columns",c.join(","))}}return new wt({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:i,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new wt({method:r,url:i,headers:s,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new wt({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},ou=class ra{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new au(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ra(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let u;const c=d=>d!==null&&typeof d=="object"&&(!Array.isArray(d)||d.some(c)),h=r&&Object.values(n).some(c);h?(o="POST",u=n):r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{l.searchParams.append(d,p)})):(o="POST",u=n);const f=new Headers(this.headers);return h?f.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&f.set("Prefer",`count=${s}`),new wt({method:o,url:l,headers:f,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class lu{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const uu="2.91.1",cu=`realtime-js/${uu}`,hu="1.0.0",ia="2.0.0",Oi=ia,pr=1e4,du=1e3,fu=100;var qe;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(qe||(qe={}));var ie;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ie||(ie={}));var Re;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Re||(Re={}));var gr;(function(e){e.websocket="websocket"})(gr||(gr={}));var nt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nt||(nt={}));class pu{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var i,s;const a=t.topic,o=(i=t.ref)!==null&&i!==void 0?i:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",u=t.payload.event,c=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+u.length+h.length,d=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(d),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,l.length),p.setUint8(g++,o.length),p.setUint8(g++,a.length),p.setUint8(g++,u.length),p.setUint8(g++,h.length),p.setUint8(g++,n),Array.from(l,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(o,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(a,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(u,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(h,m=>p.setUint8(g++,m.charCodeAt(0)));var b=new Uint8Array(d.byteLength+r.byteLength);return b.set(new Uint8Array(d),0),b.set(new Uint8Array(r),d.byteLength),b.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,s,a,o,l]=r;return n({join_ref:i,ref:s,topic:a,event:o,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+s));l=l+s;const h=r.decode(t.slice(l,l+a));l=l+a;const f=t.slice(l,t.byteLength),d=o===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,p={type:this.BROADCAST_EVENT,event:c,payload:d};return a>0&&(p.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class sa{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(X||(X={}));const Pi=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,a)=>(s[a]=gu(a,e,t,i),s),{}):{}},gu=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?aa(s,a):mr(a)},aa=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return bu(t,n)}switch(e){case X.bool:return mu(t);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return yu(t);case X.json:case X.jsonb:return wu(t);case X.timestamp:return vu(t);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return mr(t);default:return mr(t)}},mr=e=>e,mu=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yu=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},wu=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},bu=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>aa(t,o))}return e},vu=e=>typeof e=="string"?e.replace(" ","T"):e,oa=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Un{constructor(t,n,r={},i=pr){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ji;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ji||(ji={}));class $t{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$t.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=$t.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=$t.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=s[u];if(h){const f=c.map(b=>b.presence_ref),d=h.map(b=>b.presence_ref),p=c.filter(b=>d.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);p.length>0&&(o[u]=p),g.length>0&&(l[u]=g)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(l),c.length>0){const h=t[o].map(d=>d.presence_ref),f=c.filter(d=>h.indexOf(d.presence_ref)<0);t[o].unshift(...f)}r(o,c,l)}),this.map(a,(o,l)=>{let u=t[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),t[o]=u,i(o,u,l),u.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Li;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Li||(Li={}));var Ut;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ut||(Ut={}));var $e;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})($e||($e={}));class kt{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Un(this,Re.join,this.params,this.timeout),this.rejoinTimer=new sa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Re.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new $t(this),this.broadcastEndpointURL=oa(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ie.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Ut.PRESENCE]&&this.bindings[Ut.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(d=>t==null?void 0:t($e.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t($e.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),d===void 0){t==null||t($e.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,m=[];for(let x=0;x<b;x++){const v=g[x],{filter:{event:A,schema:O,table:k,filter:C}}=v,D=d&&d[x];if(D&&D.event===A&&kt.isFilterValueEqual(D.schema,O)&&kt.isFilterValueEqual(D.table,k)&&kt.isFilterValueEqual(D.filter,C))m.push(Object.assign(Object.assign({},v),{id:D.id}));else{this.unsubscribe(),this.state=ie.errored,t==null||t($e.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t($e.SUBSCRIBED);return}}).receive("error",d=>{this.state=ie.errored,t==null||t($e.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t($e.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ie.joined&&t===Ut.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const u=await o.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ie.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Re.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Un(this,Re.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ie.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Un(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>fu){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=Re;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(d=>{var p,g,b;return((p=d.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(g=d.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(d=>d.callback(f,r)):(s=this.bindings[a])===null||s===void 0||s.filter(d=>{var p,g,b,m,x,v,A,O;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in d){const k=d.id,C=(p=d.filter)===null||p===void 0?void 0:p.event;return k&&((g=n.ids)===null||g===void 0?void 0:g.includes(k))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((m=d.filter)===null||m===void 0)&&m.table)||d.filter.table===((x=n.data)===null||x===void 0?void 0:x.table))}else{const k=(A=(v=d==null?void 0:d.filter)===null||v===void 0?void 0:v.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return k==="*"||k===((O=n==null?void 0:n.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===a}).map(d=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:g,table:b,commit_timestamp:m,type:x,errors:v}=p;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:m,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(p))}d.callback(f,r)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&kt.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Re.close,{},t)}_onError(t){this._on(Re.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Pi(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Pi(t.columns,t.old_record)),n}}const Bn=()=>{},rn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_u=[1e3,2e3,5e3,1e4],ku=1e4,xu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Su{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pr,this.transport=null,this.heartbeatIntervalMs=rn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bn,this.ref=0,this.reconnectTimer=null,this.vsn=Oi,this.logger=Bn,this.conn=null,this.sendBuffer=[],this.serializer=new pu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${gr.websocket}`,this.httpEndpoint=oa(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lu.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qe.connecting:return nt.Connecting;case qe.open:return nt.Open;case qe.closing:return nt.Closing;default:return nt.Closed}}isConnected(){return this.connectionState()===nt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new kt(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(du,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},rn.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===qe.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===qe.open||this.conn.readyState===qe.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Re.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([xu],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:cu};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Re.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new sa(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,l,u,c,h,f,d;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:pr,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:rn.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Bn,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Oi,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:p=>_u[p-1]||ku,this.vsn){case hu:this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(p,g)=>g(JSON.stringify(p)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(p,g)=>g(JSON.parse(p));break;case ia:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Vt=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Eu(e,t,n){const r=new URL(t,e);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function Cu(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Tu(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const o=Eu(e.baseUrl,r,i),l=await Cu(e.auth),u=await t(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),c=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&c?JSON.parse(c):c;if(!u.ok){const d=h?f:void 0,p=d==null?void 0:d.error;throw new Vt((p==null?void 0:p.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:d})}return{status:u.status,headers:u.headers,data:f}}}}function sn(e){return e.join("")}var Au=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:sn(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sn(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sn(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sn(e.namespace)}`}),!0}catch(t){if(t instanceof Vt&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Vt&&n.status===409)return;throw n}}};function ht(e){return e.join("")}var Ru=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ht(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ht(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ht(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ht(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ht(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ht(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Vt&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Vt&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Iu=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Tu({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Au(this.client,t),this.tableOps=new Ru(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Rn=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Z(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Ou=class extends Rn{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},yr=class extends Rn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const qr=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Pu=()=>Response,wr=e=>{if(Array.isArray(e))return e.map(n=>wr(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=wr(r)}),t},ju=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Lu=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Wt(e){"@babel/helpers - typeof";return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(e)}function Nu(e,t){if(Wt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Du(e){var t=Nu(e,"string");return Wt(t)=="symbol"?t:t+""}function $u(e,t,n){return(t=Du(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ni(Object(n),!0).forEach(function(r){$u(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Fn=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Uu=async(e,t,n)=>{e instanceof await Pu()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const i=e.status||500,s=(r==null?void 0:r.statusCode)||i+"";t(new Ou(Fn(r),i,s))}).catch(r=>{t(new yr(Fn(r),r))}):t(new yr(Fn(e),e))},Bu=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(ju(r)?(i.headers=F({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),F(F({},i),n))};async function Qt(e,t,n,r,i,s){return new Promise((a,o)=>{e(n,Bu(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Uu(l,o,r))})}async function Ht(e,t,n,r){return Qt(e,"GET",t,n,r)}async function Ae(e,t,n,r,i){return Qt(e,"POST",t,r,i,n)}async function br(e,t,n,r,i){return Qt(e,"PUT",t,r,i,n)}async function Fu(e,t,n,r){return Qt(e,"HEAD",t,F(F({},n),{},{noResolveJson:!0}),r)}async function Vr(e,t,n,r,i){return Qt(e,"DELETE",t,r,i,n)}var zu=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};let la;la=Symbol.toStringTag;var Mu=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[la]="BlobDownloadBuilder",this.promise=null}asStream(){return new zu(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};const qu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Di={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Vu=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=qr(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var i=this;try{let s;const a=F(F({},Di),r);let o=F(F({},i.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(o=F(F({},o),r.headers));const u=i._removeEmptyFolders(t),c=i._getFinalPath(u),h=await(e=="PUT"?br:Ae)(i.fetch,`${i.url}/object/${c}`,s,F({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;const s=i._removeEmptyFolders(e),a=i._getFinalPath(s),o=new URL(i.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=F({upsert:Di.upsert},r),c=F(F({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:s,fullPath:(await br(i.fetch,o.toString(),l,{headers:c})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Z(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const i=F({},n.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=await Ae(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+s.url),o=a.searchParams.get("token");if(!o)throw new Rn("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await Ae(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}async copy(e,t,n){var r=this;try{return{data:{path:(await Ae(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}async createSignedUrl(e,t,n){var r=this;try{let i=r._getFinalPath(e),s=await Ae(r.fetch,`${r.url}/object/sign/${i}`,F({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}async createSignedUrls(e,t,n){var r=this;try{const i=await Ae(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>F(F({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(e),a=()=>Ht(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new Mu(a,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:wr(await Ht(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await Fu(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r)&&r instanceof yr){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(e){var t=this;try{return{data:await Vr(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const i=F(F(F({},qu),t),{},{prefix:e||""});return{data:await Ae(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}async listV2(e,t){var n=this;try{const r=F({},e);return{data:await Ae(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const ua="2.91.1",ca={"X-Client-Info":`storage-js/${ua}`};var Wu=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=F(F({},ca),t),this.fetch=qr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Ht(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Ht(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await Ae(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await br(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await Ae(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Vr(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Hu=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},ca),t),this.fetch=qr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Ae(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Ht(t.fetch,i,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Vr(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!Lu(e))throw new Rn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Iu({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const a=i[s];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(i,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Wr={"X-Client-Info":`storage-js/${ua}`,"Content-Type":"application/json"};var ha=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function be(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var zn=class extends ha{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ku=class extends ha{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Hr=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ju=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$i=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gu=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const a=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";t(new zn($i(s),r,a))}).catch(()=>{const s=r+"";t(new zn(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";t(new zn(i.statusText||`HTTP ${r} error`,r,s))}}else t(new Ku($i(e),e))},Yu=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(Ju(r)?(i.headers=F({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,F(F({},i),n)):i};async function Xu(e,t,n,r,i,s){return new Promise((a,o)=>{e(n,Yu(t,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>Gu(l,o,r))})}async function ve(e,t,n,r,i){return Xu(e,"POST",t,r,i,n)}var Qu=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},Wr),t),this.fetch=Hr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await ve(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await ve(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(be(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await ve(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await ve(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(be(r))return{data:null,error:r};throw r}}},Zu=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},Wr),t),this.fetch=Hr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ve(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await ve(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await ve(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await ve(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ve(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}},ec=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},Wr),t),this.fetch=Hr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ve(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await ve(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await ve(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await ve(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}}},tc=class extends ec{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new nc(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},nc=class extends Qu{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new rc(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},rc=class extends Zu{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},ic=class extends Wu{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Vu(this.url,this.headers,e,this.fetch)}get vectors(){return new tc(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hu(this.url+"/iceberg",this.headers,this.fetch)}};const da="2.91.1",bt=30*1e3,vr=3,Mn=vr*bt,sc="http://localhost:9999",ac="supabase.auth.token",oc={"X-Client-Info":`gotrue-js/${da}`},_r="X-Supabase-Api-Version",fa={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lc=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uc=10*60*1e3;class Kt extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function j(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class cc extends Kt{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function hc(e){return j(e)&&e.name==="AuthApiError"}class rt extends Kt{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Be extends Kt{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ye extends Be{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dc(e){return j(e)&&e.name==="AuthSessionMissingError"}class dt extends Be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class an extends Be{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class on extends Be{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fc(e){return j(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ui extends Be{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pc extends Be{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class kr extends Be{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function qn(e){return j(e)&&e.name==="AuthRetryableFetchError"}class Bi extends Be{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class xr extends Be{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const mn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fi=` 	
\r=`.split(""),gc=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Fi.length;t+=1)e[Fi[t].charCodeAt(0)]=-2;for(let t=0;t<mn.length;t+=1)e[mn[t].charCodeAt(0)]=t;return e})();function zi(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(mn[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(mn[r]),t.queuedBits-=6}}function pa(e,t,n){const r=gc[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Mi(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{wc(a,r,n)};for(let a=0;a<e.length;a+=1)pa(e.charCodeAt(a),i,s);return t.join("")}function mc(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function yc(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}mc(r,t)}}function wc(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function xt(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)pa(e.charCodeAt(i),n,r);return new Uint8Array(t)}function bc(e){const t=[];return yc(e,n=>t.push(n)),new Uint8Array(t)}function st(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>zi(i,n,r)),zi(null,n,r),t.join("")}function vc(e){return Math.round(Date.now()/1e3)+e}function _c(){return Symbol("auth-callback")}const le=()=>typeof window<"u"&&typeof document<"u",Xe={tested:!1,writable:!1},ga=()=>{if(!le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xe.tested)return Xe.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xe.tested=!0,Xe.writable=!0}catch{Xe.tested=!0,Xe.writable=!1}return Xe.writable};function kc(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const ma=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),xc=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",vt=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Qe=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},oe=async(e,t)=>{await e.removeItem(t)};class In{constructor(){this.promise=new In.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}In.promiseConstructor=Promise;function Vn(e){const t=e.split(".");if(t.length!==3)throw new xr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!lc.test(t[r]))throw new xr("JWT not in base64url format");return{header:JSON.parse(Mi(t[0])),payload:JSON.parse(Mi(t[1])),signature:xt(t[2]),raw:{header:t[0],payload:t[1]}}}async function Sc(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Ec(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function Cc(e){return("0"+e.toString(16)).substr(-2)}function Tc(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,Cc).join("")}async function Ac(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Rc(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Ac(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ft(e,t,n=!1){const r=Tc();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await vt(e,`${t}-code-verifier`,i);const s=await Rc(r);return[s,r===s?"plain":"s256"]}const Ic=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Oc(e){const t=e.headers.get(_r);if(!t||!t.match(Ic))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Pc(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jc(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pt(e){if(!Lc.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wn(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nc(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function qi(e){return JSON.parse(JSON.stringify(e))}const et=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Dc=[502,503,504];async function Vi(e){var t;if(!xc(e))throw new kr(et(e),0);if(Dc.includes(e.status))throw new kr(et(e),e.status);let n;try{n=await e.json()}catch(s){throw new rt(et(s),s)}let r;const i=Oc(e);if(i&&i.getTime()>=fa["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Bi(et(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ye}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Bi(et(n),e.status,n.weak_password.reasons);throw new cc(et(n),e.status||500,r)}const $c=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function B(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[_r]||(s[_r]=fa["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Uc(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Uc(e,t,n,r,i,s){const a=$c(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new kr(et(l),0)}if(o.ok||await Vi(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Vi(l)}}function Te(e){var t;let n=null;zc(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=vc(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Wi(e){const t=Te(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ve(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Bc(e){return{data:e,error:null}}function Fc(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=An(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Hi(e){return e}function zc(e){return e.access_token&&e.refresh_token&&e.expires_in}const Hn=["global","local","others"];class Mc{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=ma(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Hn[0]){if(Hn.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hn.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(j(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ve})}catch(r){if(j(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=An(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Fc,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(j(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ve})}catch(n){if(j(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Hi});if(c.error)throw c.error;const h=await c.json(),f=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(j(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){pt(t);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ve})}catch(n){if(j(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){pt(t);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ve})}catch(r){if(j(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){pt(t);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ve})}catch(r){if(j(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){pt(t.userId);try{const{data:n,error:r}=await B(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(j(n))return{data:null,error:n};throw n}}async _deleteFactor(t){pt(t.userId),pt(t.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(j(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await B(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Hi});if(c.error)throw c.error;const h=await c.json(),f=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(j(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(j(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await B(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(j(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await B(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(j(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await B(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(j(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(j(n))return{data:null,error:n};throw n}}}function Ki(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const gt={debug:!!(globalThis&&ga()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ya extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class qc extends ya{}async function Vc(e,t,n){gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),gt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new qc(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Wc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wa(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Hc(e){return parseInt(e,16)}function Kc(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Jc(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:c,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const d=wa(e.address),p=c?`${c}://${r}`:r,g=e.statement?`${e.statement}
`:"",b=`${p} wants you to sign in with your Ethereum account:
${d}

${g}`;let m=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(m+=`
Expiration Time: ${i.toISOString()}`),o&&(m+=`
Not Before: ${o.toISOString()}`),l&&(m+=`
Request ID: ${l}`),u){let x=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}m+=x}return`${b}
${m}`}class re extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class yn extends re{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function Gc({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(ba(a)){if(s.rp.id!==a)return new re({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Yc({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(ba(r)){if(n.rpId!==r)return new re({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Xc{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Qc=new Xc;function Zc(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=An(e,["challenge","user","excludeCredentials"]),s=xt(t).buffer,a=Object.assign(Object.assign({},n),{id:xt(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:xt(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function eh(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=An(e,["challenge","allowCredentials"]),i=xt(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:xt(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function th(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:st(new Uint8Array(e.response.attestationObject)),clientDataJSON:st(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function nh(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:st(new Uint8Array(i.authenticatorData)),clientDataJSON:st(new Uint8Array(i.clientDataJSON)),signature:st(new Uint8Array(i.signature)),userHandle:i.userHandle?st(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ba(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ji(){var e,t;return!!(le()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function rh(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yn("Browser returned unexpected credential type",t)}:{data:null,error:new yn("Empty credential response",t)}}catch(t){return{data:null,error:Gc({error:t,options:e})}}}async function ih(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yn("Browser returned unexpected credential type",t)}:{data:null,error:new yn("Empty credential response",t)}}catch(t){return{data:null,error:Yc({error:t,options:e})}}}const sh={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ah={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wn(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(t(a)){const o=r[s];t(o)?r[s]=wn(o,a):r[s]=wn(a)}else r[s]=a}return r}function oh(e,t){return wn(sh,e,t||{})}function lh(e,t){return wn(ah,e,t||{})}class uh{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:o};const l=i??Qc.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=oh(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:c,error:h}=await rh({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}case"request":{const u=lh(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:c,error:h}=await ih(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}}}catch(a){return j(a)?{data:null,error:a}:{data:null,error:new rt("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Kt("rpId is required for WebAuthn authentication")};try{if(!Ji())return{data:null,error:new rt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return j(a)?{data:null,error:a}:{data:null,error:new rt("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Kt("rpId is required for WebAuthn registration")};try{if(!Ji())return{data:null,error:new rt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:o};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return j(a)?{data:null,error:a}:{data:null,error:new rt("Unexpected error in register",a)}}}}Wc();const ch={url:sc,storageKey:ac,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Gi(e,t,n){return await n()}const mt={};class Jt{get jwks(){var t,n;return(n=(t=mt[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){mt[this.storageKey]=Object.assign(Object.assign({},mt[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=mt[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){mt[this.storageKey]=Object.assign(Object.assign({},mt[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},ch),t);if(this.storageKey=s.storageKey,this.instanceID=(n=Jt.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Jt.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&le()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Mc({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ma(s.fetch),this.lock=s.lock||Gi,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&le()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Vc:this.lock=Gi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uh(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ga()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ki(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ki(this.memoryStorage)),le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${da}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(le()&&(n=kc(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),le()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),fc(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return j(n)?this._returnResult({error:n}):this._returnResult({error:new rt("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Te}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(j(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:c,password:h,options:f}=t;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await ft(this.storage,this.storageKey)),s=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:d,code_challenge_method:p},xform:Te})}else if("phone"in t){const{phone:c,password:h,options:f}=t;s=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Te})}else throw new an("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await oe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await oe(this.storage,`${this.storageKey}-code-verifier`),j(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Wi})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Wi})}else throw new an("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new dt;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(j(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,a,o,l,u,c,h,f;let d,p;if("message"in t)d=t.message,p=t.signature;else{const{chain:g,wallet:b,statement:m,options:x}=t;let v;if(le())if(typeof b=="object")v=b;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")v=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=b}const A=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),O=await v.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=wa(O[0]);let C=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const U=await v.request({method:"eth_chainId"});C=Hc(U)}const D={domain:A.host,address:k,statement:m,uri:A.href,version:"1",chainId:C,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.resources};d=Jc(D),p=await v.request({method:"personal_sign",params:[Kc(d),k]})}try{const{data:g,error:b}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:p},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Te});if(b)throw b;if(!g||!g.session||!g.user){const m=new dt;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(j(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,i,s,a,o,l,u,c,h,f,d;let p,g;if("message"in t)p=t.message,g=t.signature;else{const{chain:b,wallet:m,statement:x,options:v}=t;let A;if(le())if(typeof m=="object")A=m;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))A=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=m}const O=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const k=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),x?{statement:x}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)p=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${O.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(c=v==null?void 0:v.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await A.signMessage(new TextEncoder().encode(p),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:b,error:m}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:st(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=t.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Te});if(m)throw m;if(!b||!b.session||!b.user){const x=new dt;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:m})}catch(b){if(j(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const n=await Qe(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new pc;const{data:s,error:a}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Te});if(await oe(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new dt;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await oe(this.storage,`${this.storageKey}-code-verifier`),j(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Te}),{data:l,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new dt;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(j(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await ft(this.storage,this.storageKey));const{error:h}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:o,options:l}=t,{data:u,error:c}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new an("You must provide either an email or phone number.")}catch(o){if(await oe(this.storage,`${this.storageKey}-code-verifier`),j(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Te});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(j(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await ft(this.storage,this.storageKey));const u=await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Bc});return!((s=u.data)===null||s===void 0)&&s.url&&le()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await oe(this.storage,`${this.storageKey}-code-verifier`),j(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ye;const{error:i}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(j(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await B(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await B(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new an("You must provide either an email or phone number and a type")}catch(n){if(j(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Qe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Mn:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Qe(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Wn()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=Nc(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ve}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ye}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ve})})}catch(n){if(j(n))return dc(n)&&(await this._removeSession(),await oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ye;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await ft(this.storage,this.storageKey));const{data:u,error:c}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Ve});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await oe(this.storage,`${this.storageKey}-code-verifier`),j(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ye;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=Vn(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(j(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ye;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(j(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!le())throw new on("No browser detected.");if(t.error||t.error_description||t.error_code)throw new on(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ui("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new on("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ui("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=t;if(!s||!o||!a||!u)throw new on("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let f=c+h;l&&(f=parseInt(l));const d=f-c;d*1e3<=bt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);const p=f-h;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:g,error:b}=await this._getUser(s);if(b)throw b;const m={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(r){if(j(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Qe(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(hc(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=_c(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ft(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await oe(this.storage,`${this.storageKey}-code-verifier`),j(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,u,c;const{data:h,error:f}=s;if(f)throw f;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",d,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return le()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(j(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:l,access_token:u,nonce:c}=t,h=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Te}),{data:f,error:d}=h;return d?this._returnResult({data:{user:null,session:null},error:d}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new dt}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:d}))}catch(i){if(await oe(this.storage,`${this.storageKey}-code-verifier`),j(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ec(async i=>(i>0&&await Sc(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Te})),(i,s)=>{const a=200*Math.pow(2,i);return s&&qn(s)&&Date.now()+a-r<bt})}catch(r){if(this._debug(n,"error",r),j(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),le()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Qe(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Qe(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await vt(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Wn()}else if(i&&!i.user&&!i.user){const a=await Qe(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await oe(this.storage,this.storageKey+"-user"),await vt(this.storage,this.storageKey,i)):i.user=Wn()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Mn;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Mn}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),qn(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ye;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new In;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new ye;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),j(s)){const a={data:null,error:s};return qn(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await oe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await vt(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=qi(i);await vt(this.storage,this.storageKey,s)}else{const i=qi(n);await vt(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await oe(this.storage,this.storageKey),await oe(this.storage,this.storageKey+"-code-verifier"),await oe(this.storage,this.storageKey+"-user"),this.userStorage&&await oe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bt);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/bt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${bt}ms, refresh threshold is ${vr} ticks`),i<=vr&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ya)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await ft(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await B(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await B(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?th(t.webauthn.credential_response):nh(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Zc(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:eh(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Vn(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const u=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await B(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ye})})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ye});const a=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&le()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ye});const a=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&le()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await B(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ye})})}catch(t){if(j(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await B(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ye})})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+uc>i)return r;const{data:s,error:a}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:d,error:p}=await this.getSession();if(p||!d.session)return this._returnResult({data:null,error:p});r=d.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=Vn(r);n!=null&&n.allowExpired||Pc(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:d}=await this.getUser(r);if(d)throw d;return{data:{claims:s,header:i,signature:a},error:null}}const c=jc(i.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,a,bc(`${o}.${l}`)))throw new xr("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}}Jt.nextInstanceID={};const hh=Jt,dh="2.91.1";let Dt="";typeof Deno<"u"?Dt="deno":typeof document<"u"?Dt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dt="react-native":Dt="node";const fh={"X-Client-Info":`supabase-js-${Dt}/${dh}`},ph={headers:fh},gh={schema:"public"},mh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yh={};function Gt(e){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(e)}function wh(e,t){if(Gt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bh(e){var t=wh(e,"string");return Gt(t)=="symbol"?t:t+""}function vh(e,t,n){return(t=bh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yi(Object(n),!0).forEach(function(r){vh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const _h=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kh=()=>Headers,xh=(e,t,n)=>{const r=_h(n),i=kh();return async(s,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,ee(ee({},a),{},{headers:u}))}};function Sh(e){return e.endsWith("/")?e:e+"/"}function Eh(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:u,realtime:c,global:h}=t,f={db:ee(ee({},l),i),auth:ee(ee({},u),s),realtime:ee(ee({},c),a),storage:{},global:ee(ee(ee({},h),o),{},{headers:ee(ee({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Ch(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Sh(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Th=class extends hh{constructor(e){super(e)}},Ah=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;const s=Ch(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o={db:gh,realtime:yh,auth:ee(ee({},mh),{},{storageKey:a}),global:ph},l=Eh(n??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=xh(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ee({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new ou(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new ic(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new nu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:u},c,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Th({url:this.authUrl.href,headers:ee(ee({},f),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(d=>d.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Su(this.realtimeUrl.href,ee(ee({},e),{},{params:ee(ee({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Rh=(e,t,n)=>new Ah(e,t,n);function Ih(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Ih()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Oh="https://bgbwlgzyvoxfkqkwzsnh.supabase.co",Ph="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnYndsZ3p5dm94Zmtxa3d6c25oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0NzY4OTMsImV4cCI6MjA4NDA1Mjg5M30.FNet5nkxPWm0rv3hLosv0NjvG5SL5IsAlt5HdtnO0f8",tt=Rh(Oh,Ph),jh="_adminContainer_14x6l_2",Lh="_adminHeader_14x6l_13",Nh="_previewContainer_14x6l_90",Dh="_previewCard_14x6l_94",$h="_subtitle_14x6l_125",Uh="_badge_14x6l_148",Bh="_politics_14x6l_162",Fh="_environment_14x6l_163",zh="_business_14x6l_164",Mh="_sports_14x6l_165",qh="_health_14x6l_166",Vh="_technology_14x6l_167",Wh="_culture_14x6l_168",Hh="_world_14x6l_169",Kh="_trending_14x6l_170",Jh="_articleList_14x6l_173",Gh="_articleItem_14x6l_178",Yh="_actions_14x6l_192",Xh="_readMore_14x6l_211",Qh="_injectContainer_14x6l_222",Zh="_rowContainer_14x6l_253",ed="_rowCard_14x6l_259",td="_error_14x6l_278",nd="_loading_14x6l_284",rd="_injectArticleSection_14x6l_290",id="_articleIntegrationList_14x6l_301",sd="_integrationItem_14x6l_310",L={adminContainer:jh,adminHeader:Lh,previewContainer:Nh,previewCard:Dh,subtitle:$h,badge:Uh,politics:Bh,environment:Fh,business:zh,sports:Mh,health:qh,technology:Vh,culture:Wh,world:Hh,trending:Kh,articleList:Jh,articleItem:Gh,actions:Yh,readMore:Xh,injectContainer:Qh,rowContainer:Zh,rowCard:ed,error:td,loading:nd,injectArticleSection:rd,articleIntegrationList:id,integrationItem:sd,"hero-image":"_hero-image_14x6l_344","pull-quote":"_pull-quote_14x6l_351","featured-options-separator":"_featured-options-separator_14x6l_361"},ad=e=>t=>{const{name:n,value:r,type:i,checked:s}=t.target;e(a=>({...a,[n]:i==="checkbox"?s:r}))};function od({handleSubmit:e,editingId:t,form:n,setForm:r,loading:i,resetForm:s,contentRef:a,handleInjectSubtitle:o,handleInjectImage:l,handleInjectLink:u}){const c=ad(r);return _.jsxs("form",{onSubmit:e,className:L.articleForm,"aria-live":"polite",children:[_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Section & Category"}),_.jsxs("label",{children:[_.jsx("span",{children:"Section:"}),_.jsxs("select",{name:"section",value:n.section||"news",onChange:c,disabled:i,children:[_.jsx("option",{value:"news",children:"News Columns"}),_.jsx("option",{value:"feature",children:"Feature Stories"}),_.jsx("option",{value:"update",children:"Kenya Update"}),_.jsx("option",{value:"opinion",children:"Opinion"})]})]}),n.section==="news"&&_.jsxs("label",{children:[_.jsx("span",{children:"Category:"}),_.jsxs("select",{name:"category",value:n.category||"global",onChange:c,disabled:i,children:[_.jsx("option",{value:"global",children:"Global"}),_.jsx("option",{value:"africa",children:"Africa"}),_.jsx("option",{value:"local",children:"Local"})]})]})]}),n.section==="feature"&&_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Featured Options"}),_.jsxs("label",{children:[_.jsx("input",{type:"checkbox",name:"must_read",checked:n.must_read||!1,onChange:c,disabled:i}),"MUST READ"]}),_.jsxs("label",{children:[_.jsx("input",{type:"checkbox",name:"most_relevant",checked:n.most_relevant||!1,onChange:c,disabled:i}),"MOST RELEVANT"]})]}),_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Metadata"}),_.jsx("input",{type:"text",name:"author",placeholder:"Author",value:n.author||"",onChange:c,required:!0,"aria-required":"true",disabled:i}),_.jsx("input",{type:"text",name:"dateline",placeholder:"Dateline (e.g., Nairobi, Kenya)",value:n.dateline||"",onChange:c,disabled:i}),_.jsx("input",{type:"date",name:"publicationDate",value:n.publicationDate||"",onChange:c,disabled:i}),_.jsx("small",{className:L.helper,children:"Use YYYY-MM-DD format"}),_.jsx("input",{type:"text",name:"tags",placeholder:"Tags (comma-separated)",value:n.tags||"",onChange:c,disabled:i})]}),_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Details"}),_.jsxs("label",{children:[_.jsx("span",{children:"Badge:"}),_.jsxs("select",{name:"badge",value:n.badge||"",onChange:c,disabled:i,children:[_.jsx("option",{value:"",children:"None"}),_.jsx("option",{value:"politics",children:"Politics"}),_.jsx("option",{value:"environment",children:"Environment"}),_.jsx("option",{value:"business",children:"Business"}),_.jsx("option",{value:"sports",children:"Sports"}),_.jsx("option",{value:"health",children:"Health"}),_.jsx("option",{value:"technology",children:"Technology"}),_.jsx("option",{value:"culture",children:"Culture"}),_.jsx("option",{value:"world",children:"World"})]})]})]}),_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Content"}),_.jsx("input",{type:"text",name:"title",placeholder:"Title",value:n.title||"",onChange:c,required:!0,"aria-required":"true",disabled:i}),_.jsx("input",{type:"text",name:"subtitle",placeholder:"Subtitle",value:n.subtitle||"",onChange:c,disabled:i}),_.jsx("textarea",{ref:a,name:"content",placeholder:"Content (Markdown supported: ## for headings, ![alt](url) for images, etc.)",value:n.content||"",onChange:c,required:!0,"aria-required":"true",rows:"15",disabled:i})]}),_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Multimedia"}),_.jsx("input",{type:"url",name:"imageUrl",placeholder:"Featured Image URL",value:n.imageUrl||"",onChange:c,disabled:i}),_.jsx("input",{type:"text",name:"imageCaption",placeholder:"Featured Image Caption",value:n.imageCaption||"",onChange:c,disabled:i}),_.jsx("input",{type:"url",name:"videoUrl",placeholder:"Video Embed URL",value:n.videoUrl||"",onChange:c,disabled:i})]}),_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Related Links"}),_.jsx("input",{type:"text",name:"relatedLinks",placeholder:"Related Links (comma-separated URLs)",value:n.relatedLinks||"",onChange:c,disabled:i})]}),_.jsxs("label",{children:[_.jsx("input",{type:"checkbox",name:"trending",checked:n.trending||!1,onChange:c,disabled:i}),"Mark as Trending"]}),_.jsxs("fieldset",{children:[_.jsx("legend",{children:"Inject Tools"}),_.jsxs("div",{className:L.injectContainer,children:[_.jsx("input",{type:"text",name:"injectSubtitle",placeholder:"Subtitle to Inject",value:n.injectSubtitle||"",onChange:c,disabled:i}),_.jsx("button",{type:"button",onClick:o,disabled:i,children:"Inject Subtitle (Markdown ##)"})]}),_.jsxs("div",{className:L.injectContainer,children:[_.jsx("input",{type:"url",name:"injectImageUrl",placeholder:"Image URL to Inject",value:n.injectImageUrl||"",onChange:c,disabled:i}),_.jsx("input",{type:"text",name:"injectImageCaption",placeholder:"Image Caption (optional)",value:n.injectImageCaption||"",onChange:c,disabled:i}),_.jsx("button",{type:"button",onClick:l,disabled:i,children:'Inject Image (Markdown ![alt](url "caption"))'})]}),_.jsxs("div",{className:L.injectContainer,children:[_.jsx("input",{type:"text",name:"injectLinkText",placeholder:"Link Text",value:n.injectLinkText||"",onChange:c,disabled:i}),_.jsx("input",{type:"text",name:"injectLinkSlug",placeholder:"Target Article Slug",value:n.injectLinkSlug||"",onChange:c,disabled:i}),_.jsx("button",{type:"button",onClick:u,disabled:i,children:"Inject Link"})]})]}),_.jsxs("div",{className:L.submitControls,children:[_.jsx("button",{type:"submit",disabled:i,children:t?"Update Article":"Publish Article"}),t&&_.jsx("button",{type:"button",onClick:s,disabled:i,children:"Cancel Edit"})]})]})}function ld(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const ud=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cd=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hd={};function Xi(e,t){return(hd.jsx?cd:ud).test(e)}const dd=/[ \t\n\f\r]/g;function fd(e){return typeof e=="object"?e.type==="text"?Qi(e.value):!1:Qi(e)}function Qi(e){return e.replace(dd,"")===""}class Zt{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Zt.prototype.normal={};Zt.prototype.property={};Zt.prototype.space=void 0;function va(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Zt(n,r,t)}function Sr(e){return e.toLowerCase()}class ge{constructor(t,n){this.attribute=n,this.property=t}}ge.prototype.attribute="";ge.prototype.booleanish=!1;ge.prototype.boolean=!1;ge.prototype.commaOrSpaceSeparated=!1;ge.prototype.commaSeparated=!1;ge.prototype.defined=!1;ge.prototype.mustUseProperty=!1;ge.prototype.number=!1;ge.prototype.overloadedBoolean=!1;ge.prototype.property="";ge.prototype.spaceSeparated=!1;ge.prototype.space=void 0;let pd=0;const M=ot(),ne=ot(),Er=ot(),T=ot(),Q=ot(),St=ot(),we=ot();function ot(){return 2**++pd}const Cr=Object.freeze(Object.defineProperty({__proto__:null,boolean:M,booleanish:ne,commaOrSpaceSeparated:we,commaSeparated:St,number:T,overloadedBoolean:Er,spaceSeparated:Q},Symbol.toStringTag,{value:"Module"})),Kn=Object.keys(Cr);class Kr extends ge{constructor(t,n,r,i){let s=-1;if(super(t,n),Zi(this,"space",i),typeof r=="number")for(;++s<Kn.length;){const a=Kn[s];Zi(this,Kn[s],(r&Cr[a])===Cr[a])}}}Kr.prototype.defined=!0;function Zi(e,t,n){n&&(e[t]=n)}function Rt(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new Kr(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Sr(r)]=r,n[Sr(s.attribute)]=r}return new Zt(t,n,e.space)}const _a=Rt({properties:{ariaActiveDescendant:null,ariaAtomic:ne,ariaAutoComplete:null,ariaBusy:ne,ariaChecked:ne,ariaColCount:T,ariaColIndex:T,ariaColSpan:T,ariaControls:Q,ariaCurrent:null,ariaDescribedBy:Q,ariaDetails:null,ariaDisabled:ne,ariaDropEffect:Q,ariaErrorMessage:null,ariaExpanded:ne,ariaFlowTo:Q,ariaGrabbed:ne,ariaHasPopup:null,ariaHidden:ne,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Q,ariaLevel:T,ariaLive:null,ariaModal:ne,ariaMultiLine:ne,ariaMultiSelectable:ne,ariaOrientation:null,ariaOwns:Q,ariaPlaceholder:null,ariaPosInSet:T,ariaPressed:ne,ariaReadOnly:ne,ariaRelevant:null,ariaRequired:ne,ariaRoleDescription:Q,ariaRowCount:T,ariaRowIndex:T,ariaRowSpan:T,ariaSelected:ne,ariaSetSize:T,ariaSort:null,ariaValueMax:T,ariaValueMin:T,ariaValueNow:T,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function ka(e,t){return t in e?e[t]:t}function xa(e,t){return ka(e,t.toLowerCase())}const gd=Rt({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:St,acceptCharset:Q,accessKey:Q,action:null,allow:null,allowFullScreen:M,allowPaymentRequest:M,allowUserMedia:M,alt:null,as:null,async:M,autoCapitalize:null,autoComplete:Q,autoFocus:M,autoPlay:M,blocking:Q,capture:null,charSet:null,checked:M,cite:null,className:Q,cols:T,colSpan:null,content:null,contentEditable:ne,controls:M,controlsList:Q,coords:T|St,crossOrigin:null,data:null,dateTime:null,decoding:null,default:M,defer:M,dir:null,dirName:null,disabled:M,download:Er,draggable:ne,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:M,formTarget:null,headers:Q,height:T,hidden:Er,high:T,href:null,hrefLang:null,htmlFor:Q,httpEquiv:Q,id:null,imageSizes:null,imageSrcSet:null,inert:M,inputMode:null,integrity:null,is:null,isMap:M,itemId:null,itemProp:Q,itemRef:Q,itemScope:M,itemType:Q,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:M,low:T,manifest:null,max:null,maxLength:T,media:null,method:null,min:null,minLength:T,multiple:M,muted:M,name:null,nonce:null,noModule:M,noValidate:M,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:M,optimum:T,pattern:null,ping:Q,placeholder:null,playsInline:M,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:M,referrerPolicy:null,rel:Q,required:M,reversed:M,rows:T,rowSpan:T,sandbox:Q,scope:null,scoped:M,seamless:M,selected:M,shadowRootClonable:M,shadowRootDelegatesFocus:M,shadowRootMode:null,shape:null,size:T,sizes:null,slot:null,span:T,spellCheck:ne,src:null,srcDoc:null,srcLang:null,srcSet:null,start:T,step:null,style:null,tabIndex:T,target:null,title:null,translate:null,type:null,typeMustMatch:M,useMap:null,value:ne,width:T,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Q,axis:null,background:null,bgColor:null,border:T,borderColor:null,bottomMargin:T,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:M,declare:M,event:null,face:null,frame:null,frameBorder:null,hSpace:T,leftMargin:T,link:null,longDesc:null,lowSrc:null,marginHeight:T,marginWidth:T,noResize:M,noHref:M,noShade:M,noWrap:M,object:null,profile:null,prompt:null,rev:null,rightMargin:T,rules:null,scheme:null,scrolling:ne,standby:null,summary:null,text:null,topMargin:T,valueType:null,version:null,vAlign:null,vLink:null,vSpace:T,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:M,disableRemotePlayback:M,prefix:null,property:null,results:T,security:null,unselectable:null},space:"html",transform:xa}),md=Rt({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:we,accentHeight:T,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:T,amplitude:T,arabicForm:null,ascent:T,attributeName:null,attributeType:null,azimuth:T,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:T,by:null,calcMode:null,capHeight:T,className:Q,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:T,diffuseConstant:T,direction:null,display:null,dur:null,divisor:T,dominantBaseline:null,download:M,dx:null,dy:null,edgeMode:null,editable:null,elevation:T,enableBackground:null,end:null,event:null,exponent:T,externalResourcesRequired:null,fill:null,fillOpacity:T,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:St,g2:St,glyphName:St,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:T,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:T,horizOriginX:T,horizOriginY:T,id:null,ideographic:T,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:T,k:T,k1:T,k2:T,k3:T,k4:T,kernelMatrix:we,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:T,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:T,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:T,overlineThickness:T,paintOrder:null,panose1:null,path:null,pathLength:T,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Q,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:T,pointsAtY:T,pointsAtZ:T,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:we,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:we,rev:we,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:we,requiredFeatures:we,requiredFonts:we,requiredFormats:we,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:T,specularExponent:T,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:T,strikethroughThickness:T,string:null,stroke:null,strokeDashArray:we,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:T,strokeOpacity:T,strokeWidth:null,style:null,surfaceScale:T,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:we,tabIndex:T,tableValues:null,target:null,targetX:T,targetY:T,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:we,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:T,underlineThickness:T,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:T,values:null,vAlphabetic:T,vMathematical:T,vectorEffect:null,vHanging:T,vIdeographic:T,version:null,vertAdvY:T,vertOriginX:T,vertOriginY:T,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:T,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ka}),Sa=Rt({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Ea=Rt({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:xa}),Ca=Rt({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),yd={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},wd=/[A-Z]/g,es=/-[a-z]/g,bd=/^data[-\w.:]+$/i;function vd(e,t){const n=Sr(t);let r=t,i=ge;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&bd.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(es,kd);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!es.test(s)){let a=s.replace(wd,_d);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=Kr}return new i(r,t)}function _d(e){return"-"+e.toLowerCase()}function kd(e){return e.charAt(1).toUpperCase()}const xd=va([_a,gd,Sa,Ea,Ca],"html"),Jr=va([_a,md,Sa,Ea,Ca],"svg");function Sd(e){return e.join(" ").trim()}var Gr={},ts=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Ed=/\n/g,Cd=/^\s*/,Td=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ad=/^:\s*/,Rd=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Id=/^[;\s]*/,Od=/^\s+|\s+$/g,Pd=`
`,ns="/",rs="*",it="",jd="comment",Ld="declaration";function Nd(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var g=p.match(Ed);g&&(n+=g.length);var b=p.lastIndexOf(Pd);r=~b?p.length-b:r+p.length}function s(){var p={line:n,column:r};return function(g){return g.position=new a(p),u(),g}}function a(p){this.start=p,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function o(p){var g=new Error(t.source+":"+n+":"+r+": "+p);if(g.reason=p,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function l(p){var g=p.exec(e);if(g){var b=g[0];return i(b),e=e.slice(b.length),g}}function u(){l(Cd)}function c(p){var g;for(p=p||[];g=h();)g!==!1&&p.push(g);return p}function h(){var p=s();if(!(ns!=e.charAt(0)||rs!=e.charAt(1))){for(var g=2;it!=e.charAt(g)&&(rs!=e.charAt(g)||ns!=e.charAt(g+1));)++g;if(g+=2,it===e.charAt(g-1))return o("End of comment missing");var b=e.slice(2,g-2);return r+=2,i(b),e=e.slice(g),r+=2,p({type:jd,comment:b})}}function f(){var p=s(),g=l(Td);if(g){if(h(),!l(Ad))return o("property missing ':'");var b=l(Rd),m=p({type:Ld,property:is(g[0].replace(ts,it)),value:b?is(b[0].replace(ts,it)):it});return l(Id),m}}function d(){var p=[];c(p);for(var g;g=f();)g!==!1&&(p.push(g),c(p));return p}return u(),d()}function is(e){return e?e.replace(Od,it):it}var Dd=Nd,$d=pn&&pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.default=Bd;const Ud=$d(Dd);function Bd(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,Ud.default)(e),i=typeof t=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:a,value:o}=s;i?t(a,o,s):o&&(n=n||{},n[a]=o)}),n}var On={};Object.defineProperty(On,"__esModule",{value:!0});On.camelCase=void 0;var Fd=/^--[a-zA-Z0-9_-]+$/,zd=/-([a-z])/g,Md=/^[^-]+$/,qd=/^-(webkit|moz|ms|o|khtml)-/,Vd=/^-(ms)-/,Wd=function(e){return!e||Md.test(e)||Fd.test(e)},Hd=function(e,t){return t.toUpperCase()},ss=function(e,t){return"".concat(t,"-")},Kd=function(e,t){return t===void 0&&(t={}),Wd(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Vd,ss):e=e.replace(qd,ss),e.replace(zd,Hd))};On.camelCase=Kd;var Jd=pn&&pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Gd=Jd(Gr),Yd=On;function Tr(e,t){var n={};return!e||typeof e!="string"||(0,Gd.default)(e,function(r,i){r&&i&&(n[(0,Yd.camelCase)(r,t)]=i)}),n}Tr.default=Tr;var Xd=Tr;const Qd=Dr(Xd),Ta=Aa("end"),Yr=Aa("start");function Aa(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Zd(e){const t=Yr(e),n=Ta(e);if(t&&n)return{start:t,end:n}}function Bt(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?as(e.position):"start"in e||"end"in e?as(e):"line"in e||"column"in e?Ar(e):""}function Ar(e){return os(e&&e.line)+":"+os(e&&e.column)}function as(e){return Ar(e&&e.start)+"-"+Ar(e&&e.end)}function os(e){return e&&typeof e=="number"?e:1}class he extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=Bt(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}he.prototype.file="";he.prototype.name="";he.prototype.reason="";he.prototype.message="";he.prototype.stack="";he.prototype.column=void 0;he.prototype.line=void 0;he.prototype.ancestors=void 0;he.prototype.cause=void 0;he.prototype.fatal=void 0;he.prototype.place=void 0;he.prototype.ruleId=void 0;he.prototype.source=void 0;const Xr={}.hasOwnProperty,ef=new Map,tf=/[A-Z]/g,nf=new Set(["table","tbody","thead","tfoot","tr"]),rf=new Set(["td","th"]),Ra="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sf(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=ff(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=df(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Jr:xd,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Ia(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Ia(e,t,n){if(t.type==="element")return af(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return of(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return uf(e,t,n);if(t.type==="mdxjsEsm")return lf(e,t);if(t.type==="root")return cf(e,t,n);if(t.type==="text")return hf(e,t)}function af(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Jr,e.schema=i),e.ancestors.push(t);const s=Pa(e,t.tagName,!1),a=pf(e,t);let o=Zr(e,t);return nf.has(t.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!fd(l):!0})),Oa(e,a,s,t),Qr(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function of(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Yt(e,t.position)}function lf(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Yt(e,t.position)}function uf(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Jr,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Pa(e,t.name,!0),a=gf(e,t),o=Zr(e,t);return Oa(e,a,s,t),Qr(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function cf(e,t,n){const r={};return Qr(r,Zr(e,t)),e.create(t,e.Fragment,r,n)}function hf(e,t){return t.value}function Oa(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Qr(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function df(e,t,n){return r;function r(i,s,a,o){const u=Array.isArray(a.children)?n:t;return o?u(s,a,o):u(s,a)}}function ff(e,t){return n;function n(r,i,s,a){const o=Array.isArray(s.children),l=Yr(r);return t(i,s,a,o,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function pf(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Xr.call(t.properties,i)){const s=mf(e,i,t.properties[i]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&rf.has(t.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function gf(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else Yt(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,s=e.evaluater.evaluateExpression(o.expression)}else Yt(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Zr(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:ef;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;a=l+"-"+u,i.set(l,u+1)}}const o=Ia(e,s,a);o!==void 0&&n.push(o)}return n}function mf(e,t,n){const r=vd(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?ld(n):Sd(n)),r.property==="style"){let i=typeof n=="object"?n:yf(e,String(n));return e.stylePropertyNameCase==="css"&&(i=wf(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?yd[r.property]||r.property:r.attribute,n]}}function yf(e,t){try{return Qd(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new he("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Ra+"#cannot-parse-style-attribute",i}}function Pa(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const o=Xi(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=Xi(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Xr.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Yt(e)}function Yt(e,t){const n=new he("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Ra+"#cannot-handle-mdx-estrees-without-createevaluater",n}function wf(e){const t={};let n;for(n in e)Xr.call(e,n)&&(t[bf(n)]=e[n]);return t}function bf(e){let t=e.replace(tf,vf);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function vf(e){return"-"+e.toLowerCase()}const Jn={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},_f={};function ei(e,t){const n=_f,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ja(e,r,i)}function ja(e,t,n){if(kf(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ls(e.children,t,n)}return Array.isArray(e)?ls(e,t,n):""}function ls(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ja(e[i],t,n);return r.join("")}function kf(e){return!!(e&&typeof e=="object")}const us=document.createElement("i");function ti(e){const t="&"+e+";";us.innerHTML=t;const n=us.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function _e(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function ke(e,t){return e.length>0?(_e(e,e.length,0,t),e):t}const cs={}.hasOwnProperty;function La(e){const t={};let n=-1;for(;++n<e.length;)xf(t,e[n]);return t}function xf(e,t){let n;for(n in t){const i=(cs.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){cs.call(i,a)||(i[a]=[]);const o=s[a];Sf(i[a],Array.isArray(o)?o:o?[o]:[])}}}function Sf(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);_e(e,0,0,r)}function Na(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ie(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const de=Je(/[A-Za-z]/),ce=Je(/[\dA-Za-z]/),Ef=Je(/[#-'*+\--9=?A-Z^-~]/);function bn(e){return e!==null&&(e<32||e===127)}const Rr=Je(/\d/),Cf=Je(/[\dA-Fa-f]/),Tf=Je(/[!-/:-@[-`{-~]/);function $(e){return e!==null&&e<-2}function Y(e){return e!==null&&(e<0||e===32)}function q(e){return e===-2||e===-1||e===32}const Pn=Je(new RegExp("\\p{P}|\\p{S}","u")),at=Je(/\s/);function Je(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function It(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&ce(e.charCodeAt(n+1))&&ce(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a=""}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function W(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return q(l)?(e.enter(n),o(l)):t(l)}function o(l){return q(l)&&s++<i?(e.consume(l),o):(e.exit(n),t(l))}}const Af={tokenize:Rf};function Rf(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),W(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return $(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const If={tokenize:Of},hs={tokenize:Pf};function Of(e){const t=this,n=[];let r=0,i,s,a;return o;function o(v){if(r<n.length){const A=n[r];return t.containerState=A[1],e.attempt(A[0].continuation,l,u)(v)}return u(v)}function l(v){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&x();const A=t.events.length;let O=A,k;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){k=t.events[O][1].end;break}m(r);let C=A;for(;C<t.events.length;)t.events[C][1].end={...k},C++;return _e(t.events,O+1,0,t.events.slice(A)),t.events.length=C,u(v)}return o(v)}function u(v){if(r===n.length){if(!i)return f(v);if(i.currentConstruct&&i.currentConstruct.concrete)return p(v);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(hs,c,h)(v)}function c(v){return i&&x(),m(r),f(v)}function h(v){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,p(v)}function f(v){return t.containerState={},e.attempt(hs,d,p)(v)}function d(v){return r++,n.push([t.currentConstruct,t.containerState]),f(v)}function p(v){if(v===null){i&&x(),m(0),e.consume(v);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(v)}function g(v){if(v===null){b(e.exit("chunkFlow"),!0),m(0),e.consume(v);return}return $(v)?(e.consume(v),b(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(v),g)}function b(v,A){const O=t.sliceStream(v);if(A&&O.push(null),v.previous=s,s&&(s.next=v),s=v,i.defineSkip(v.start),i.write(O),t.parser.lazy[v.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<a&&(!i.events[k][1].end||i.events[k][1].end.offset>a))return;const C=t.events.length;let D=C,U,S;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(U){S=t.events[D][1].end;break}U=!0}for(m(r),k=C;k<t.events.length;)t.events[k][1].end={...S},k++;_e(t.events,D+1,0,t.events.slice(C)),t.events.length=k}}function m(v){let A=n.length;for(;A-- >v;){const O=n[A];t.containerState=O[1],O[0].exit.call(t,e)}n.length=v}function x(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Pf(e,t,n){return W(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Et(e){if(e===null||Y(e)||at(e))return 1;if(Pn(e))return 2}function jn(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Ir={name:"attention",resolveAll:jf,tokenize:Lf};function jf(e,t){let n=-1,r,i,s,a,o,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};ds(h,-l),ds(f,l),a={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=ke(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=ke(u,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),u=ke(u,jn(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=ke(u,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=ke(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,_e(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Lf(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Et(r);let s;return a;function a(l){return s=l,e.enter("attentionSequence"),o(l)}function o(l){if(l===s)return e.consume(l),o;const u=e.exit("attentionSequence"),c=Et(l),h=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?h:h&&(i||!f)),u._close=!!(s===42?f:f&&(c||!h)),t(l)}}function ds(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Nf={name:"autolink",tokenize:Df};function Df(e,t,n){let r=0;return i;function i(d){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(d){return de(d)?(e.consume(d),a):d===64?n(d):u(d)}function a(d){return d===43||d===45||d===46||ce(d)?(r=1,o(d)):u(d)}function o(d){return d===58?(e.consume(d),r=0,l):(d===43||d===45||d===46||ce(d))&&r++<32?(e.consume(d),o):(r=0,u(d))}function l(d){return d===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):d===null||d===32||d===60||bn(d)?n(d):(e.consume(d),l)}function u(d){return d===64?(e.consume(d),c):Ef(d)?(e.consume(d),u):n(d)}function c(d){return ce(d)?h(d):n(d)}function h(d){return d===46?(e.consume(d),r=0,c):d===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):f(d)}function f(d){if((d===45||ce(d))&&r++<63){const p=d===45?f:h;return e.consume(d),p}return n(d)}}const en={partial:!0,tokenize:$f};function $f(e,t,n){return r;function r(s){return q(s)?W(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||$(s)?t(s):n(s)}}const Da={continuation:{tokenize:Bf},exit:Ff,name:"blockQuote",tokenize:Uf};function Uf(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return q(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function Bf(e,t,n){const r=this;return i;function i(a){return q(a)?W(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(Da,t,n)(a)}}function Ff(e){e.exit("blockQuote")}const $a={name:"characterEscape",tokenize:zf};function zf(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Tf(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Ua={name:"characterReference",tokenize:Mf};function Mf(e,t,n){const r=this;let i=0,s,a;return o;function o(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),l}function l(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,a=ce,c(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=Cf,c):(e.enter("characterReferenceValue"),s=7,a=Rr,c(h))}function c(h){if(h===59&&i){const f=e.exit("characterReferenceValue");return a===ce&&!ti(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&i++<s?(e.consume(h),c):n(h)}}const fs={partial:!0,tokenize:Vf},ps={concrete:!0,name:"codeFenced",tokenize:qf};function qf(e,t,n){const r=this,i={partial:!0,tokenize:O};let s=0,a=0,o;return l;function l(k){return u(k)}function u(k){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,o=k,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(k)}function c(k){return k===o?(a++,e.consume(k),c):a<3?n(k):(e.exit("codeFencedFenceSequence"),q(k)?W(e,h,"whitespace")(k):h(k))}function h(k){return k===null||$(k)?(e.exit("codeFencedFence"),r.interrupt?t(k):e.check(fs,g,A)(k)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(k))}function f(k){return k===null||$(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(k)):q(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),W(e,d,"whitespace")(k)):k===96&&k===o?n(k):(e.consume(k),f)}function d(k){return k===null||$(k)?h(k):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===null||$(k)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(k)):k===96&&k===o?n(k):(e.consume(k),p)}function g(k){return e.attempt(i,A,b)(k)}function b(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),m}function m(k){return s>0&&q(k)?W(e,x,"linePrefix",s+1)(k):x(k)}function x(k){return k===null||$(k)?e.check(fs,g,A)(k):(e.enter("codeFlowValue"),v(k))}function v(k){return k===null||$(k)?(e.exit("codeFlowValue"),x(k)):(e.consume(k),v)}function A(k){return e.exit("codeFenced"),t(k)}function O(k,C,D){let U=0;return S;function S(H){return k.enter("lineEnding"),k.consume(H),k.exit("lineEnding"),P}function P(H){return k.enter("codeFencedFence"),q(H)?W(k,N,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):N(H)}function N(H){return H===o?(k.enter("codeFencedFenceSequence"),K(H)):D(H)}function K(H){return H===o?(U++,k.consume(H),K):U>=a?(k.exit("codeFencedFenceSequence"),q(H)?W(k,J,"whitespace")(H):J(H)):D(H)}function J(H){return H===null||$(H)?(k.exit("codeFencedFence"),C(H)):D(H)}}}function Vf(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const Gn={name:"codeIndented",tokenize:Hf},Wf={partial:!0,tokenize:Kf};function Hf(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),W(e,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?l(u):$(u)?e.attempt(Wf,a,l)(u):(e.enter("codeFlowValue"),o(u))}function o(u){return u===null||$(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),o)}function l(u){return e.exit("codeIndented"),t(u)}}function Kf(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):$(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):W(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):$(a)?i(a):n(a)}}const Jf={name:"codeText",previous:Yf,resolve:Gf,tokenize:Xf};function Gf(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Yf(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Xf(e,t,n){let r=0,i,s;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),o(h)}function o(h){return h===96?(e.consume(h),r++,o):(e.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),l):h===96?(s=e.enter("codeTextSequence"),i=0,c(h)):$(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||$(h)?(e.exit("codeTextData"),l(h)):(e.consume(h),u)}function c(h){return h===96?(e.consume(h),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(s.type="codeTextData",u(h))}}class Qf{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Lt(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Lt(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Lt(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Lt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Lt(this.left,n.reverse())}}}function Lt(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Ba(e){const t={};let n=-1,r,i,s,a,o,l,u;const c=new Qf(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Zf(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=c.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},o=c.slice(i,n),o.unshift(r),c.splice(i,n-i+1,o))}}return _e(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function Zf(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],u={};let c,h,f=-1,d=n,p=0,g=0;const b=[g];for(;d;){for(;e.get(++i)[1]!==d;);s.push(i),d._tokenizer||(c=r.sliceStream(d),d.next||c.push(null),h&&a.defineSkip(d.start),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++f<o.length;)o[f][0]==="exit"&&o[f-1][0]==="enter"&&o[f][1].type===o[f-1][1].type&&o[f][1].start.line!==o[f][1].end.line&&(g=f+1,b.push(g),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(a.events=[],d?(d._tokenizer=void 0,d.previous=void 0):b.pop(),f=b.length;f--;){const m=o.slice(b[f],b[f+1]),x=s.pop();l.push([x,x+m.length-1]),e.splice(x,2,m)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const ep={resolve:np,tokenize:rp},tp={partial:!0,tokenize:ip};function np(e){return Ba(e),e}function rp(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):$(o)?e.check(tp,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ip(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),W(e,s,"linePrefix")}function s(a){if(a===null||$(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Fa(e,t,n,r,i,s,a,o,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(m){return m===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(m),e.exit(s),f):m===null||m===32||m===41||bn(m)?n(m):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),g(m))}function f(m){return m===62?(e.enter(s),e.consume(m),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===62?(e.exit("chunkString"),e.exit(o),f(m)):m===null||m===60||$(m)?n(m):(e.consume(m),m===92?p:d)}function p(m){return m===60||m===62||m===92?(e.consume(m),d):d(m)}function g(m){return!c&&(m===null||m===41||Y(m))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(m)):c<u&&m===40?(e.consume(m),c++,g):m===41?(e.consume(m),c--,g):m===null||m===32||m===40||bn(m)?n(m):(e.consume(m),m===92?b:g)}function b(m){return m===40||m===41||m===92?(e.consume(m),g):g(m)}}function za(e,t,n,r,i,s){const a=this;let o=0,l;return u;function u(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),e.enter(s),c}function c(d){return o>999||d===null||d===91||d===93&&!l||d===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):d===93?(e.exit(s),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):$(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||$(d)||o++>999?(e.exit("chunkString"),c(d)):(e.consume(d),l||(l=!q(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(e.consume(d),o++,h):h(d)}}function Ma(e,t,n,r,i,s){let a;return o;function o(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),a=f===40?41:f,l):n(f)}function l(f){return f===a?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===a?(e.exit(s),l(a)):f===null?n(f):$(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),W(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===a||f===null||$(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?h:c)}function h(f){return f===a||f===92?(e.consume(f),c):c(f)}}function Ft(e,t){let n;return r;function r(i){return $(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):q(i)?W(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const sp={name:"definition",tokenize:op},ap={partial:!0,tokenize:lp};function op(e,t,n){const r=this;let i;return s;function s(d){return e.enter("definition"),a(d)}function a(d){return za.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function o(d){return i=Ie(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(e.enter("definitionMarker"),e.consume(d),e.exit("definitionMarker"),l):n(d)}function l(d){return Y(d)?Ft(e,u)(d):u(d)}function u(d){return Fa(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function c(d){return e.attempt(ap,h,h)(d)}function h(d){return q(d)?W(e,f,"whitespace")(d):f(d)}function f(d){return d===null||$(d)?(e.exit("definition"),r.parser.defined.push(i),t(d)):n(d)}}function lp(e,t,n){return r;function r(o){return Y(o)?Ft(e,i)(o):n(o)}function i(o){return Ma(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return q(o)?W(e,a,"whitespace")(o):a(o)}function a(o){return o===null||$(o)?t(o):n(o)}}const up={name:"hardBreakEscape",tokenize:cp};function cp(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return $(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const hp={name:"headingAtx",resolve:dp,tokenize:fp};function dp(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},_e(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function fp(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&r++<6?(e.consume(c),a):c===null||Y(c)?(e.exit("atxHeadingSequence"),o(c)):n(c)}function o(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||$(c)?(e.exit("atxHeading"),t(c)):q(c)?W(e,o,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),o(c))}function u(c){return c===null||c===35||Y(c)?(e.exit("atxHeadingText"),o(c)):(e.consume(c),u)}}const pp=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],gs=["pre","script","style","textarea"],gp={concrete:!0,name:"htmlFlow",resolveTo:wp,tokenize:bp},mp={partial:!0,tokenize:_p},yp={partial:!0,tokenize:vp};function wp(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function bp(e,t,n){const r=this;let i,s,a,o,l;return u;function u(w){return c(w)}function c(w){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(w),h}function h(w){return w===33?(e.consume(w),f):w===47?(e.consume(w),s=!0,g):w===63?(e.consume(w),i=3,r.interrupt?t:y):de(w)?(e.consume(w),a=String.fromCharCode(w),b):n(w)}function f(w){return w===45?(e.consume(w),i=2,d):w===91?(e.consume(w),i=5,o=0,p):de(w)?(e.consume(w),i=4,r.interrupt?t:y):n(w)}function d(w){return w===45?(e.consume(w),r.interrupt?t:y):n(w)}function p(w){const Ee="CDATA[";return w===Ee.charCodeAt(o++)?(e.consume(w),o===Ee.length?r.interrupt?t:N:p):n(w)}function g(w){return de(w)?(e.consume(w),a=String.fromCharCode(w),b):n(w)}function b(w){if(w===null||w===47||w===62||Y(w)){const Ee=w===47,Ge=a.toLowerCase();return!Ee&&!s&&gs.includes(Ge)?(i=1,r.interrupt?t(w):N(w)):pp.includes(a.toLowerCase())?(i=6,Ee?(e.consume(w),m):r.interrupt?t(w):N(w)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(w):s?x(w):v(w))}return w===45||ce(w)?(e.consume(w),a+=String.fromCharCode(w),b):n(w)}function m(w){return w===62?(e.consume(w),r.interrupt?t:N):n(w)}function x(w){return q(w)?(e.consume(w),x):S(w)}function v(w){return w===47?(e.consume(w),S):w===58||w===95||de(w)?(e.consume(w),A):q(w)?(e.consume(w),v):S(w)}function A(w){return w===45||w===46||w===58||w===95||ce(w)?(e.consume(w),A):O(w)}function O(w){return w===61?(e.consume(w),k):q(w)?(e.consume(w),O):v(w)}function k(w){return w===null||w===60||w===61||w===62||w===96?n(w):w===34||w===39?(e.consume(w),l=w,C):q(w)?(e.consume(w),k):D(w)}function C(w){return w===l?(e.consume(w),l=null,U):w===null||$(w)?n(w):(e.consume(w),C)}function D(w){return w===null||w===34||w===39||w===47||w===60||w===61||w===62||w===96||Y(w)?O(w):(e.consume(w),D)}function U(w){return w===47||w===62||q(w)?v(w):n(w)}function S(w){return w===62?(e.consume(w),P):n(w)}function P(w){return w===null||$(w)?N(w):q(w)?(e.consume(w),P):n(w)}function N(w){return w===45&&i===2?(e.consume(w),ue):w===60&&i===1?(e.consume(w),se):w===62&&i===4?(e.consume(w),Se):w===63&&i===3?(e.consume(w),y):w===93&&i===5?(e.consume(w),je):$(w)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(mp,Le,K)(w)):w===null||$(w)?(e.exit("htmlFlowData"),K(w)):(e.consume(w),N)}function K(w){return e.check(yp,J,Le)(w)}function J(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),H}function H(w){return w===null||$(w)?K(w):(e.enter("htmlFlowData"),N(w))}function ue(w){return w===45?(e.consume(w),y):N(w)}function se(w){return w===47?(e.consume(w),a="",xe):N(w)}function xe(w){if(w===62){const Ee=a.toLowerCase();return gs.includes(Ee)?(e.consume(w),Se):N(w)}return de(w)&&a.length<8?(e.consume(w),a+=String.fromCharCode(w),xe):N(w)}function je(w){return w===93?(e.consume(w),y):N(w)}function y(w){return w===62?(e.consume(w),Se):w===45&&i===2?(e.consume(w),y):N(w)}function Se(w){return w===null||$(w)?(e.exit("htmlFlowData"),Le(w)):(e.consume(w),Se)}function Le(w){return e.exit("htmlFlow"),t(w)}}function vp(e,t,n){const r=this;return i;function i(a){return $(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function _p(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(en,t,n)}}const kp={name:"htmlText",tokenize:xp};function xp(e,t,n){const r=this;let i,s,a;return o;function o(y){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(y),l}function l(y){return y===33?(e.consume(y),u):y===47?(e.consume(y),O):y===63?(e.consume(y),v):de(y)?(e.consume(y),D):n(y)}function u(y){return y===45?(e.consume(y),c):y===91?(e.consume(y),s=0,p):de(y)?(e.consume(y),x):n(y)}function c(y){return y===45?(e.consume(y),d):n(y)}function h(y){return y===null?n(y):y===45?(e.consume(y),f):$(y)?(a=h,se(y)):(e.consume(y),h)}function f(y){return y===45?(e.consume(y),d):h(y)}function d(y){return y===62?ue(y):y===45?f(y):h(y)}function p(y){const Se="CDATA[";return y===Se.charCodeAt(s++)?(e.consume(y),s===Se.length?g:p):n(y)}function g(y){return y===null?n(y):y===93?(e.consume(y),b):$(y)?(a=g,se(y)):(e.consume(y),g)}function b(y){return y===93?(e.consume(y),m):g(y)}function m(y){return y===62?ue(y):y===93?(e.consume(y),m):g(y)}function x(y){return y===null||y===62?ue(y):$(y)?(a=x,se(y)):(e.consume(y),x)}function v(y){return y===null?n(y):y===63?(e.consume(y),A):$(y)?(a=v,se(y)):(e.consume(y),v)}function A(y){return y===62?ue(y):v(y)}function O(y){return de(y)?(e.consume(y),k):n(y)}function k(y){return y===45||ce(y)?(e.consume(y),k):C(y)}function C(y){return $(y)?(a=C,se(y)):q(y)?(e.consume(y),C):ue(y)}function D(y){return y===45||ce(y)?(e.consume(y),D):y===47||y===62||Y(y)?U(y):n(y)}function U(y){return y===47?(e.consume(y),ue):y===58||y===95||de(y)?(e.consume(y),S):$(y)?(a=U,se(y)):q(y)?(e.consume(y),U):ue(y)}function S(y){return y===45||y===46||y===58||y===95||ce(y)?(e.consume(y),S):P(y)}function P(y){return y===61?(e.consume(y),N):$(y)?(a=P,se(y)):q(y)?(e.consume(y),P):U(y)}function N(y){return y===null||y===60||y===61||y===62||y===96?n(y):y===34||y===39?(e.consume(y),i=y,K):$(y)?(a=N,se(y)):q(y)?(e.consume(y),N):(e.consume(y),J)}function K(y){return y===i?(e.consume(y),i=void 0,H):y===null?n(y):$(y)?(a=K,se(y)):(e.consume(y),K)}function J(y){return y===null||y===34||y===39||y===60||y===61||y===96?n(y):y===47||y===62||Y(y)?U(y):(e.consume(y),J)}function H(y){return y===47||y===62||Y(y)?U(y):n(y)}function ue(y){return y===62?(e.consume(y),e.exit("htmlTextData"),e.exit("htmlText"),t):n(y)}function se(y){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),xe}function xe(y){return q(y)?W(e,je,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(y):je(y)}function je(y){return e.enter("htmlTextData"),a(y)}}const ni={name:"labelEnd",resolveAll:Tp,resolveTo:Ap,tokenize:Rp},Sp={tokenize:Ip},Ep={tokenize:Op},Cp={tokenize:Pp};function Tp(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&_e(e,0,e.length,n),e}function Ap(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},c={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",l,t],["enter",u,t]],o=ke(o,e.slice(s+1,s+r+3)),o=ke(o,[["enter",c,t]]),o=ke(o,jn(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=ke(o,[["exit",c,t],e[a-2],e[a-1],["exit",u,t]]),o=ke(o,e.slice(a+1)),o=ke(o,[["exit",l,t]]),_e(e,s,e.length,o),e}function Rp(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(f){return s?s._inactive?h(f):(a=r.parser.defined.includes(Ie(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):n(f)}function l(f){return f===40?e.attempt(Sp,c,a?c:h)(f):f===91?e.attempt(Ep,c,a?u:h)(f):a?c(f):h(f)}function u(f){return e.attempt(Cp,c,h)(f)}function c(f){return t(f)}function h(f){return s._balanced=!0,n(f)}}function Ip(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return Y(h)?Ft(e,s)(h):s(h)}function s(h){return h===41?c(h):Fa(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return Y(h)?Ft(e,l)(h):c(h)}function o(h){return n(h)}function l(h){return h===34||h===39||h===40?Ma(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return Y(h)?Ft(e,c)(h):c(h)}function c(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function Op(e,t,n){const r=this;return i;function i(o){return za.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Ie(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function Pp(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const jp={name:"labelStartImage",resolveAll:ni.resolveAll,tokenize:Lp};function Lp(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Np={name:"labelStartLink",resolveAll:ni.resolveAll,tokenize:Dp};function Dp(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Yn={name:"lineEnding",tokenize:$p};function $p(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),W(e,t,"linePrefix")}}const dn={name:"thematicBreak",tokenize:Up};function Up(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),a(u)}function a(u){return i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||$(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),q(u)?W(e,o,"whitespace")(u):o(u))}}const pe={continuation:{tokenize:Mp},exit:Vp,name:"list",tokenize:zp},Bp={partial:!0,tokenize:Wp},Fp={partial:!0,tokenize:qp};function zp(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(d){const p=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:Rr(d)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),d===42||d===45?e.check(dn,n,u)(d):u(d);if(!r.interrupt||d===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(d)}return n(d)}function l(d){return Rr(d)&&++a<10?(e.consume(d),l):(!r.interrupt||a<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(e.exit("listItemValue"),u(d)):n(d)}function u(d){return e.enter("listItemMarker"),e.consume(d),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,e.check(en,r.interrupt?n:c,e.attempt(Bp,f,h))}function c(d){return r.containerState.initialBlankLine=!0,s++,f(d)}function h(d){return q(d)?(e.enter("listItemPrefixWhitespace"),e.consume(d),e.exit("listItemPrefixWhitespace"),f):n(d)}function f(d){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(d)}}function Mp(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(en,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,W(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!q(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Fp,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,W(e,e.attempt(pe,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function qp(e,t,n){const r=this;return W(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function Vp(e){e.exit(this.containerState.type)}function Wp(e,t,n){const r=this;return W(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!q(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ms={name:"setextUnderline",resolveTo:Hp,tokenize:Kp};function Hp(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function Kp(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(e.consume(u),o):(e.exit("setextHeadingLineSequence"),q(u)?W(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||$(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Jp={tokenize:Gp};function Gp(e){const t=this,n=e.attempt(en,r,e.attempt(this.parser.constructs.flowInitial,i,W(e,e.attempt(this.parser.constructs.flow,i,e.attempt(ep,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Yp={resolveAll:Va()},Xp=qa("string"),Qp=qa("text");function qa(e){return{resolveAll:Va(e==="text"?Zp:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(c){return u(c)?s(c):o(c)}function o(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function Va(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Zp(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)l=!0,o++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const u={type:n===e.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const eg={42:pe,43:pe,45:pe,48:pe,49:pe,50:pe,51:pe,52:pe,53:pe,54:pe,55:pe,56:pe,57:pe,62:Da},tg={91:sp},ng={[-2]:Gn,[-1]:Gn,32:Gn},rg={35:hp,42:dn,45:[ms,dn],60:gp,61:ms,95:dn,96:ps,126:ps},ig={38:Ua,92:$a},sg={[-5]:Yn,[-4]:Yn,[-3]:Yn,33:jp,38:Ua,42:Ir,60:[Nf,kp],91:Np,92:[up,$a],93:ni,95:Ir,96:Jf},ag={null:[Ir,Yp]},og={null:[42,95]},lg={null:[]},ug=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:og,contentInitial:tg,disable:lg,document:eg,flow:rg,flowInitial:ng,insideSpan:ag,string:ig,text:sg},Symbol.toStringTag,{value:"Module"}));function cg(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const l={attempt:C(O),check:C(k),consume:x,enter:v,exit:A,interrupt:C(k,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:e,previous:null,sliceSerialize:f,sliceStream:d,write:h};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function h(P){return a=ke(a,P),b(),a[a.length-1]!==null?[]:(D(t,0),u.events=jn(s,u.events,u),u.events)}function f(P,N){return dg(d(P),N)}function d(P){return hg(a,P)}function p(){const{_bufferIndex:P,_index:N,line:K,column:J,offset:H}=r;return{_bufferIndex:P,_index:N,line:K,column:J,offset:H}}function g(P){i[P.line]=P.column,S()}function b(){let P;for(;r._index<a.length;){const N=a[r._index];if(typeof N=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<N.length;)m(N.charCodeAt(r._bufferIndex));else m(N)}}function m(P){c=c(P)}function x(P){$(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,S()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function v(P,N){const K=N||{};return K.type=P,K.start=p(),u.events.push(["enter",K,u]),o.push(K),K}function A(P){const N=o.pop();return N.end=p(),u.events.push(["exit",N,u]),N}function O(P,N){D(P,N.from)}function k(P,N){N.restore()}function C(P,N){return K;function K(J,H,ue){let se,xe,je,y;return Array.isArray(J)?Le(J):"tokenize"in J?Le([J]):Se(J);function Se(ae){return Ot;function Ot(ze){const lt=ze!==null&&ae[ze],ut=ze!==null&&ae.null,nn=[...Array.isArray(lt)?lt:lt?[lt]:[],...Array.isArray(ut)?ut:ut?[ut]:[]];return Le(nn)(ze)}}function Le(ae){return se=ae,xe=0,ae.length===0?ue:w(ae[xe])}function w(ae){return Ot;function Ot(ze){return y=U(),je=ae,ae.partial||(u.currentConstruct=ae),ae.name&&u.parser.constructs.disable.null.includes(ae.name)?Ge():ae.tokenize.call(N?Object.assign(Object.create(u),N):u,l,Ee,Ge)(ze)}}function Ee(ae){return P(je,y),H}function Ge(ae){return y.restore(),++xe<se.length?w(se[xe]):ue}}}function D(P,N){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&_e(u.events,N,u.events.length-N,P.resolve(u.events.slice(N),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function U(){const P=p(),N=u.previous,K=u.currentConstruct,J=u.events.length,H=Array.from(o);return{from:J,restore:ue};function ue(){r=P,u.previous=N,u.currentConstruct=K,u.events.length=J,o=H,S()}}function S(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function hg(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function dg(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function fg(e){const r={constructs:La([ug,...(e||{}).extensions||[]]),content:i(Af),defined:[],document:i(If),flow:i(Jp),lazy:{},string:i(Xp),text:i(Qp)};return r;function i(s){return a;function a(o){return cg(r,s,o)}}}function pg(e){for(;!Ba(e););return e}const ys=/[\0\t\n\r]/g;function gg(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const l=[];let u,c,h,f,d;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),h=0,t="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(ys.lastIndex=h,u=ys.exec(s),f=u&&u.index!==void 0?u.index:s.length,d=s.charCodeAt(f),!u){t=s.slice(h);break}if(d===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),e+=f-h),d){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return o&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const mg=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function yg(e){return e.replace(mg,wg)}function wg(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Na(n.slice(s?2:1),s?16:10)}return ti(n)||e}const Wa={}.hasOwnProperty;function bg(e,t,n){return typeof t!="string"&&(n=t,t=void 0),vg(n)(pg(fg(n).document().write(gg()(e,t,!0))))}function vg(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(gi),autolinkProtocol:U,autolinkEmail:U,atxHeading:s(di),blockQuote:s(ut),characterEscape:U,characterReference:U,codeFenced:s(nn),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(nn,a),codeText:s(jo,a),codeTextData:U,data:U,codeFlowValue:U,definition:s(Lo),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(No),hardBreakEscape:s(fi),hardBreakTrailing:s(fi),htmlFlow:s(pi,a),htmlFlowData:U,htmlText:s(pi,a),htmlTextData:U,image:s(Do),label:a,link:s(gi),listItem:s($o),listItemValue:f,listOrdered:s(mi,h),listUnordered:s(mi),paragraph:s(Uo),reference:w,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(di),strong:s(Bo),thematicBreak:s(zo)},exit:{atxHeading:l(),atxHeadingSequence:O,autolink:l(),autolinkEmail:lt,autolinkProtocol:ze,blockQuote:l(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:Ge,characterReferenceMarkerNumeric:Ge,characterReferenceValue:ae,characterReference:Ot,codeFenced:l(b),codeFencedFence:g,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:S,codeIndented:l(m),codeText:l(H),codeTextData:S,data:S,definition:l(),definitionDestinationString:A,definitionLabelString:x,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(N),hardBreakTrailing:l(N),htmlFlow:l(K),htmlFlowData:S,htmlText:l(J),htmlTextData:S,image:l(se),label:je,labelText:xe,lineEnding:P,link:l(ue),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Ee,resourceDestinationString:y,resourceTitleString:Se,resource:Le,setextHeading:l(D),setextHeadingLineSequence:C,setextHeadingText:k,strong:l(),thematicBreak:l()}};Ha(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(E){let I={type:"root",children:[]};const z={stack:[I],tokenStack:[],config:t,enter:o,exit:u,buffer:a,resume:c,data:n},V=[];let G=-1;for(;++G<E.length;)if(E[G][1].type==="listOrdered"||E[G][1].type==="listUnordered")if(E[G][0]==="enter")V.push(G);else{const Ce=V.pop();G=i(E,Ce,G)}for(G=-1;++G<E.length;){const Ce=t[E[G][0]];Wa.call(Ce,E[G][1].type)&&Ce[E[G][1].type].call(Object.assign({sliceSerialize:E[G][2].sliceSerialize},z),E[G][1])}if(z.tokenStack.length>0){const Ce=z.tokenStack[z.tokenStack.length-1];(Ce[1]||ws).call(z,void 0,Ce[0])}for(I.position={start:Me(E.length>0?E[0][1].start:{line:1,column:1,offset:0}),end:Me(E.length>0?E[E.length-2][1].end:{line:1,column:1,offset:0})},G=-1;++G<t.transforms.length;)I=t.transforms[G](I)||I;return I}function i(E,I,z){let V=I-1,G=-1,Ce=!1,Ye,Ne,Pt,jt;for(;++V<=z;){const me=E[V];switch(me[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{me[0]==="enter"?G++:G--,jt=void 0;break}case"lineEndingBlank":{me[0]==="enter"&&(Ye&&!jt&&!G&&!Pt&&(Pt=V),jt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:jt=void 0}if(!G&&me[0]==="enter"&&me[1].type==="listItemPrefix"||G===-1&&me[0]==="exit"&&(me[1].type==="listUnordered"||me[1].type==="listOrdered")){if(Ye){let ct=V;for(Ne=void 0;ct--;){const De=E[ct];if(De[1].type==="lineEnding"||De[1].type==="lineEndingBlank"){if(De[0]==="exit")continue;Ne&&(E[Ne][1].type="lineEndingBlank",Ce=!0),De[1].type="lineEnding",Ne=ct}else if(!(De[1].type==="linePrefix"||De[1].type==="blockQuotePrefix"||De[1].type==="blockQuotePrefixWhitespace"||De[1].type==="blockQuoteMarker"||De[1].type==="listItemIndent"))break}Pt&&(!Ne||Pt<Ne)&&(Ye._spread=!0),Ye.end=Object.assign({},Ne?E[Ne][1].start:me[1].end),E.splice(Ne||V,0,["exit",Ye,me[2]]),V++,z++}if(me[1].type==="listItemPrefix"){const ct={type:"listItem",_spread:!1,start:Object.assign({},me[1].start),end:void 0};Ye=ct,E.splice(V,0,["enter",ct,me[2]]),V++,z++,Pt=void 0,jt=!0}}}return E[I][1]._spread=Ce,z}function s(E,I){return z;function z(V){o.call(this,E(V),V),I&&I.call(this,V)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(E,I,z){this.stack[this.stack.length-1].children.push(E),this.stack.push(E),this.tokenStack.push([I,z||void 0]),E.position={start:Me(I.start),end:void 0}}function l(E){return I;function I(z){E&&E.call(this,z),u.call(this,z)}}function u(E,I){const z=this.stack.pop(),V=this.tokenStack.pop();if(V)V[0].type!==E.type&&(I?I.call(this,E,V[0]):(V[1]||ws).call(this,E,V[0]));else throw new Error("Cannot close `"+E.type+"` ("+Bt({start:E.start,end:E.end})+"): its not open");z.position.end=Me(E.end)}function c(){return ei(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(E){if(this.data.expectingFirstListItemValue){const I=this.stack[this.stack.length-2];I.start=Number.parseInt(this.sliceSerialize(E),10),this.data.expectingFirstListItemValue=void 0}}function d(){const E=this.resume(),I=this.stack[this.stack.length-1];I.lang=E}function p(){const E=this.resume(),I=this.stack[this.stack.length-1];I.meta=E}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const E=this.resume(),I=this.stack[this.stack.length-1];I.value=E.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){const E=this.resume(),I=this.stack[this.stack.length-1];I.value=E.replace(/(\r?\n|\r)$/g,"")}function x(E){const I=this.resume(),z=this.stack[this.stack.length-1];z.label=I,z.identifier=Ie(this.sliceSerialize(E)).toLowerCase()}function v(){const E=this.resume(),I=this.stack[this.stack.length-1];I.title=E}function A(){const E=this.resume(),I=this.stack[this.stack.length-1];I.url=E}function O(E){const I=this.stack[this.stack.length-1];if(!I.depth){const z=this.sliceSerialize(E).length;I.depth=z}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function C(E){const I=this.stack[this.stack.length-1];I.depth=this.sliceSerialize(E).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function U(E){const z=this.stack[this.stack.length-1].children;let V=z[z.length-1];(!V||V.type!=="text")&&(V=Fo(),V.position={start:Me(E.start),end:void 0},z.push(V)),this.stack.push(V)}function S(E){const I=this.stack.pop();I.value+=this.sliceSerialize(E),I.position.end=Me(E.end)}function P(E){const I=this.stack[this.stack.length-1];if(this.data.atHardBreak){const z=I.children[I.children.length-1];z.position.end=Me(E.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(I.type)&&(U.call(this,E),S.call(this,E))}function N(){this.data.atHardBreak=!0}function K(){const E=this.resume(),I=this.stack[this.stack.length-1];I.value=E}function J(){const E=this.resume(),I=this.stack[this.stack.length-1];I.value=E}function H(){const E=this.resume(),I=this.stack[this.stack.length-1];I.value=E}function ue(){const E=this.stack[this.stack.length-1];if(this.data.inReference){const I=this.data.referenceType||"shortcut";E.type+="Reference",E.referenceType=I,delete E.url,delete E.title}else delete E.identifier,delete E.label;this.data.referenceType=void 0}function se(){const E=this.stack[this.stack.length-1];if(this.data.inReference){const I=this.data.referenceType||"shortcut";E.type+="Reference",E.referenceType=I,delete E.url,delete E.title}else delete E.identifier,delete E.label;this.data.referenceType=void 0}function xe(E){const I=this.sliceSerialize(E),z=this.stack[this.stack.length-2];z.label=yg(I),z.identifier=Ie(I).toLowerCase()}function je(){const E=this.stack[this.stack.length-1],I=this.resume(),z=this.stack[this.stack.length-1];if(this.data.inReference=!0,z.type==="link"){const V=E.children;z.children=V}else z.alt=I}function y(){const E=this.resume(),I=this.stack[this.stack.length-1];I.url=E}function Se(){const E=this.resume(),I=this.stack[this.stack.length-1];I.title=E}function Le(){this.data.inReference=void 0}function w(){this.data.referenceType="collapsed"}function Ee(E){const I=this.resume(),z=this.stack[this.stack.length-1];z.label=I,z.identifier=Ie(this.sliceSerialize(E)).toLowerCase(),this.data.referenceType="full"}function Ge(E){this.data.characterReferenceType=E.type}function ae(E){const I=this.sliceSerialize(E),z=this.data.characterReferenceType;let V;z?(V=Na(I,z==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):V=ti(I);const G=this.stack[this.stack.length-1];G.value+=V}function Ot(E){const I=this.stack.pop();I.position.end=Me(E.end)}function ze(E){S.call(this,E);const I=this.stack[this.stack.length-1];I.url=this.sliceSerialize(E)}function lt(E){S.call(this,E);const I=this.stack[this.stack.length-1];I.url="mailto:"+this.sliceSerialize(E)}function ut(){return{type:"blockquote",children:[]}}function nn(){return{type:"code",lang:null,meta:null,value:""}}function jo(){return{type:"inlineCode",value:""}}function Lo(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function No(){return{type:"emphasis",children:[]}}function di(){return{type:"heading",depth:0,children:[]}}function fi(){return{type:"break"}}function pi(){return{type:"html",value:""}}function Do(){return{type:"image",title:null,url:"",alt:null}}function gi(){return{type:"link",title:null,url:"",children:[]}}function mi(E){return{type:"list",ordered:E.type==="listOrdered",start:null,spread:E._spread,children:[]}}function $o(E){return{type:"listItem",spread:E._spread,checked:null,children:[]}}function Uo(){return{type:"paragraph",children:[]}}function Bo(){return{type:"strong",children:[]}}function Fo(){return{type:"text",value:""}}function zo(){return{type:"thematicBreak"}}}function Me(e){return{line:e.line,column:e.column,offset:e.offset}}function Ha(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Ha(e,r):_g(e,r)}}function _g(e,t){let n;for(n in t)if(Wa.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function ws(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Bt({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Bt({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Bt({start:t.start,end:t.end})+") is still open")}function kg(e){const t=this;t.parser=n;function n(r){return bg(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function xg(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Sg(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Eg(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function Cg(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Tg(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ag(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=It(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Rg(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ig(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Ka(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function Og(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Ka(e,t);const i={src:It(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Pg(e,t){const n={src:It(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function jg(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Lg(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Ka(e,t);const i={href:It(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Ng(e,t){const n={href:It(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Dg(e,t,n){const r=e.all(t),i=n?$g(n):Ja(t),s={},a=[];if(typeof t.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const c=r[o];(i||o!==0||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?a.push(...c.children):a.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,u),e.applyData(t,u)}function $g(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Ja(n[r])}return t}function Ja(e){const t=e.spread;return t??e.children.length>1}function Ug(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Bg(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Fg(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function zg(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Mg(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=Yr(t.children[1]),l=Ta(t.children[t.children.length-1]);o&&l&&(a.position={start:o,end:l}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function qg(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let l=-1;const u=[];for(;++l<o;){const h=t.children[l],f={},d=a?a[l]:void 0;d&&(f.align=d);let p={type:"element",tagName:s,properties:f,children:[]};h&&(p.children=e.all(h),e.patch(h,p),p=e.applyData(h,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function Vg(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const bs=9,vs=32;function Wg(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(_s(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(_s(t.slice(i),i>0,!1)),s.join("")}function _s(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===bs||s===vs;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===bs||s===vs;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Hg(e,t){const n={type:"text",value:Wg(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Kg(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Jg={blockquote:xg,break:Sg,code:Eg,delete:Cg,emphasis:Tg,footnoteReference:Ag,heading:Rg,html:Ig,imageReference:Og,image:Pg,inlineCode:jg,linkReference:Lg,link:Ng,listItem:Dg,list:Ug,paragraph:Bg,root:Fg,strong:zg,table:Mg,tableCell:Vg,tableRow:qg,text:Hg,thematicBreak:Kg,toml:ln,yaml:ln,definition:ln,footnoteDefinition:ln};function ln(){}const Ga=-1,Ln=0,zt=1,vn=2,ri=3,ii=4,si=5,ai=6,Ya=7,Xa=8,ks=typeof self=="object"?self:globalThis,Gg=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case Ln:case Ga:return n(a,i);case zt:{const o=n([],i);for(const l of a)o.push(r(l));return o}case vn:{const o=n({},i);for(const[l,u]of a)o[r(l)]=r(u);return o}case ri:return n(new Date(a),i);case ii:{const{source:o,flags:l}=a;return n(new RegExp(o,l),i)}case si:{const o=n(new Map,i);for(const[l,u]of a)o.set(r(l),r(u));return o}case ai:{const o=n(new Set,i);for(const l of a)o.add(r(l));return o}case Ya:{const{name:o,message:l}=a;return n(new ks[o](l),i)}case Xa:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new ks[s](a),i)};return r},xs=e=>Gg(new Map,e)(0),yt="",{toString:Yg}={},{keys:Xg}=Object,Nt=e=>{const t=typeof e;if(t!=="object"||!e)return[Ln,t];const n=Yg.call(e).slice(8,-1);switch(n){case"Array":return[zt,yt];case"Object":return[vn,yt];case"Date":return[ri,yt];case"RegExp":return[ii,yt];case"Map":return[si,yt];case"Set":return[ai,yt];case"DataView":return[zt,n]}return n.includes("Array")?[zt,n]:n.includes("Error")?[Ya,n]:[vn,n]},un=([e,t])=>e===Ln&&(t==="function"||t==="symbol"),Qg=(e,t,n,r)=>{const i=(a,o)=>{const l=r.push(a)-1;return n.set(o,l),l},s=a=>{if(n.has(a))return n.get(a);let[o,l]=Nt(a);switch(o){case Ln:{let c=a;switch(l){case"bigint":o=Xa,c=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([Ga],a)}return i([o,c],a)}case zt:{if(l){let f=a;return l==="DataView"?f=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(a)),i([l,[...f]],a)}const c=[],h=i([o,c],a);for(const f of a)c.push(s(f));return h}case vn:{if(l)switch(l){case"BigInt":return i([l,a.toString()],a);case"Boolean":case"Number":case"String":return i([l,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const c=[],h=i([o,c],a);for(const f of Xg(a))(e||!un(Nt(a[f])))&&c.push([s(f),s(a[f])]);return h}case ri:return i([o,a.toISOString()],a);case ii:{const{source:c,flags:h}=a;return i([o,{source:c,flags:h}],a)}case si:{const c=[],h=i([o,c],a);for(const[f,d]of a)(e||!(un(Nt(f))||un(Nt(d))))&&c.push([s(f),s(d)]);return h}case ai:{const c=[],h=i([o,c],a);for(const f of a)(e||!un(Nt(f)))&&c.push(s(f));return h}}const{message:u}=a;return i([o,{name:l,message:u}],a)};return s},Ss=(e,{json:t,lossy:n}={})=>{const r=[];return Qg(!(t||n),!!t,new Map,r)(e),r},_n=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?xs(Ss(e,t)):structuredClone(e):(e,t)=>xs(Ss(e,t));function Zg(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function em(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function tm(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Zg,r=e.options.footnoteBackLabel||em,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),h=String(u.identifier).toUpperCase(),f=It(h.toLowerCase());let d=0;const p=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++d<=g;){p.length>0&&p.push({type:"text",value:" "});let x=typeof n=="string"?n:n(l,d);typeof x=="string"&&(x={type:"text",value:x}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const b=c[c.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const x=b.children[b.children.length-1];x&&x.type==="text"?x.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...p)}else c.push(...p);const m={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(u,m),o.push(m)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{..._n(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const Nn=function(e){if(e==null)return sm;if(typeof e=="function")return Dn(e);if(typeof e=="object")return Array.isArray(e)?nm(e):rm(e);if(typeof e=="string")return im(e);throw new Error("Expected function, string, or object as test")};function nm(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Nn(e[n]);return Dn(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function rm(e){const t=e;return Dn(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function im(e){return Dn(t);function t(n){return n&&n.type===e}}function Dn(e){return t;function t(n,r,i){return!!(am(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function sm(){return!0}function am(e){return e!==null&&typeof e=="object"&&"type"in e}const Qa=[],om=!0,Or=!1,lm="skip";function Za(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Nn(i),a=r?-1:1;o(e,void 0,[])();function o(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=Qa,p,g,b;if((!t||s(l,u,c[c.length-1]||void 0))&&(d=um(n(l,c)),d[0]===Or))return d;if("children"in l&&l.children){const m=l;if(m.children&&d[0]!==lm)for(g=(r?m.children.length:-1)+a,b=c.concat(m);g>-1&&g<m.children.length;){const x=m.children[g];if(p=o(x,g,b)(),p[0]===Or)return p;g=typeof p[1]=="number"?p[1]:g+a}}return d}}}function um(e){return Array.isArray(e)?e:typeof e=="number"?[om,e]:e==null?Qa:[e]}function oi(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),Za(e,s,o,i);function o(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return a(l,h,c)}}const Pr={}.hasOwnProperty,cm={};function hm(e,t){const n=t||cm,r=new Map,i=new Map,s=new Map,a={...Jg,...n.handlers},o={all:u,applyData:fm,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:l,options:n,patch:dm,wrap:gm};return oi(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();h.has(f)||h.set(f,c)}}),o;function l(c,h){const f=c.type,d=o.handlers[f];if(Pr.call(o.handlers,f)&&d)return d(o,c,h);if(o.options.passThrough&&o.options.passThrough.includes(f)){if("children"in c){const{children:g,...b}=c,m=_n(b);return m.children=o.all(c),m}return _n(c)}return(o.options.unknownHandler||pm)(o,c,h)}function u(c){const h=[];if("children"in c){const f=c.children;let d=-1;for(;++d<f.length;){const p=o.one(f[d],c);if(p){if(d&&f[d-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Es(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=Es(g.value))}Array.isArray(p)?h.push(...p):h.push(p)}}}return h}}function dm(e,t){e.position&&(t.position=Zd(e))}function fm(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,_n(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function pm(e,t){const n=t.data||{},r="value"in t&&!(Pr.call(n,"hProperties")||Pr.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function gm(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Es(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Cs(e,t){const n=hm(e,t),r=n.one(e,void 0),i=tm(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function mm(e,t){return e&&"run"in e?async function(n,r){const i=Cs(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Cs(n,{file:r,...e||t})}}function Ts(e){if(e)throw e}var fn=Object.prototype.hasOwnProperty,eo=Object.prototype.toString,As=Object.defineProperty,Rs=Object.getOwnPropertyDescriptor,Is=function(t){return typeof Array.isArray=="function"?Array.isArray(t):eo.call(t)==="[object Array]"},Os=function(t){if(!t||eo.call(t)!=="[object Object]")return!1;var n=fn.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&fn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||fn.call(t,i)},Ps=function(t,n){As&&n.name==="__proto__"?As(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},js=function(t,n){if(n==="__proto__")if(fn.call(t,n)){if(Rs)return Rs(t,n).value}else return;return t[n]},ym=function e(){var t,n,r,i,s,a,o=arguments[0],l=1,u=arguments.length,c=!1;for(typeof o=="boolean"&&(c=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=js(o,n),i=js(t,n),o!==i&&(c&&i&&(Os(i)||(s=Is(i)))?(s?(s=!1,a=r&&Is(r)?r:[]):a=r&&Os(r)?r:{},Ps(o,{name:n,newValue:e(c,a,i)})):typeof i<"u"&&Ps(o,{name:n,newValue:i}));return o};const Xn=Dr(ym);function jr(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wm(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(l,...u){const c=e[++s];let h=-1;if(l){a(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?bm(c,o)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function bm(e,t){let n;return r;function r(...a){const o=e.length>a.length;let l;o&&a.push(i);try{l=e.apply(this,a)}catch(u){const c=u;if(o&&n)throw c;return i(c)}o||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}const Oe={basename:vm,dirname:_m,extname:km,join:xm,sep:"/"};function vm(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');tn(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function _m(e){if(tn(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function km(e){tn(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function xm(...e){let t=-1,n;for(;++t<e.length;)tn(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Sm(n)}function Sm(e){tn(e);const t=e.codePointAt(0)===47;let n=Em(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Em(e,t){let n="",r=0,i=-1,s=0,a=-1,o,l;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function tn(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Cm={cwd:Tm};function Tm(){return"/"}function Lr(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Am(e){if(typeof e=="string")e=new URL(e);else if(!Lr(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Rm(e)}function Rm(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Qn=["history","path","basename","stem","extname","dirname"];class to{constructor(t){let n;t?Lr(t)?n={path:t}:typeof t=="string"||Im(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Cm.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Qn.length;){const s=Qn[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Qn.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Oe.basename(this.path):void 0}set basename(t){er(t,"basename"),Zn(t,"basename"),this.path=Oe.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Oe.dirname(this.path):void 0}set dirname(t){Ls(this.basename,"dirname"),this.path=Oe.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Oe.extname(this.path):void 0}set extname(t){if(Zn(t,"extname"),Ls(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Oe.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Lr(t)&&(t=Am(t)),er(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Oe.basename(this.path,this.extname):void 0}set stem(t){er(t,"stem"),Zn(t,"stem"),this.path=Oe.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new he(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Zn(e,t){if(e&&e.includes(Oe.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Oe.sep+"`")}function er(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ls(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Im(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Om=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Pm={}.hasOwnProperty;class li extends Om{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=wm()}copy(){const t=new li;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Xn(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(rr("data",this.frozen),this.namespace[t]=n,this):Pm.call(this.namespace,t)&&this.namespace[t]||void 0:t?(rr("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=cn(t),r=this.parser||this.Parser;return tr("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),tr("process",this.parser||this.Parser),nr("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=cn(t),l=r.parse(o);r.run(l,o,function(c,h,f){if(c||!h||!f)return u(c);const d=h,p=r.stringify(d,f);Nm(p)?f.value=p:f.result=p,u(c,f)});function u(c,h){c||!h?a(c):s?s(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),tr("processSync",this.parser||this.Parser),nr("processSync",this.compiler||this.Compiler),this.process(t,i),Ds("processSync","process",n),r;function i(s,a){n=!0,Ts(s),r=a}}run(t,n,r){Ns(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const l=cn(n);i.run(t,l,u);function u(c,h,f){const d=h||t;c?o(c):a?a(d):r(void 0,d,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Ds("runSync","run",r),i;function s(a,o){Ts(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=cn(n),i=this.compiler||this.Compiler;return nr("stringify",i),Ns(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(rr("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(i.settings=Xn(!0,i.settings,u.settings))}function o(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[d,...p]=c;const g=r[f][1];jr(g)&&jr(d)&&(d=Xn(!0,g,d)),r[f]=[u,d,...p]}}}}const jm=new li().freeze();function tr(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function nr(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function rr(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ns(e){if(!jr(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ds(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function cn(e){return Lm(e)?e:new to(e)}function Lm(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Nm(e){return typeof e=="string"||Dm(e)}function Dm(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $m="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$s=[],Us={allowDangerousHtml:!0},Um=/^(https?|ircs?|mailto|xmpp)$/i,Bm=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function kn(e){const t=Fm(e),n=zm(e);return Mm(t.runSync(t.parse(n),n),e)}function Fm(e){const t=e.rehypePlugins||$s,n=e.remarkPlugins||$s,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Us}:Us;return jm().use(kg).use(n).use(mm,r).use(t)}function zm(e){const t=e.children||"",n=new to;return typeof t=="string"&&(n.value=t),n}function Mm(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||qm;for(const c of Bm)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+$m+c.id,void 0);return oi(e,u),sf(e,{Fragment:_.Fragment,components:i,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function u(c,h,f){if(c.type==="raw"&&f&&typeof h=="number")return a?f.children.splice(h,1):f.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let d;for(d in Jn)if(Object.hasOwn(Jn,d)&&Object.hasOwn(c.properties,d)){const p=c.properties[d],g=Jn[d];(g===null||g.includes(c.tagName))&&(c.properties[d]=l(String(p||""),d,c))}}if(c.type==="element"){let d=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!d&&r&&typeof h=="number"&&(d=!r(c,h,f)),d&&f&&typeof h=="number")return o&&c.children?f.children.splice(h,1,...c.children):f.children.splice(h,1),h}}}function qm(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Um.test(e.slice(0,t))?e:""}function Bs(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function Vm(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Wm(e,t,n){const i=Nn((n||{}).ignore||[]),s=Hm(t);let a=-1;for(;++a<s.length;)Za(e,"text",o);function o(u,c){let h=-1,f;for(;++h<c.length;){const d=c[h],p=f?f.children:void 0;if(i(d,p?p.indexOf(d):void 0,f))return;f=d}if(f)return l(u,c)}function l(u,c){const h=c[c.length-1],f=s[a][0],d=s[a][1];let p=0;const b=h.children.indexOf(u);let m=!1,x=[];f.lastIndex=0;let v=f.exec(u.value);for(;v;){const A=v.index,O={index:v.index,input:v.input,stack:[...c,u]};let k=d(...v,O);if(typeof k=="string"&&(k=k.length>0?{type:"text",value:k}:void 0),k===!1?f.lastIndex=A+1:(p!==A&&x.push({type:"text",value:u.value.slice(p,A)}),Array.isArray(k)?x.push(...k):k&&x.push(k),p=A+v[0].length,m=!0),!f.global)break;v=f.exec(u.value)}return m?(p<u.value.length&&x.push({type:"text",value:u.value.slice(p)}),h.children.splice(b,1,...x)):x=[u],b+x.length}}function Hm(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([Km(i[0]),Jm(i[1])])}return t}function Km(e){return typeof e=="string"?new RegExp(Vm(e),"g"):e}function Jm(e){return typeof e=="function"?e:function(){return e}}const ir="phrasing",sr=["autolink","link","image","label"];function Gm(){return{transforms:[ny],enter:{literalAutolink:Xm,literalAutolinkEmail:ar,literalAutolinkHttp:ar,literalAutolinkWww:ar},exit:{literalAutolink:ty,literalAutolinkEmail:ey,literalAutolinkHttp:Qm,literalAutolinkWww:Zm}}}function Ym(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ir,notInConstruct:sr},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ir,notInConstruct:sr},{character:":",before:"[ps]",after:"\\/",inConstruct:ir,notInConstruct:sr}]}}function Xm(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ar(e){this.config.enter.autolinkProtocol.call(this,e)}function Qm(e){this.config.exit.autolinkProtocol.call(this,e)}function Zm(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ey(e){this.config.exit.autolinkEmail.call(this,e)}function ty(e){this.exit(e)}function ny(e){Wm(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ry],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),iy]],{ignore:["link","linkReference"]})}function ry(e,t,n,r,i){let s="";if(!no(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!sy(n)))return!1;const a=ay(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function iy(e,t,n,r){return!no(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function sy(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function ay(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=Bs(e,"(");let s=Bs(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function no(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||at(n)||Pn(n))&&(!t||n!==47)}ro.peek=gy;function oy(){this.buffer()}function ly(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function uy(){this.buffer()}function cy(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function hy(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ie(this.sliceSerialize(e)).toLowerCase(),n.label=t}function dy(e){this.exit(e)}function fy(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ie(this.sliceSerialize(e)).toLowerCase(),n.label=t}function py(e){this.exit(e)}function gy(){return"["}function ro(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function my(){return{enter:{gfmFootnoteCallString:oy,gfmFootnoteCall:ly,gfmFootnoteDefinitionLabelString:uy,gfmFootnoteDefinition:cy},exit:{gfmFootnoteCallString:hy,gfmFootnoteCall:dy,gfmFootnoteDefinitionLabelString:fy,gfmFootnoteDefinition:py}}}function yy(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:ro},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const o=s.createTracker(a);let l=o.move("[^");const u=s.enter("footnoteDefinition"),c=s.enter("label");return l+=o.move(s.safe(s.associationId(r),{before:l,after:"]"})),c(),l+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),l+=o.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,o.current()),t?io:wy))),u(),l}}function wy(e,t,n){return t===0?e:io(e,t,n)}function io(e,t,n){return(n?"":"    ")+e}const by=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];so.peek=Sy;function vy(){return{canContainEols:["delete"],enter:{strikethrough:ky},exit:{strikethrough:xy}}}function _y(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:by}],handlers:{delete:so}}}function ky(e){this.enter({type:"delete",children:[]},e)}function xy(e){this.exit(e)}function so(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),s(),a}function Sy(){return"~"}function Ey(e){return e.length}function Cy(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Ey,s=[],a=[],o=[],l=[];let u=0,c=-1;for(;++c<e.length;){const g=[],b=[];let m=-1;for(e[c].length>u&&(u=e[c].length);++m<e[c].length;){const x=Ty(e[c][m]);if(n.alignDelimiters!==!1){const v=i(x);b[m]=v,(l[m]===void 0||v>l[m])&&(l[m]=v)}g.push(x)}a[c]=g,o[c]=b}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<u;)s[h]=Fs(r[h]);else{const g=Fs(r);for(;++h<u;)s[h]=g}h=-1;const f=[],d=[];for(;++h<u;){const g=s[h];let b="",m="";g===99?(b=":",m=":"):g===108?b=":":g===114&&(m=":");let x=n.alignDelimiters===!1?1:Math.max(1,l[h]-b.length-m.length);const v=b+"-".repeat(x)+m;n.alignDelimiters!==!1&&(x=b.length+x+m.length,x>l[h]&&(l[h]=x),d[h]=x),f[h]=v}a.splice(1,0,f),o.splice(1,0,d),c=-1;const p=[];for(;++c<a.length;){const g=a[c],b=o[c];h=-1;const m=[];for(;++h<u;){const x=g[h]||"";let v="",A="";if(n.alignDelimiters!==!1){const O=l[h]-(b[h]||0),k=s[h];k===114?v=" ".repeat(O):k===99?O%2?(v=" ".repeat(O/2+.5),A=" ".repeat(O/2-.5)):(v=" ".repeat(O/2),A=v):A=" ".repeat(O)}n.delimiterStart!==!1&&!h&&m.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&x==="")&&(n.delimiterStart!==!1||h)&&m.push(" "),n.alignDelimiters!==!1&&m.push(v),m.push(x),n.alignDelimiters!==!1&&m.push(A),n.padding!==!1&&m.push(" "),(n.delimiterEnd!==!1||h!==u-1)&&m.push("|")}p.push(n.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return p.join(`
`)}function Ty(e){return e==null?"":String(e)}function Fs(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Ay(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),Ry);return i(),a}function Ry(e,t,n){return">"+(n?"":" ")+e}function Iy(e,t){return zs(e,t.inConstruct,!0)&&!zs(e,t.notInConstruct,!1)}function zs(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Ms(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Iy(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Oy(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+t.length,r=n.indexOf(t,i);return a}function Py(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function jy(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Ly(e,t,n,r){const i=jy(n),s=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(Py(e,n)){const h=n.enter("codeIndented"),f=n.indentLines(s,Ny);return h(),f}const o=n.createTracker(r),l=i.repeat(Math.max(Oy(s,i)+1,3)),u=n.enter("codeFenced");let c=o.move(l);if(e.lang){const h=n.enter(`codeFencedLang${a}`);c+=o.move(n.safe(e.lang,{before:c,after:" ",encode:["`"],...o.current()})),h()}if(e.lang&&e.meta){const h=n.enter(`codeFencedMeta${a}`);c+=o.move(" "),c+=o.move(n.safe(e.meta,{before:c,after:`
`,encode:["`"],...o.current()})),h()}return c+=o.move(`
`),s&&(c+=o.move(s+`
`)),c+=o.move(l),u(),c}function Ny(e,t,n){return(n?"":"    ")+e}function ui(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Dy(e,t,n,r){const i=ui(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(e),{before:u,after:"]",...l.current()})),u+=l.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...l.current()}))),o(),e.title&&(o=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),a(),u}function $y(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Xt(e){return"&#x"+e.toString(16).toUpperCase()+";"}function xn(e,t,n){const r=Et(e),i=Et(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ao.peek=Uy;function ao(e,t,n,r){const i=$y(n),s=n.enter("emphasis"),a=n.createTracker(r),o=a.move(i);let l=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const u=l.charCodeAt(0),c=xn(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Xt(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=xn(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Xt(h));const d=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},o+l+d}function Uy(e,t,n){return n.options.emphasis||"*"}function By(e,t){let n=!1;return oi(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Or}),!!((!e.depth||e.depth<3)&&ei(e)&&(t.options.setext||n))}function Fy(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(By(e,n)){const c=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return h(),c(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const a="#".repeat(i),o=n.enter("headingAtx"),l=n.enter("phrasing");s.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Xt(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),l(),o(),u}oo.peek=zy;function oo(e){return e.value||""}function zy(){return"<"}lo.peek=My;function lo(e,t,n,r){const i=ui(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(e.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),o(),e.title&&(o=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),u+=l.move(")"),a(),u}function My(){return"!"}uo.peek=qy;function uo(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("![");const u=n.safe(e.alt,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=c,s(),i==="full"||!u||u!==h?l+=o.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function qy(){return"!"}co.peek=Vy;function co(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let l;if(a.atBreak)for(;l=o.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function Vy(){return"`"}function ho(e,t){const n=ei(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}fo.peek=Wy;function fo(e,t,n,r){const i=ui(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,l;if(ho(e,n)){const c=n.stack;n.stack=[],o=n.enter("autolink");let h=a.move("<");return h+=a.move(n.containerPhrasing(e,{before:h,after:">",...a.current()})),h+=a.move(">"),o(),n.stack=c,h}o=n.enter("link"),l=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=a.move(" "+i),u+=a.move(n.safe(e.title,{before:u,after:i,...a.current()})),u+=a.move(i),l()),u+=a.move(")"),o(),u}function Wy(e,t,n){return ho(e,n)?"<":"["}po.peek=Hy;function po(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("[");const u=n.containerPhrasing(e,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=c,s(),i==="full"||!u||u!==h?l+=o.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function Hy(){return"["}function ci(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Ky(e){const t=ci(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Jy(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function go(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Gy(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?Jy(n):ci(n);const o=e.ordered?a==="."?")":".":Ky(n);let l=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),go(n)===a&&c){let h=-1;for(;++h<e.children.length;){const f=e.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(a=o),n.bulletCurrent=a;const u=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),u}function Yy(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Xy(e,t,n,r){const i=Yy(n);let s=n.bulletCurrent||ci(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,o.current()),c);return l(),u;function c(h,f,d){return f?(d?"":" ".repeat(a))+h:(d?s:s+" ".repeat(a-s.length))+h}}function Qy(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,r);return s(),i(),a}const Zy=Nn(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ew(e,t,n,r){return(e.children.some(function(a){return Zy(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function tw(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}mo.peek=nw;function mo(e,t,n,r){const i=tw(n),s=n.enter("strong"),a=n.createTracker(r),o=a.move(i+i);let l=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const u=l.charCodeAt(0),c=xn(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Xt(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=xn(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Xt(h));const d=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},o+l+d}function nw(e,t,n){return n.options.strong||"*"}function rw(e,t,n,r){return n.safe(e.value,r)}function iw(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function sw(e,t,n){const r=(go(n)+(n.options.ruleSpaces?" ":"")).repeat(iw(n));return n.options.ruleSpaces?r.slice(0,-1):r}const yo={blockquote:Ay,break:Ms,code:Ly,definition:Dy,emphasis:ao,hardBreak:Ms,heading:Fy,html:oo,image:lo,imageReference:uo,inlineCode:co,link:fo,linkReference:po,list:Gy,listItem:Xy,paragraph:Qy,root:ew,strong:mo,text:rw,thematicBreak:sw};function aw(){return{enter:{table:ow,tableData:qs,tableHeader:qs,tableRow:uw},exit:{codeText:cw,table:lw,tableData:or,tableHeader:or,tableRow:or}}}function ow(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function lw(e){this.exit(e),this.data.inTable=void 0}function uw(e){this.enter({type:"tableRow",children:[]},e)}function or(e){this.exit(e)}function qs(e){this.enter({type:"tableCell",children:[]},e)}function cw(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,hw));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function hw(e,t){return t==="|"?t:e}function dw(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:a,tableCell:l,tableRow:o}};function a(d,p,g,b){return u(c(d,g,b),d.align)}function o(d,p,g,b){const m=h(d,g,b),x=u([m]);return x.slice(0,x.indexOf(`
`))}function l(d,p,g,b){const m=g.enter("tableCell"),x=g.enter("phrasing"),v=g.containerPhrasing(d,{...b,before:s,after:s});return x(),m(),v}function u(d,p){return Cy(d,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function c(d,p,g){const b=d.children;let m=-1;const x=[],v=p.enter("table");for(;++m<b.length;)x[m]=h(b[m],p,g);return v(),x}function h(d,p,g){const b=d.children;let m=-1;const x=[],v=p.enter("tableRow");for(;++m<b.length;)x[m]=l(b[m],d,p,g);return v(),x}function f(d,p,g){let b=yo.inlineCode(d,p,g);return g.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function fw(){return{exit:{taskListCheckValueChecked:Vs,taskListCheckValueUnchecked:Vs,paragraph:gw}}}function pw(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:mw}}}function Vs(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function gw(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,a;for(;++s<i.length;){const o=i[s];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function mw(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);s&&o.move(a);let l=yo.listItem(e,t,n,{...r,...o.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+a}}function yw(){return[Gm(),my(),vy(),aw(),fw()]}function ww(e){return{extensions:[Ym(),yy(e),_y(),dw(e),pw()]}}const bw={tokenize:Ew,partial:!0},wo={tokenize:Cw,partial:!0},bo={tokenize:Tw,partial:!0},vo={tokenize:Aw,partial:!0},vw={tokenize:Rw,partial:!0},_o={name:"wwwAutolink",tokenize:xw,previous:xo},ko={name:"protocolAutolink",tokenize:Sw,previous:So},Fe={name:"emailAutolink",tokenize:kw,previous:Eo},Pe={};function _w(){return{text:Pe}}let Ze=48;for(;Ze<123;)Pe[Ze]=Fe,Ze++,Ze===58?Ze=65:Ze===91&&(Ze=97);Pe[43]=Fe;Pe[45]=Fe;Pe[46]=Fe;Pe[95]=Fe;Pe[72]=[Fe,ko];Pe[104]=[Fe,ko];Pe[87]=[Fe,_o];Pe[119]=[Fe,_o];function kw(e,t,n){const r=this;let i,s;return a;function a(h){return!Nr(h)||!Eo.call(r,r.previous)||hi(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(h))}function o(h){return Nr(h)?(e.consume(h),o):h===64?(e.consume(h),l):n(h)}function l(h){return h===46?e.check(vw,c,u)(h):h===45||h===95||ce(h)?(s=!0,e.consume(h),l):c(h)}function u(h){return e.consume(h),i=!0,l}function c(h){return s&&i&&de(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(h)):n(h)}}function xw(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!xo.call(r,r.previous)||hi(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(bw,e.attempt(wo,e.attempt(bo,s),n),n)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function Sw(e,t,n){const r=this;let i="",s=!1;return a;function a(h){return(h===72||h===104)&&So.call(r,r.previous)&&!hi(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),e.consume(h),o):n(h)}function o(h){if(de(h)&&i.length<5)return i+=String.fromCodePoint(h),e.consume(h),o;if(h===58){const f=i.toLowerCase();if(f==="http"||f==="https")return e.consume(h),l}return n(h)}function l(h){return h===47?(e.consume(h),s?u:(s=!0,l)):n(h)}function u(h){return h===null||bn(h)||Y(h)||at(h)||Pn(h)?n(h):e.attempt(wo,e.attempt(bo,c),n)(h)}function c(h){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(h)}}function Ew(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),s):n(a)}function s(a){return a===null?n(a):t(a)}}function Cw(e,t,n){let r,i,s;return a;function a(u){return u===46||u===95?e.check(vo,l,o)(u):u===null||Y(u)||at(u)||u!==45&&Pn(u)?l(u):(s=!0,e.consume(u),a)}function o(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),a}function l(u){return i||r||!s?n(u):t(u)}}function Tw(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(vo,t,s)(a):a===null||Y(a)||at(a)?t(a):(e.consume(a),i)}function s(a){return a===41&&r++,e.consume(a),i}}function Aw(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),s):o===93?(e.consume(o),i):o===60||o===null||Y(o)||at(o)?t(o):n(o)}function i(o){return o===null||o===40||o===91||Y(o)||at(o)?t(o):r(o)}function s(o){return de(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),r):de(o)?(e.consume(o),a):n(o)}}function Rw(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return ce(s)?n(s):t(s)}}function xo(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Y(e)}function So(e){return!de(e)}function Eo(e){return!(e===47||Nr(e))}function Nr(e){return e===43||e===45||e===46||e===95||ce(e)}function hi(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Iw={tokenize:Uw,partial:!0};function Ow(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Nw,continuation:{tokenize:Dw},exit:$w}},text:{91:{name:"gfmFootnoteCall",tokenize:Lw},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Pw,resolveTo:jw}}}}function Pw(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!a||!a._balanced)return n(l);const u=Ie(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function jw(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function Lw(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return o;function o(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(h){if(s>999||h===93&&!a||h===null||h===91||Y(h))return n(h);if(h===93){e.exit("chunkString");const f=e.exit("gfmFootnoteCallString");return i.includes(Ie(r.sliceSerialize(f)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(h)}return Y(h)||(a=!0),s++,e.consume(h),h===92?c:u}function c(h){return h===91||h===92||h===93?(e.consume(h),s++,u):u(h)}}function Nw(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,o;return l;function l(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(p)}function c(p){if(a>999||p===93&&!o||p===null||p===91||Y(p))return n(p);if(p===93){e.exit("chunkString");const g=e.exit("gfmFootnoteDefinitionLabelString");return s=Ie(r.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return Y(p)||(o=!0),a++,e.consume(p),p===92?h:c}function h(p){return p===91||p===92||p===93?(e.consume(p),a++,c):c(p)}function f(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),i.includes(s)||i.push(s),W(e,d,"gfmFootnoteDefinitionWhitespace")):n(p)}function d(p){return t(p)}}function Dw(e,t,n){return e.check(en,t,e.attempt(Iw,t,n))}function $w(e){e.exit("gfmFootnoteDefinition")}function Uw(e,t,n){const r=this;return W(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):n(s)}}function Bw(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,o){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let u=l;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[l][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[l][1].end)},h={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[l][1].start)},f=[["enter",c,o],["enter",a[u][1],o],["exit",a[u][1],o],["enter",h,o]],d=o.parser.constructs.insideSpan.null;d&&_e(f,f.length,0,jn(d,a.slice(u+1,l),o)),_e(f,f.length,0,[["exit",h,o],["enter",a[l][1],o],["exit",a[l][1],o],["exit",c,o]]),_e(a,u-1,l-u+3,f),l=u+f.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function s(a,o,l){const u=this.previous,c=this.events;let h=0;return f;function f(p){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(p):(a.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const g=Et(u);if(p===126)return h>1?l(p):(a.consume(p),h++,d);if(h<2&&!n)return l(p);const b=a.exit("strikethroughSequenceTemporary"),m=Et(p);return b._open=!m||m===2&&!!g,b._close=!g||g===2&&!!m,o(p)}}}class Fw{constructor(){this.map=[]}add(t,n,r){zw(this,t,n,r)}consume(t){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function zw(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function Mw(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function qw(){return{flow:{null:{name:"table",tokenize:Vw,resolveAll:Ww}}}}function Vw(e,t,n){const r=this;let i=0,s=0,a;return o;function o(S){let P=r.events.length-1;for(;P>-1;){const J=r.events[P][1].type;if(J==="lineEnding"||J==="linePrefix")P--;else break}const N=P>-1?r.events[P][1].type:null,K=N==="tableHead"||N==="tableRow"?k:l;return K===k&&r.parser.lazy[r.now().line]?n(S):K(S)}function l(S){return e.enter("tableHead"),e.enter("tableRow"),u(S)}function u(S){return S===124||(a=!0,s+=1),c(S)}function c(S){return S===null?n(S):$(S)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),d):n(S):q(S)?W(e,c,"whitespace")(S):(s+=1,a&&(a=!1,i+=1),S===124?(e.enter("tableCellDivider"),e.consume(S),e.exit("tableCellDivider"),a=!0,c):(e.enter("data"),h(S)))}function h(S){return S===null||S===124||Y(S)?(e.exit("data"),c(S)):(e.consume(S),S===92?f:h)}function f(S){return S===92||S===124?(e.consume(S),h):h(S)}function d(S){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(S):(e.enter("tableDelimiterRow"),a=!1,q(S)?W(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):p(S))}function p(S){return S===45||S===58?b(S):S===124?(a=!0,e.enter("tableCellDivider"),e.consume(S),e.exit("tableCellDivider"),g):O(S)}function g(S){return q(S)?W(e,b,"whitespace")(S):b(S)}function b(S){return S===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(S),e.exit("tableDelimiterMarker"),m):S===45?(s+=1,m(S)):S===null||$(S)?A(S):O(S)}function m(S){return S===45?(e.enter("tableDelimiterFiller"),x(S)):O(S)}function x(S){return S===45?(e.consume(S),x):S===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(S),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(S))}function v(S){return q(S)?W(e,A,"whitespace")(S):A(S)}function A(S){return S===124?p(S):S===null||$(S)?!a||i!==s?O(S):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(S)):O(S)}function O(S){return n(S)}function k(S){return e.enter("tableRow"),C(S)}function C(S){return S===124?(e.enter("tableCellDivider"),e.consume(S),e.exit("tableCellDivider"),C):S===null||$(S)?(e.exit("tableRow"),t(S)):q(S)?W(e,C,"whitespace")(S):(e.enter("data"),D(S))}function D(S){return S===null||S===124||Y(S)?(e.exit("data"),C(S)):(e.consume(S),S===92?U:D)}function U(S){return S===92||S===124?(e.consume(S),D):D(S)}}function Ww(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,l=0,u,c,h;const f=new Fw;for(;++n<e.length;){const d=e[n],p=d[1];d[0]==="enter"?p.type==="tableHead"?(o=!1,l!==0&&(Ws(f,t,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,c={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",c,t]])),i=p.type==="tableDelimiterRow"?2:c?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],h=hn(f,t,s,i,void 0,h),s=[0,0,0,0]),a[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],h=hn(f,t,s,i,void 0,h)),s=a,a=[s[1],n,0,0])):p.type==="tableHead"?(o=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,s[1]!==0?(a[0]=a[1],h=hn(f,t,s,i,n,h)):a[1]!==0&&(h=hn(f,t,a,i,n,h)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(a[3]=n)}for(l!==0&&Ws(f,t,l,u,c),f.consume(t.events),n=-1;++n<t.events.length;){const d=t.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=Mw(t.events,n))}return e}function hn(e,t,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},_t(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const l=_t(t.events,n[1]);if(s={type:a,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=_t(t.events,n[2]),c=_t(t.events,n[3]),h={type:o,start:Object.assign({},u),end:Object.assign({},c)};if(e.add(n[2],0,[["enter",h,t]]),r!==2){const f=t.events[n[2]],d=t.events[n[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,g=n[3]-n[2]-1;e.add(p,g,[])}}e.add(n[3]+1,0,[["exit",h,t]])}return i!==void 0&&(s.end=Object.assign({},_t(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function Ws(e,t,n,r,i){const s=[],a=_t(t.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),r.end=Object.assign({},a),s.push(["exit",r,t]),e.add(n+1,0,s)}function _t(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Hw={name:"tasklistCheck",tokenize:Jw};function Kw(){return{text:{91:Hw}}}function Jw(e,t,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return Y(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),a):n(l)}function a(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(l)}function o(l){return $(l)?t(l):q(l)?e.check({tokenize:Gw},t,n)(l):n(l)}}function Gw(e,t,n){return W(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Yw(e){return La([_w(),Ow(),Bw(e),qw(),Kw()])}const Xw={};function Sn(e){const t=this,n=e||Xw,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Yw(n)),s.push(yw()),a.push(ww(n))}const Co=(e,t=100)=>{if(!e)return"";const n=e.replace(/[`*#_>!-]/g,"").replace(/!\[(.*?)\]\(.*?\)/g,"$1").replace(/\[(.*?)\]\(.*?\)/g,"$1").replace(/\n+/g," ");return n.length>t?n.slice(0,t)+"":n},To=({item:e})=>{const t=e.publicationDate||e.created_at,n=t?new Date(t).toLocaleDateString():"Date unavailable";return _.jsxs("footer",{className:L.meta,children:[_.jsxs("span",{children:["Slug: ",e.slug]}),e.author&&_.jsxs("span",{className:L.author,children:["By ",e.author]}),e.dateline&&_.jsx("span",{className:L.dateline,children:e.dateline}),_.jsx("time",{className:L.date,dateTime:t,children:n}),e.badge&&_.jsx("span",{className:`${L.badge} ${L[e.badge]}`,children:e.badge}),e.trending&&_.jsx("span",{className:`${L.badge} ${L.trending}`,children:"Trending"})]})},Ao=({item:e,handleEdit:t,handleDelete:n,loading:r})=>_.jsxs("div",{className:L.actions,children:[_.jsx("button",{onClick:()=>t(e),"aria-label":`Edit ${e.title}`,disabled:r,children:"Edit"}),_.jsx("button",{onClick:()=>n(e.id),"aria-label":`Delete ${e.title}`,disabled:r,children:"Delete"}),_.jsx(Xl,{to:`/articles/${e.slug}`,className:L.readMore,children:"Read More"})]}),Qw=({item:e,handleEdit:t,handleDelete:n,loading:r})=>_.jsxs("article",{className:L.articleItem,children:[e.image_url&&_.jsx("img",{src:e.image_url,alt:e.title||"Article thumbnail",className:L.thumbnail,loading:"lazy"}),_.jsxs("header",{className:L.textBlock,children:[_.jsx("strong",{className:L.title,children:e.title}),e.subtitle&&_.jsx(kn,{remarkPlugins:[Sn],className:L.subtitlePreview,children:e.subtitle})]}),_.jsx("p",{children:Co(e.content,120)}),_.jsx(To,{item:e}),_.jsx(Ao,{item:e,handleEdit:t,handleDelete:n,loading:r})]}),Zw=({item:e,handleEdit:t,handleDelete:n,loading:r})=>_.jsxs("article",{className:L.rowCard,children:[e.image_url&&_.jsx("img",{src:e.image_url,alt:e.title||"Article thumbnail",className:L.thumbnailLarge,loading:"lazy"}),_.jsxs("header",{children:[_.jsx("h3",{children:e.title}),e.subtitle&&_.jsx(kn,{remarkPlugins:[Sn],className:L.subtitle,children:e.subtitle})]}),_.jsx("p",{children:Co(e.content,150)}),_.jsx(To,{item:e}),_.jsx(Ao,{item:e,handleEdit:t,handleDelete:n,loading:r})]});function eb({items:e,section:t,handleEdit:n,handleDelete:r,loading:i}){return i?_.jsx("p",{children:"Loading articles..."}):!e||e.length===0?_.jsx("p",{className:L.empty,children:"No articles available for this section."}):t==="news"?_.jsx("ul",{className:L.articleList,children:e.map(s=>_.jsx(Qw,{item:s,handleEdit:n,handleDelete:r,loading:i},s.id))}):_.jsx("div",{className:L.cardContainer,children:e.map(s=>_.jsx(Zw,{item:s,handleEdit:n,handleDelete:r,loading:i},s.id))})}function tb(){const[e,t]=R.useState([]);R.useEffect(()=>{n()},[]);const n=async()=>{const{data:r,error:i}=await tt.from("articles").select("*").eq("trending",!0).order("created_at",{ascending:!1});i?console.error("Error fetching trending:",i):t(r)};return _.jsxs("div",{className:L.trendingContainer,children:[_.jsx("h2",{children:"Trending Articles"}),e.length===0&&_.jsx("p",{children:"No trending articles yet."}),e.map(r=>_.jsxs("article",{className:L.trendingCard,children:[r.image_url&&_.jsx("img",{src:r.image_url,alt:r.title,width:"150"}),_.jsx("h3",{children:r.title}),r.subtitle&&_.jsx("h4",{className:L.subtitle,dangerouslySetInnerHTML:{__html:r.subtitle}}),_.jsx("div",{dangerouslySetInnerHTML:{__html:r.content.slice(0,100)}}),_.jsxs("div",{className:L.meta,children:[_.jsx("span",{className:L.badge,children:r.section}),r.badge&&_.jsx("span",{className:`${L.badge} ${L[r.badge]}`,children:r.badge})]})]},r.id))]})}var Ro={exports:{}},nb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rb=nb,ib=rb;function Io(){}function Oo(){}Oo.resetWarningCache=Io;var sb=function(){function e(r,i,s,a,o,l){if(l!==ib){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Oo,resetWarningCache:Io};return n.PropTypes=n,n};Ro.exports=sb();var ab=Ro.exports;const fe=Dr(ab),ob=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");function Po({title:e,subtitle:t,content:n,imageUrl:r,section:i,category:s,badge:a,trending:o,author:l,dateline:u,publicationDate:c,tags:h,videoUrl:f,relatedLinks:d}){return _.jsxs("div",{className:L.previewContainer,children:[_.jsx("h2",{children:"Preview"}),_.jsxs("article",{className:L.previewCard,children:[r&&_.jsxs("figure",{className:L.featuredImage,children:[_.jsx("img",{src:r,alt:e?`Featured image for ${e}`:"Featured image",loading:"lazy"}),t&&_.jsx("figcaption",{children:t})]}),_.jsx("h3",{children:e||"Untitled"}),t&&_.jsx(kn,{remarkPlugins:[Sn],className:L.subtitle,children:t}),_.jsxs("section",{className:L.metaInfo,children:[l&&_.jsxs("span",{className:L.author,children:["By ",l]}),u&&_.jsx("span",{className:L.dateline,children:u}),c&&_.jsx("time",{className:L.date,dateTime:c,children:new Date(c).toLocaleDateString()})]}),_.jsx("section",{className:L.content,children:n?_.jsx(kn,{remarkPlugins:[Sn],children:n}):_.jsx("p",{children:"Content will appear here..."})}),f&&_.jsx("div",{className:L.videoEmbed,children:_.jsx("iframe",{src:f,title:"Embedded video",frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0})}),h&&_.jsx("aside",{className:L.tags,children:h.split(",").map(p=>_.jsx("span",{className:L.tag,children:p.trim()},p.trim()))}),d&&_.jsxs("aside",{className:L.related,children:[_.jsx("h5",{children:"Related"}),_.jsx("ul",{children:d.split(",").map((p,g)=>_.jsx("li",{children:_.jsx("a",{href:p.trim(),target:"_blank",rel:"noopener noreferrer",title:`Related link ${g+1}`,children:p.trim()})},g))})]}),_.jsxs("div",{className:L.meta,children:[_.jsx("span",{className:L.badge,children:i}),i==="news"&&_.jsx("span",{className:L.badge,children:s}),a&&_.jsx("span",{className:`${L.badge} ${L[a]}`,children:a}),o&&_.jsx("span",{className:`${L.badge} ${L.trending}`,children:"Trending"})]}),_.jsxs("small",{children:["Slug: ",ob(e||"untitled")]})]})]})}Po.propTypes={title:fe.string,subtitle:fe.string,content:fe.string,imageUrl:fe.string,section:fe.string,category:fe.string,badge:fe.string,trending:fe.bool,author:fe.string,dateline:fe.string,publicationDate:fe.string,tags:fe.string,videoUrl:fe.string,relatedLinks:fe.string};const lb=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),lr={title:"",subtitle:"",content:"",imageUrl:"",imageCaption:"",category:"global",section:"news",badge:"",trending:!1,must_read:!1,most_relevant:!1,author:"",dateline:"",publicationDate:"",tags:"",videoUrl:"",relatedLinks:"",injectImageUrl:"",injectImageCaption:"",injectSubtitle:"",injectLinkText:"",injectLinkSlug:""};function gb(){const[e,t]=R.useState(lr),[n,r]=R.useState(null),[i,s]=R.useState([]),[a,o]=R.useState(!1),[l,u]=R.useState(""),[c,h]=R.useState(""),f=R.useRef(null),d=Tn();R.useEffect(()=>{if(c){const C=setTimeout(()=>h(""),3e3);return()=>clearTimeout(C)}},[c]);const p=async()=>{try{o(!0);let C=tt.from("articles").select("*").order("created_at",{ascending:!1});C=C.eq("section",e.section),e.section==="news"&&e.category&&(C=C.eq("category",e.category));const{data:D,error:U}=await C;if(U)throw new Error(U.message);s(D||[]),u("")}catch(C){u(`Error fetching articles: ${C.message}`)}finally{o(!1)}};R.useEffect(()=>{p()},[e.section,e.category]);const g=C=>{r(C.id),t({...lr,title:C.title,subtitle:C.subtitle||"",content:C.content,imageUrl:C.image_url||"",imageCaption:C.image_caption||"",category:C.category||"global",section:C.section,badge:C.badge||"",trending:C.trending||!1,must_read:C.must_read||!1,most_relevant:C.most_relevant||!1,author:C.author||"",dateline:C.dateline||"",publicationDate:C.publication_date||"",tags:Array.isArray(C.tags)?C.tags.join(", "):C.tags||"",videoUrl:C.video_url||"",relatedLinks:Array.isArray(C.related_links)?C.related_links.join(", "):C.related_links||""})},b=()=>{r(null),t(lr)},m=async C=>{if(window.confirm("Delete this article?"))try{const{error:D}=await tt.from("articles").delete().eq("id",C);if(D)throw new Error(D.message);h("Article deleted successfully."),p()}catch(D){u(`Error deleting article: ${D.message}`)}},x=async()=>{const{error:C}=await tt.auth.signOut();C||d("/login",{replace:!0})},v=()=>{if(!e.injectSubtitle)return;const C=f.current;if(!C)return;const D=C.selectionStart,U=`${e.content.slice(0,D)}
## ${e.injectSubtitle}
${e.content.slice(D)}`;t({...e,content:U,injectSubtitle:""}),C.focus()},A=()=>{if(!e.injectImageUrl)return;const C=f.current;if(!C)return;const D=C.selectionStart,U=e.injectImageCaption?`"${e.injectImageCaption}"`:"",S=`![${e.injectImageCaption||"image"}](${e.injectImageUrl} ${U})
`,P=`${e.content.slice(0,D)}
${S}
${e.content.slice(D)}`;t({...e,content:P,injectImageUrl:"",injectImageCaption:""}),C.focus()},O=()=>{if(!e.injectLinkText||!e.injectLinkSlug)return;const C=f.current;if(!C)return;const D=C.selectionStart,U=`[${e.injectLinkText}](/articles/${e.injectLinkSlug})`,S=`${e.content.slice(0,D)}${U}${e.content.slice(D)}`;t({...e,content:S,injectLinkText:"",injectLinkSlug:""}),C.focus()},k=async C=>{if(C.preventDefault(),!e.title||!e.content)return u("Title and content are required.");o(!0);try{const D=lb(e.title),U={title:e.title,subtitle:e.subtitle,content:e.content,slug:D,section:e.section,category:e.section==="news"?e.category:null,badge:e.badge,trending:e.trending,image_url:e.imageUrl,image_caption:e.imageCaption,must_read:e.must_read,most_relevant:e.most_relevant,author:e.author,dateline:e.dateline,publication_date:e.publicationDate,tags:e.tags.split(",").map(J=>J.trim()).filter(Boolean),video_url:e.videoUrl,related_links:e.relatedLinks.split(",").map(J=>J.trim()).filter(Boolean)},{data:S}=await tt.from("articles").select("id").eq("slug",D);if(!n&&S.length>0)throw new Error("Slug already exists. Choose a different title.");const P=n?tt.from("articles").update(U).eq("id",n).select().single():tt.from("articles").insert(U).select().single(),{data:N,error:K}=await P;if(K)throw new Error(K.message);h(`Article ${n?"updated":"created"}: ${N.title}`),b(),p()}catch(D){u(`Error saving article: ${D.message}`)}finally{o(!1)}};return _.jsxs("div",{className:L.adminContainer,children:[_.jsxs("header",{className:L.adminHeader,children:[_.jsx("h1",{children:"Admin Dashboard"}),_.jsx("button",{onClick:x,children:"Logout"})]}),l&&_.jsx("div",{className:L.errorBanner,children:l}),c&&_.jsx("div",{className:L.successBanner,children:c}),_.jsx(od,{form:e,setForm:t,editingId:n,handleSubmit:k,resetForm:b,contentRef:f,loading:a,handleInjectSubtitle:v,handleInjectImage:A,handleInjectLink:O}),_.jsx(Po,{...e}),_.jsxs("section",{children:[_.jsx("h2",{children:e.section==="news"?`News - ${e.category} Articles`:e.section==="feature"?"Feature Stories":e.section==="opinion"?"Opinion Articles":"Kenya Updates"}),a?_.jsx("p",{children:"Loading articles..."}):_.jsx(eb,{items:i,handleEdit:g,handleDelete:m})]}),_.jsx("aside",{children:_.jsx(tb,{})})]})}export{gb as A,fb as B,Xl as L,kn as M,hb as N,fe as P,db as R,At as a,cb as b,pb as c,Fl as d,yi as e,_ as j,Sn as r,tt as s,Tn as u};
//# sourceMappingURL=AdminPage-BkLhF_nn.js.map

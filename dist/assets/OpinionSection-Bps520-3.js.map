{"version":3,"file":"OpinionSection-Bps520-3.js","sources":["../../src/components/OpinionSection.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { supabase } from \"../supabaseClient\";\nimport \"./OpinionSection.css\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\n\nconst OpinionSection = () => {\n  const [opinionArticles, setOpinionArticles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchOpinions = async () => {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from(\"articles\")\n        .select(\"*\")\n        .eq(\"published\", true)\n        .eq(\"category\", \"opinion\")\n        .order(\"created_at\", { ascending: false })\n        .limit(4);\n\n      if (error) {\n        console.error(\"Error fetching opinion articles:\", error.message);\n        setError(error.message);\n      } else {\n        setOpinionArticles(data);\n      }\n      setLoading(false);\n    };\n\n    fetchOpinions();\n  }, []);\n\n  if (loading) {\n    return (\n      <section className=\"opinion-hub\">\n        <div className=\"opinion-container\">\n          <h2>Opinion & Analysis</h2>\n          <p>Loading opinion articles...</p>\n        </div>\n      </section>\n    );\n  }\n\n  if (error) {\n    return (\n      <section className=\"opinion-hub\">\n        <div className=\"opinion-container\">\n          <h2>Opinion & Analysis</h2>\n          <p>Could not load opinion articles at this time.</p>\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"opinion-hub\">\n      <div className=\"opinion-container\">\n        <h2>Opinion & Analysis</h2>\n        {opinionArticles.length > 0 ? (\n          <div className=\"opinion-grid\">\n            {opinionArticles.map((story) => (\n              <article className=\"opinion-piece\" key={story.id}>\n                {story.image_url && (\n                  <div className=\"opinion-piece-image\">\n                    <a href={`/articles/${story.slug || story.id}`}>\n                      <img\n                        src={story.image_url}\n                        alt={story.title}\n                        loading=\"lazy\"\n                      />\n                    </a>\n                  </div>\n                )}\n                <div className=\"opinion-piece-content\">\n                  <h3 className=\"opinion-piece-title\">\n                    <a href={`/articles/${story.slug || story.id}`}>\n                      {story.title}\n                    </a>\n                  </h3>\n                  <p className=\"opinion-piece-author\">\n                    By {story.author || \"Zawadi Intel Contributor\"}\n                  </p>\n                  <div className=\"opinion-piece-excerpt\">\n                    <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                      {story.content\n                        ? `${story.content.slice(0, 120)}...`\n                        : \"\"}\n                    </ReactMarkdown>\n                  </div>\n                </div>\n              </article>\n            ))}\n          </div>\n        ) : (\n          <p>No opinion articles available at the moment.</p>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default OpinionSection;\n"],"names":["OpinionSection","opinionArticles","setOpinionArticles","useState","loading","setLoading","error","setError","useEffect","data","supabase","jsxs","jsx","story","ReactMarkdown","remarkGfm"],"mappings":"yGAMA,MAAMA,EAAiB,IAAM,CAC3B,KAAM,CAACC,EAAiBC,CAAkB,EAAIC,EAAAA,SAAS,CAAA,CAAE,EACnD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,IAAI,EAyBvC,OAvBAK,EAAAA,UAAU,IAAM,EACQ,SAAY,CAChCH,EAAW,EAAI,EACf,KAAM,CAAE,KAAAI,EAAM,MAAAH,CAAAA,EAAU,MAAMI,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,YAAa,EAAI,EACpB,GAAG,WAAY,SAAS,EACxB,MAAM,aAAc,CAAE,UAAW,EAAA,CAAO,EACxC,MAAM,CAAC,EAENJ,GACF,QAAQ,MAAM,mCAAoCA,EAAM,OAAO,EAC/DC,EAASD,EAAM,OAAO,GAEtBJ,EAAmBO,CAAI,EAEzBJ,EAAW,EAAK,CAClB,GAEA,CACF,EAAG,CAAA,CAAE,EAEDD,QAEC,UAAA,CAAQ,UAAU,cACjB,SAAAO,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,oBAAA,CAAkB,EACtBA,EAAAA,IAAC,KAAE,SAAA,6BAAA,CAA2B,CAAA,CAAA,CAChC,CAAA,CACF,EAIAN,QAEC,UAAA,CAAQ,UAAU,cACjB,SAAAK,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,oBAAA,CAAkB,EACtBA,EAAAA,IAAC,KAAE,SAAA,+CAAA,CAA6C,CAAA,CAAA,CAClD,CAAA,CACF,QAKD,UAAA,CAAQ,UAAU,cACjB,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,oBAAA,CAAkB,EACrBX,EAAgB,OAAS,EACxBW,EAAAA,IAAC,OAAI,UAAU,eACZ,SAAAX,EAAgB,IAAKY,GACpBF,EAAAA,KAAC,UAAA,CAAQ,UAAU,gBAChB,SAAA,CAAAE,EAAM,WACLD,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACb,SAAAA,MAAC,IAAA,CAAE,KAAM,aAAaC,EAAM,MAAQA,EAAM,EAAE,GAC1C,SAAAD,EAAAA,IAAC,MAAA,CACC,IAAKC,EAAM,UACX,IAAKA,EAAM,MACX,QAAQ,MAAA,CAAA,EAEZ,CAAA,CACF,EAEFF,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,sBACZ,SAAAA,EAAAA,IAAC,KAAE,KAAM,aAAaC,EAAM,MAAQA,EAAM,EAAE,GACzC,SAAAA,EAAM,MACT,EACF,EACAF,EAAAA,KAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,CAAA,MAC9BE,EAAM,QAAU,0BAAA,EACtB,EACAD,EAAAA,IAAC,OAAI,UAAU,wBACb,eAACE,EAAA,CAAc,cAAe,CAACC,CAAS,EACrC,WAAM,QACH,GAAGF,EAAM,QAAQ,MAAM,EAAG,GAAG,CAAC,MAC9B,EAAA,CACN,CAAA,CACF,CAAA,CAAA,CACF,CAAA,GA5BsCA,EAAM,EA6B9C,CACD,EACH,EAEAD,EAAAA,IAAC,KAAE,SAAA,8CAAA,CAA4C,CAAA,CAAA,CAEnD,CAAA,CACF,CAEJ"}
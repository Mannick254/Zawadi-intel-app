import{j as a,s as u}from"./AdminPage-BkLhF_nn.js";import{r as t}from"./react-FoVpDZ-V.js";const g=()=>{const[n,c]=t.useState([]),[r,o]=t.useState("all"),[d,i]=t.useState(!0);t.useEffect(()=>{(async()=>{i(!0);let s=u.from("articles").select("*").eq("published",!0).eq("section","update").order("created_at",{ascending:!1});r!=="all"&&(s=s.eq("badge",r));const{data:p,error:l}=await s;l?console.error("Error fetching stories:",l.message):c(p),i(!1)})()},[r]);const h=e=>{const s=(Date.now()-new Date(e))/1e3;return s<60?"Just now":s<3600?`${Math.floor(s/60)} min ago`:s<86400?`${Math.floor(s/3600)} hrs ago`:`${Math.floor(s/86400)} days ago`};return a.jsx("section",{className:"kenyan-latest-update",children:a.jsxs("div",{className:"update-container",children:[a.jsx("h2",{children:"Kenyan Latest Update"}),a.jsx("p",{className:"intro",children:"Stay informed with the most recent developments shaping Kenyaâ€™s politics, business, culture, sports, and society."}),a.jsx("div",{className:"filters",children:["all","politics","business","culture","sports","society"].map(e=>a.jsx("button",{className:r===e?"active":"",onClick:()=>o(e),children:e.toUpperCase()},e))}),d?a.jsx("p",{className:"loading",children:"Loading updates..."}):a.jsx("div",{className:"update-grid",id:"kenya-latest-update-grid",children:n.map(e=>{var s;return a.jsxs("article",{className:"update-card",children:[a.jsx("span",{className:`badge ${(s=e.badge)==null?void 0:s.toLowerCase()}`,children:e.badge||"KenyaUpdate"}),e.image_url&&a.jsx("img",{src:e.image_url,alt:e.title,loading:"lazy"}),a.jsx("h3",{children:a.jsx("a",{href:`/articles/${e.slug||e.id}`,children:e.title})}),e.excerpt&&a.jsxs("p",{className:"excerpt",children:[e.excerpt.slice(0,120),"..."]}),a.jsx("p",{className:"timestamp",children:h(e.created_at)}),a.jsx("a",{href:`/articles/${e.slug||e.id}`,className:"read-more",children:"Read more"}),a.jsxs("div",{className:"share-icons",children:[a.jsx("a",{href:`https://twitter.com/share?url=${window.location.origin}/articles/${e.slug||e.id}`,target:"_blank",rel:"noopener noreferrer",children:"ğŸ¦"}),a.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${window.location.origin}/articles/${e.slug||e.id}`,target:"_blank",rel:"noopener noreferrer",children:"ğŸ“˜"}),a.jsx("a",{href:`https://wa.me/?text=${window.location.origin}/articles/${e.slug||e.id}`,target:"_blank",rel:"noopener noreferrer",children:"ğŸ“±"})]})]},e.id)})})]})})};export{g as default};
//# sourceMappingURL=KenyaUpdate-_6jcmuNS.js.map

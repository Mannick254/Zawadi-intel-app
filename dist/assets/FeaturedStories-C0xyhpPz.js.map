{"version":3,"file":"FeaturedStories-C0xyhpPz.js","sources":["../../src/components/FeaturedStories.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { supabase } from \"../supabaseClient\";\nimport styles from \"./FeaturedStories.module.css\";\n\nconst FeaturedStories = () => {\n  const [stories, setStories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  useEffect(() => {\n    const fetchStories = async () => {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from(\"articles\")\n        .select(\"*\")\n        .eq(\"published\", true)\n        .eq(\"section\", \"feature\")\n        .order(\"created_at\", { ascending: false });\n\n      if (error) {\n        console.error(\"Error loading featured stories:\", error.message);\n        setErrorMsg(\"Failed to load stories.\");\n      } else {\n        setStories(data || []);\n      }\n      setLoading(false);\n    };\n\n    fetchStories();\n  }, []);\n\n  if (loading) return <p className={styles.status}>Loading stories...</p>;\n  if (errorMsg) return <p className={styles.error}>{errorMsg}</p>;\n  if (stories.length === 0)\n    return <p className={styles.status}>No featured stories available at the moment.</p>;\n\n  const [mainStory, ...otherStories] = stories;\n\n  return (\n    <section id=\"featured-stories\" className={styles.featuredStories}>\n      <div className={styles.featuredHeader}>\n      \n        {/* Intro minimized for newsroom feel */}\n      </div>\n\n      <div className={styles.featuredLayout}>\n        {/* Hero story */}\n        <article className={styles.mainStory}>\n          {mainStory.image_url && (\n            <div className={styles.mainImage}>\n              <a href={`/articles/${mainStory.slug || mainStory.id}`}>\n                <img\n                  src={mainStory.image_url}\n                  alt={mainStory.title || \"Featured story image\"}\n                  loading=\"lazy\"\n                />\n              </a>\n            </div>\n          )}\n          <div className={styles.mainContent}>\n            <h3 className={styles.mainTitle}>\n              <a href={`/articles/${mainStory.slug || mainStory.id}`}>\n                {mainStory.title}\n              </a>\n            </h3>\n            <p className={styles.mainExcerpt}>\n              {mainStory.content?.slice(0, 160)}...\n            </p>\n            <time className={styles.storyDate} dateTime={mainStory.created_at}>\n              {new Date(mainStory.created_at).toLocaleDateString(\"en-US\", {\n                year: \"numeric\",\n                month: \"long\",\n                day: \"numeric\",\n              })}\n            </time>\n          </div>\n        </article>\n\n        {/* Side stories */}\n        <div className={styles.sideStories}>\n          {otherStories.map((story) => (\n            <article className={styles.sideCard} key={story.id}>\n              <div className={styles.sideContent}>\n                <h4 className={styles.sideTitle}>\n                  <a href={`/articles/${story.slug || story.id}`}>\n                    {story.title}\n                  </a>\n                </h4>\n                <time className={styles.storyDate} dateTime={story.created_at}>\n                  {new Date(story.created_at).toLocaleDateString(\"en-US\", {\n                    month: \"short\",\n                    day: \"numeric\",\n                  })}\n                </time>\n              </div>\n              {story.image_url && (\n                <div className={styles.sideImage}>\n                  <a href={`/articles/${story.slug || story.id}`}>\n                    <img\n                      src={story.image_url}\n                      alt={story.title || \"Story image\"}\n                      loading=\"lazy\"\n                    />\n                  </a>\n                </div>\n              )}\n            </article>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default FeaturedStories;\n"],"names":["FeaturedStories","stories","setStories","useState","loading","setLoading","errorMsg","setErrorMsg","useEffect","data","error","supabase","jsx","styles","mainStory","otherStories","jsxs","_a","story"],"mappings":"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"}
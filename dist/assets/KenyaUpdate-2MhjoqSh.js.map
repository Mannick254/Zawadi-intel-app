{"version":3,"file":"KenyaUpdate-2MhjoqSh.js","sources":["../../src/components/KenyaUpdate.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { supabase } from \"../supabaseClient\";\n\nconst KenyaUpdate = () => {\n  const [stories, setStories] = useState([]);\n  const [filter, setFilter] = useState(\"all\");\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStories = async () => {\n      setLoading(true);\n      let query = supabase\n        .from(\"articles\")\n        .select(\"*\")\n        .eq(\"published\", true)\n        .eq(\"section\", \"update\")\n        .order(\"created_at\", { ascending: false });\n\n      if (filter !== \"all\") {\n        query = query.eq(\"badge\", filter);\n      }\n\n      const { data, error } = await query;\n      if (error) {\n        console.error(\"Error fetching stories:\", error.message);\n      } else {\n        setStories(data);\n      }\n      setLoading(false);\n    };\n\n    fetchStories();\n  }, [filter]);\n\n  const timeAgo = (dateString) => {\n    const diff = (Date.now() - new Date(dateString)) / 1000;\n    if (diff < 60) return \"Just now\";\n    if (diff < 3600) return `${Math.floor(diff / 60)} min ago`;\n    if (diff < 86400) return `${Math.floor(diff / 3600)} hrs ago`;\n    return `${Math.floor(diff / 86400)} days ago`;\n  };\n\n  return (\n    <section className=\"kenyan-latest-update\">\n      <div className=\"update-container\">\n        <h2>Kenyan Latest Update</h2>\n        <p className=\"intro\">\n          Stay informed with the most recent developments shaping Kenya‚Äôs politics, business, culture, sports, and society.\n        </p>\n\n        {/* Filter Buttons */}\n        <div className=\"filters\">\n          {[\"all\", \"politics\", \"business\", \"culture\", \"sports\", \"society\"].map((cat) => (\n            <button\n              key={cat}\n              className={filter === cat ? \"active\" : \"\"}\n              onClick={() => setFilter(cat)}\n            >\n              {cat.toUpperCase()}\n            </button>\n          ))}\n        </div>\n\n        {loading ? (\n          <p className=\"loading\">Loading updates...</p>\n        ) : (\n          <div className=\"update-grid\" id=\"kenya-latest-update-grid\">\n            {stories.map((story) => (\n              <article className=\"update-card\" key={story.id}>\n                <span className={`badge ${story.badge?.toLowerCase()}`}>\n                  {story.badge || \"KenyaUpdate\"}\n                </span>\n                {story.image_url && (\n                  <img\n                    src={story.image_url}\n                    alt={story.title}\n                    loading=\"lazy\" // performance boost\n                  />\n                )}\n                <h3>\n                  <a href={`/articles/${story.slug || story.id}`}>{story.title}</a>\n                </h3>\n                {/* Optional excerpt */}\n                {story.excerpt && (\n                  <p className=\"excerpt\">{story.excerpt.slice(0, 120)}...</p>\n                )}\n                <p className=\"timestamp\">{timeAgo(story.created_at)}</p>\n                <a\n                  href={`/articles/${story.slug || story.id}`}\n                  className=\"read-more\"\n                >\n                  Read more\n                </a>\n                {/* Share Icons */}\n                <div className=\"share-icons\">\n                  <a\n                    href={`https://twitter.com/share?url=${window.location.origin}/articles/${story.slug || story.id}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    üê¶\n                  </a>\n                  <a\n                    href={`https://www.facebook.com/sharer/sharer.php?u=${window.location.origin}/articles/${story.slug || story.id}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    üìò\n                  </a>\n                  <a\n                    href={`https://wa.me/?text=${window.location.origin}/articles/${story.slug || story.id}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    üì±\n                  </a>\n                </div>\n              </article>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default KenyaUpdate;\n"],"names":["KenyaUpdate","stories","setStories","useState","filter","setFilter","loading","setLoading","useEffect","query","supabase","data","error","timeAgo","dateString","diff","jsxs","jsx","cat","story","_a"],"mappings":"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"}
import{j as e,M as n,r as d,s as l}from"./AdminPage-BkLhF_nn.js";import{r}from"./react-FoVpDZ-V.js";const L="_featuredStories_2awuh_1",C="_featuredHeader_2awuh_11",I="_status_2awuh_33",E="_error_2awuh_39",T="_featuredLayout_2awuh_46",D="_mainStory_2awuh_54",H="_mainImage_2awuh_59",y="_mainContent_2awuh_72",M="_mainTitle_2awuh_76",$="_mainExcerpt_2awuh_94",q="_storyDate_2awuh_102",b="_sideStories_2awuh_109",k="_sideCard_2awuh_115",F="_sideContent_2awuh_131",P="_sideTitle_2awuh_136",U="_sideImage_2awuh_155",z="_thirdColumn_2awuh_168",A="_mustReadHeading_2awuh_178",G="_mostRelevantHeading_2awuh_179",O="_mustReadList_2awuh_190",V="_relevantList_2awuh_191",B="_mustReadItem_2awuh_197",J="_relevantItem_2awuh_198",K="_separator_2awuh_211",a={featuredStories:L,featuredHeader:C,status:I,error:E,featuredLayout:T,mainStory:D,mainImage:H,mainContent:y,mainTitle:M,mainExcerpt:$,storyDate:q,sideStories:b,sideCard:k,sideContent:F,sideTitle:P,sideImage:U,thirdColumn:z,mustReadHeading:A,mostRelevantHeading:G,mustReadList:O,relevantList:V,mustReadItem:B,relevantItem:J,separator:K},X=()=>{const[s,_]=r.useState(null),[g,x]=r.useState([]),[f,j]=r.useState([]),[v,w]=r.useState([]),[S,c]=r.useState(!0),[o,N]=r.useState(null);return r.useEffect(()=>{(async()=>{c(!0);try{const{data:i,error:m}=await l.from("articles").select("*").eq("published",!0).eq("section","feature").order("created_at",{ascending:!1});if(m)throw m;i&&i.length>0&&(_(i[0]),x(i.slice(1,5)));const{data:R,error:u}=await l.from("articles").select("*").eq("published",!0).eq("must_read",!0).order("created_at",{ascending:!1});if(u)throw u;j(R||[]);const{data:p,error:h}=await l.from("articles").select("*").eq("published",!0).eq("most_relevant",!0).order("created_at",{ascending:!1});if(h)throw h;w(p||[])}catch(i){console.error("Error loading stories:",i.message),N("Failed to load stories.")}c(!1)})()},[]),S?e.jsx("p",{className:a.status,children:"Loading stories..."}):o?e.jsx("p",{className:a.error,children:o}):s?e.jsxs("section",{id:"featured-stories",className:a.featuredStories,children:[e.jsx("div",{className:a.featuredHeader}),e.jsxs("div",{className:a.featuredLayout,children:[e.jsxs("article",{className:a.mainStory,children:[s.image_url&&e.jsx("div",{className:a.mainImage,children:e.jsx("a",{href:`/articles/${s.slug||s.id}`,children:e.jsx("img",{src:s.image_url,alt:s.title||"Featured story image",loading:"lazy"})})}),e.jsxs("div",{className:a.mainContent,children:[e.jsx("h3",{className:a.mainTitle,children:e.jsx("a",{href:`/articles/${s.slug||s.id}`,children:s.title})}),e.jsx("div",{className:a.mainExcerpt,children:e.jsx(n,{remarkPlugins:[d],children:s.content?`${s.content.slice(0,160)}...`:""})}),e.jsx("time",{className:a.storyDate,dateTime:s.created_at,children:new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("div",{className:a.sideStories,children:g.map(t=>e.jsxs("article",{className:a.sideCard,children:[e.jsxs("div",{className:a.sideContent,children:[e.jsx("h4",{className:a.sideTitle,children:e.jsx("a",{href:`/articles/${t.slug||t.id}`,children:t.title})}),e.jsx("time",{className:a.storyDate,dateTime:t.created_at,children:new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),t.image_url&&e.jsx("div",{className:a.sideImage,children:e.jsx("a",{href:`/articles/${t.slug||t.id}`,children:e.jsx("img",{src:t.image_url,alt:t.title||"Story image",loading:"lazy"})})})]},t.id))}),e.jsxs("aside",{className:a.thirdColumn,children:[e.jsxs("div",{className:a.mustRead,children:[e.jsx("div",{className:a.mustReadHeading,children:e.jsx(n,{remarkPlugins:[d],children:"### **MUST READ**"})}),e.jsx("div",{className:a.mustReadList,children:f.map(t=>e.jsx("div",{className:a.mustReadItem,children:e.jsx("a",{href:`/articles/${t.slug||t.id}`,children:t.title})},t.id))})]}),e.jsx("hr",{className:a.separator}),e.jsxs("div",{className:a.mostRelevant,children:[e.jsx("div",{className:a.mostRelevantHeading,children:e.jsx(n,{remarkPlugins:[d],children:"### **MOST RELEVANT**"})}),e.jsx("div",{className:a.relevantList,children:v.map(t=>e.jsx("div",{className:a.relevantItem,children:e.jsx("a",{href:`/articles/${t.slug||t.id}`,children:t.title})},t.id))})]})]})]})]}):e.jsx("p",{className:a.status,children:"No featured stories available at the moment."})};export{X as default};
//# sourceMappingURL=FeaturedStories-CTcHju5S.js.map

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Account â€” Zawadi Intel</title>
  <meta name="description" content="Manage your user account, profile photo, and settings." />

  <!-- âœ… Fixed CSP -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    img-src 'self' data: https:;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://vercel.live;
    font-src 'self' https://fonts.gstatic.com;
    script-src 'self' 'unsafe-inline' https://vercel.live;
    connect-src 'self' https://newsapi.org https://vercel.live wss://*.pusher.com;
    frame-src 'self' https://vercel.live;
  ">

  <!-- âœ… Corrected asset paths -->
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/layout.css" />
  <link rel="stylesheet" href="/css/theme.css" />
  <link rel="icon" href="/icons/icon-192.png" type="image/png" />

  <style>
    .profile-container {
      max-width: 600px;
      margin: 2em auto;
      padding: 1em;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .profile-photo {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #006699;
      margin: 1em auto;
      display: block;
    }
    .avatar-initials {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background-color: #006699;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      font-weight: bold;
      margin: 1em auto;
      border: 4px solid #004d80;
    }
    .upload-section {
      text-align: center;
      margin: 1em 0;
    }
    .crop-section {
      display: none;
      text-align: center;
      margin: 1em 0;
    }
    #crop-canvas {
      border: 1px solid #ccc;
      max-width: 100%;
      height: auto;
    }
    .controls {
      margin: 1em 0;
    }
    .controls button {
      margin: 0 0.5em;
      padding: 0.5em 1em;
      background: #006699;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .controls button:hover {
      background: #004d80;
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .profile-container {
        max-width: 100%;
        padding: 1rem;
        margin: 1rem auto;
      }
      .profile-photo {
        width: 120px;
        height: 120px;
      }
      .avatar-initials {
        width: 120px;
        height: 120px;
        font-size: 2.5rem;
      }
      .upload-section, .crop-section {
        text-align: center;
      }
      .controls button {
        padding: 0.4em 0.8em;
        margin: 0 0.25em;
      }
      input[type="text"], input[type="password"] {
        width: 100%;
        padding: 0.75em;
        margin-bottom: 0.5em;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1rem;
      }
      button {
        width: 100%;
        padding: 0.75em;
        margin-top: 0.5em;
      }
    }
  </style>
</head>
<body>

  <!-- ðŸ” Navigation -->
  <nav class="top-nav">
    <div class="logo">ðŸ“œ Zawadi Intel</div>
    <div class="main-links">
      <a href="/index.html">Home</a>
      <a href="/global.html">Global</a>
      <a href="/middle-east.html">Middle East</a>
      <a href="/articles/africa.html">Africa</a>
      <a href="/biography.html">Biographies</a>
      <a href="/media.html">Media</a>
      <a href="/books.html">Books</a>
      <a href="/app.html">Archive</a>
      <a href="/account.html" class="active">Account</a>
    </div>
  </nav>

  <!-- Install banner (mobile) -->
  <div id="install-banner" role="dialog" aria-live="polite">
    <div class="install-text">Install Zawadi Intel for quick access and offline reading.</div>
    <button id="install-now" onclick="installApp()" style="display:none;">Install</button>
    <button class="close-btn" onclick="document.getElementById('install-banner').style.display='none'">âœ•</button>
  </div>

  <!-- ðŸ“° Hero Banner -->
  <header class="hero-banner">
    <h1>User Account</h1>
    <p>Manage your account, profile photo, and settings.</p>
  </header>

  <!-- Account Content -->
  <main class="aj-container">
    <div class="profile-container">
      <h2>Welcome, <span id="username-display">Guest</span></h2>

      <!-- User Details Section -->
      <div id="user-details" style="display: none;">
        <h3>Your Account Details</h3>
        <p><strong>Username:</strong> <span id="user-username"></span></p>
        <p><strong>Registered:</strong> <span id="user-registered"></span></p>
        <p><strong>Account Type:</strong> <span id="user-type"></span></p>
        <button id="admin-link" style="display: none;">Access Admin Dashboard</button>
        <button id="logout-btn">Logout</button>
      </div>

      <!-- Auth Forms Section -->
      <div id="auth-forms" style="display: block;">
        <div id="login-form">
          <h3>Login to Your Account</h3>
          <label for="login-username">Username</label>
          <input type="text" id="login-username" required>
          <label for="login-password">Password</label>
          <input type="password" id="login-password" required>
          <button id="login-btn">Login</button>
          <p id="login-msg"></p>
        </div>

        <div id="register-form" style="margin-top: 20px;">
          <h3>Create New Account</h3>
          <label for="register-username">Username</label>
          <input type="text" id="register-username" required>
          <label for="register-password">Password</label>
          <input type="password" id="register-password" required>
          <button id="register-btn">Register</button>
          <p id="register-msg"></p>
        </div>
      </div>

      <!-- Profile Photo Section -->
      <div id="profile-photo-section" style="display: none;">
        <h3>Profile Photo</h3>
        <div id="avatar-container">
          <img id="profile-photo" class="profile-photo" src="/images/baba.png" alt="Profile Photo" />
        </div>

        <div class="upload-section">
          <input type="file" id="photo-input" accept="image/*" />
          <button id="upload-btn">Upload Photo</button>
        </div>

        <div class="crop-section">
          <canvas id="crop-canvas"></canvas>
          <div class="controls">
            <button id="crop-save">Save Cropped Image</button>
            <button id="crop-cancel">Cancel</button>
          </div>
        </div>
      </div>

      <p id="status-message"></p>
    </div>
  </main>

  <!-- ðŸ”» Footer -->
  <footer role="contentinfo">
    <p>&copy; 2026 Zawadi Intel. All rights reserved.</p>
  </footer>

  <!-- âœ… Fixed script paths -->
  <script src="/main.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/account.js"></script>
  <script src="/js/clock-calendar.js" defer></script>
</body>
</html>

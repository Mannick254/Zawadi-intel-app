<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin â€” Zawadi Intel News</title>

  <!-- Styles -->
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/admin.css">
  <link rel="stylesheet" href="/css/clock-calendar.css">

  <!-- Quill Rich Text Editor CSS -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" href="/icons/icon-192.png" type="image/png" />

  <!-- Refined Content Security Policy -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    img-src 'self' data: https:;
    style-src 'self' https://fonts.googleapis.com https://cdn.quilljs.com;
    font-src 'self' https://fonts.gstatic.com;
    script-src 'self' https://cdn.quilljs.com;
    connect-src 'self' https://newsapi.org wss://*.pusher.com https://your-backend.vercel.app;
    frame-src 'self';
  ">
</head>
<body>
  <!-- ðŸ” Navigation -->
  <nav class="top-nav" aria-label="Main Navigation">
    <div class="logo">
      <img src="/icons/icon-192.png" alt="Zawadi Intel logo" />
      <span class="brand">ðŸ“œ Zawadi Intel</span>
    </div>
    <ul class="main-links">
      <li><a href="/index.html">Home</a></li>
      <li><a href="/global.html">Global</a></li>
      <li><a href="/middle-east.html">Middle East</a></li>
      <li><a href="/books.html">Books</a></li>
      <li><a href="/app.html">Archive</a></li>
      <li><a href="/profile.html">Account</a></li>
    </ul>
  </nav>

  <!-- ðŸ“¦ Install Banner -->
  <div id="install-banner" class="install-banner hidden" role="alert">
    <p>Get the Zawadi Intel app for a better experience.</p>
    <button id="install-button" type="button">Install</button>
  </div>

  <!-- ðŸ“° Main Content -->
  <main class="admin-main">
    <div id="clock" aria-live="polite"></div>
    <div id="calendar"></div>
    <h1>Admin Dashboard</h1>
    <p id="admin-warn" class="warn-text" role="alert"></p>
    <div id="server-status" aria-live="polite"></div>

    <section class="admin-section" aria-label="Login Counts">
      <h2>Login Counts</h2>
      <div>Total logins (server): <strong id="total-server">â€”</strong></div>
      <div>Total logins (local fallback): <strong id="total-local">â€”</strong></div>
      <div>Recent logins:</div>
      <ul id="recent-list"></ul>
    </section>
  </main>

  <!-- âš™ï¸ Admin Actions -->
  <section id="admin-actions" class="admin-section hidden" aria-label="Admin Actions">
    <h2>Admin Actions</h2>
    <div class="button-group">
      <button id="refresh-stats" type="button">Refresh Stats</button>
      <button id="clear-local" type="button">Clear Local Counts</button>
      <button id="export-recent" type="button">Export Recent Logins</button>
    </div>
    <p class="muted-text">Only visible to signed-in admins.</p>
  </section>

  <!-- ðŸ“„ Article Management -->
  <section id="article-management" class="admin-section hidden" aria-label="Article Management">
    <h2>Article Management</h2>
    <form id="article-form">
      <input type="hidden" id="article-id" />
      <label for="article-title">Title</label>
      <input type="text" id="article-title" placeholder="Article Title" required />
      <div id="editor-container">
        <div id="editor"></div>
      </div>
      <label for="article-image-url">Image URL</label>
      <input type="url" id="article-image-url" placeholder="Image URL" />
      <div class="button-group">
        <button type="submit" id="save-article-btn">Save Article</button>
        <button type="button" id="preview-article-btn">Preview</button>
      </div>
    </form>
    <div id="preview-area" class="hidden">
      <h3>Article Preview</h3>
      <div id="preview-content" class="article-content-preview"></div>
    </div>
    <h3>Existing Articles</h3>
    <ul id="article-list"></ul>
  </section>

  <!-- ðŸ”‘ Admin Login -->
  <section id="admin-login" class="admin-section" aria-label="Admin Sign In">
    <h2>Admin Sign In</h2>
    <form id="admin-login-form" class="login-form" novalidate>
      <label for="admin-username">Username</label>
      <input id="admin-username" name="username" required />
      <label for="admin-password">Password</label>
      <input id="admin-password" name="password" type="password" required />
      <button type="submit" id="admin-login-btn">Sign In</button>
    </form>
    <div id="admin-login-msg" class="warn-text" role="alert"></div>
  </section>

  <!-- ðŸ”‘ Admin Registration -->
  <section id="admin-register" class="admin-section" aria-label="Admin Sign Up">
    <h2>Admin Sign Up</h2>
    <form id="admin-register-form" class="login-form" novalidate>
      <label for="admin-register-username">Username</label>
      <input id="admin-register-username" name="username" required />
      <label for="admin-register-password">Password</label>
      <input id="admin-register-password" name="password" type="password" required />
      <button type="submit" id="admin-register-btn">Sign Up</button>
    </form>
    <div id="admin-register-msg" class="warn-text" role="alert"></div>
  </section>

  <!-- ðŸ”” Push Notifications -->
  <section id="push-notifications" class="admin-section hidden" aria-label="Push Notifications">
    <h2>Push Notifications</h2>
    <form id="push-form" novalidate>
      <label for="push-title">Notification Title</label>
      <input type="text" id="push-title" required />
      <label for="push-message">Message</label>
      <textarea id="push-message" required></textarea>
      <label for="push-url">Target URL</label>
      <input type="url" id="push-url" placeholder="Optional" />
      <div class="button-group">
        <button type="submit" id="send-push-btn">Send Notification</button>
      </div>
    </form>
    <div id="push-feedback" class="feedback-text" role="status"></div>
  </section>

  <!-- Scripts -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js" defer></script>
  <script src="/js/main.js" defer></script>
  <script src="/js/auth.js" defer></script>
  <script src="/js/admin.js" defer></script>
  <script src="/js/clock-calendar.js" defer></script>
  <script src="/js/article-management.js" defer></script>
  <script src="/js/prevent-broken-images.js" defer></script>
  <script src="/js/notifications-admin.js" defer></script>
  <script src="/js/server-status.js" defer></script>

  <!-- ðŸ”» Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <p>&copy; 2026 Zawadi Intel. All rights reserved.</p>
      <ul class="footer-links">
        <li><a href="/about.html">About</a></li>
        <li><a href="/contact.html">Contact</a></li>
        <li><a href="/privacy.html">Privacy Policy</a></li>
      </ul>
    </div>
  </footer>
</body>
</html>

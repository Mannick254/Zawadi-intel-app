<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zawadi Intel â€” Secure Archive</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" type="image/png" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="js/crypto-vault.js"></script> <!-- ğŸ” Secure encryption logic -->
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="button-group">
    <a href="index.html" class="btn">ğŸ  Home</a>
    <a href="app.html" class="btn">ğŸ” Archive</a>
    <a href="biography.html" class="btn">ğŸ“– Biographies</a>
    <a href="media.html" class="btn">ğŸ“º Media</a>
    <a href="legacy.html" class="btn">ğŸŒ± Legacy</a>
  </nav>

  <!-- Modal Triggers -->
  <div class="modal-triggers">
    <button class="btn" id="openAuthModal">ğŸ” Login / Register</button>
    <button class="btn" id="openProfileModal">ğŸ‘¤ Profile</button>
  </div>

  <!-- ğŸ” Auth Modal (Login & Register) -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeAuthModal">&times;</span>
      <div class="auth-tabs">
        <button id="authTabLogin" class="auth-tab active">Login</button>
        <button id="authTabRegister" class="auth-tab">Register</button>
      </div>
      <div id="authLoginPanel">
        <h2>Login to Zawadi Intel</h2>
        <form id="loginForm">
          <input type="text" id="usernameInput" placeholder="Enter username" required />
          <input type="password" id="passwordInput" placeholder="Enter password" required />
          <div class="button-group">
            <button type="submit">Login</button>
          </div>
          <p id="loginError" class="error-text"></p>
        </form>
      </div>
      <div id="authRegisterPanel" style="display:none;">
        <h2>Create Account</h2>
        <form id="registerForm">
          <input type="text" id="newUsername" placeholder="Choose username" required />
          <input type="password" id="newPassword" placeholder="Choose password" required />
          <div class="button-group">
            <button type="submit">Register</button>
          </div>
          <p id="registerError" class="error-text"></p>
        </form>
      </div>
    </div>
  </div>

  <!-- ğŸ‘¤ Profile Modal -->
  <div id="profileModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeProfileModal">&times;</span>
      <h2>ğŸ‘¤ User Profile</h2>
      <form id="profileFormModal">
        <label>Display Name:
          <input type="text" id="profileDisplayNameModal" placeholder="Display Name" />
        </label>
        <label>Short Bio:
          <textarea id="profileBioModal" placeholder="Tell us about yourself..."></textarea>
        </label>
        <button type="submit">ğŸ’¾ Save Profile</button>
        <span id="profileMsgModal"></span>
      </form>
      <div id="profileInfoModal"></div>
    </div>
  </div>

  <!-- ğŸ§  Archive Content -->

  <!-- ğŸ§  Archive Content -->
  <div id="appContent" class="hidden">

    <h1>Zawadi Intel Archive</h1>
    <p id="currentUserDisplay"></p>

    <!-- ğŸ‘¤ User Profile Section -->
    <section id="profileSection" class="chrome-profile-card">
      <div class="chrome-profile-header">
        <div class="chrome-avatar">
          <img src="icons/icon-192.png" alt="User Avatar" />
        </div>
        <div class="chrome-profile-meta">
          <h2 id="chromeProfileName">ğŸ‘¤ User Profile</h2>
          <span id="chromeProfileEmail" style="color:#00bcd4;font-size:1em;"></span>
        </div>
      </div>
      <form id="profileForm" class="chrome-profile-form">
        <input type="text" id="profileDisplayName" placeholder="Display Name" />
        <textarea id="profileBio" placeholder="Tell us about yourself..."></textarea>
        <label style="margin-bottom:0.5em;display:flex;align-items:center;gap:0.7em;">
          <span style="min-width:90px;">Theme Color:</span>
          <input type="color" id="profileThemeColor" value="#00bcd4" style="width:40px;height:40px;border:none;background:none;cursor:pointer;" />
        </label>
        <button type="submit" class="chrome-save-btn">ğŸ’¾ Save Profile</button>
        <span id="profileMsg"></span>
      </form>
      <div id="profileInfo"></div>
    </section>

    <!-- âœï¸ Intel Form -->
    <form id="intelForm">
      <input type="text" id="title" placeholder="Intel Title" required />
      <textarea id="content" placeholder="Intel Content" required></textarea>
      <input type="text" id="tagsInput" placeholder="Tags (comma-separated)" />
      <label><input type="checkbox" id="makePublic" /> Make public</label>
      <div class="button-group">
        <button type="submit">âœ… Submit</button>
        <button type="button" onclick="toggleDarkMode()">ğŸŒ“ Dark Mode</button>
        <button type="button" onclick="exportIntel()">ğŸ“¤ Export</button>
      </div>
    <!-- Logout Button at Bottom -->
    <div id="logoutBottomWrapper" style="width:100%;display:flex;justify-content:center;position:fixed;left:0;bottom:0;z-index:9999;background:rgba(34,40,49,0.95);padding:1em 0;">
      <button type="button" class="btn" onclick="logout()" style="font-size:1.1em;min-width:180px;">ğŸ”“ Logout</button>
    </div>
      <p id="entryCount"></p>
    </form>

    <!-- ğŸ” Search Section -->
    <div class="search-section">
      <input type="text" id="searchInput" placeholder="ğŸ” Search Intel" oninput="searchIntel()" />
    </div>

    <!-- ğŸ“š Intel Display -->
    <div id="intelList"></div>
  </div>

  <!-- ğŸ§  Load app logic after DOM -->
  <script src="js/main.js"></script>
  <script src="js/app.js"></script>
  <script src="js/decrypt.js"></script> <!-- ğŸ” Decryption logic -->
</body>
</html>
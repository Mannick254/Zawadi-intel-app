<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Legacy Entry ‚Äî Zawadi Intel</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" type="image/png" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="crypto-vault.js"></script>
</head>
<body>
  <!-- Persistent User Profile -->
  <div class="user-profile" id="userProfile">
    <div class="avatar">üë§</div>
    <div class="name" id="profileName"></div>
    <div class="bio" id="profileBio"></div>
  </div>

  <nav class="top-nav">
    <a href="index.html" class="btn home-btn">üè† Home</a>
  </nav>

  <header>
    <h1>üìú Legacy Entry</h1>
    <p class="tagline">‚ÄúOne story. One spark. One legacy.‚Äù</p>
  </header>

  <!-- üîì Decrypted Intel Viewer -->
  <section class="intel-card" id="viewerCard">
    <h2 id="viewerTitle">Loading title...</h2>
    <p id="viewerContent">Loading content...</p>
  </section>

  <!-- üß† User-Written About Me Section -->
  <section class="about-card">
    <h2>üë§ About Me</h2>
    <textarea id="aboutInput" placeholder="Write something about yourself..."></textarea>
    <div class="button-group">
      <button onclick="saveAbout()">üíæ Save</button>
      <button onclick="clearAbout()">üßπ Clear</button>
    </div>
    <div id="aboutDisplay" class="about-output"></div>
  </section>

  <!-- üë§ Creator Biography -->
  <section class="biography-card">
    <h2>üß¨ Creator Biography</h2>
    <p class="bio-text">
      Nickson Ochieng Okoth is a visionary creator and Access Control Specialist based in Nairobi, Kenya. He currently works with Rainbow Patriots, safeguarding critical infrastructure and promoting strategic planning in high-risk environments. His role blends technical precision with real-world vigilance, anchoring his legacy in both protection and innovation.
    </p>
    <p class="bio-text">
      Beyond security, Nickson is the architect of Zawadi Intel ‚Äî a cinematic archive app designed to preserve encrypted stories, poetic transitions, and emotional memory. His creative portfolio, featured on Booksie, explores themes of identity, intimacy, and transformation through short stories, dramatic monologues, and poetic reflections.
    </p>
    <p class="bio-text">
      Learn more at <a href="https://about.me/nicksonochieng" target="_blank">about.me/nicksonochieng</a> or explore his creative work on <a href="https://www.booksie.com/portfolio-view/nickson-ochieng-377142" target="_blank">Booksie</a>.
    </p>
  </section>

  <!-- üìö Published Works -->
  <section class="books-card">
    <h2>üìö Published Works</h2>
    <ul class="books-list">
      <li>
        <strong><a href="https://www.booksie.com/552999-musicality" target="_blank">Musicality</a></strong> ‚Äî A romance-driven narrative exploring emotional tension and personal growth through the lens of marching band culture.
      </li>
      <li>
        <strong><a href="https://www.booksie.com/516551-the-road-to-freedom-chapter-1" target="_blank">The Road to Freedom</a></strong> ‚Äî A fan fiction piece that dramatizes the struggle for identity and liberation in a high-stakes world.
      </li>
    </ul>
    <p class="books-note">
      These works reflect Nickson‚Äôs expressive storytelling style ‚Äî blending cinematic emotion, cultural depth, and poetic rhythm.
    </p>
  </section>

  <footer>
    <p>&copy; 2025 Zawadi Intel. Legacy preserved by its creator.</p>
  </footer>

  <script>
    window.onload = () => {
      const rawTitle = localStorage.getItem('fullIntelTitle');
      const rawContent = localStorage.getItem('fullIntelContent');
      const aboutText = localStorage.getItem('aboutMe');

      document.getElementById('viewerTitle').textContent = decrypt(rawTitle);
      document.getElementById('viewerContent').textContent = decrypt(rawContent);

      if (aboutText) {
        document.getElementById('aboutInput').value = aboutText;
        document.getElementById('aboutDisplay').textContent = aboutText;
      }

      // Check for logged-in user and display profile
      const currentUser = localStorage.getItem('currentUser');
      if (currentUser) {
        const profile = JSON.parse(localStorage.getItem(`profile_${currentUser}`)) || {};
        document.getElementById('profileName').textContent = profile.displayName || currentUser;
        document.getElementById('profileBio').textContent = profile.bio || '';
        document.getElementById('userProfile').style.display = 'block';
      }
    };

    function saveAbout() {
      const about = document.getElementById('aboutInput').value.trim();
      localStorage.setItem('aboutMe', about);
      document.getElementById('aboutDisplay').textContent = about;
    }

    function clearAbout() {
      localStorage.removeItem('aboutMe');
      document.getElementById('aboutInput').value = '';
      document.getElementById('aboutDisplay').textContent = '';
    }
  </script>
</body>
</html>

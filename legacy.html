<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Legacy Entry â€” Zawadi Intel</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" type="image/png" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="js/crypto-vault.js"></script>
</head>
<body>
  <button class="theme-toggle" id="themeToggle">ğŸŒ™</button>
  <nav class="button-group">
    <a href="index.html" class="btn">ğŸ  Home</a>
    <a href="app.html" class="btn">ğŸ” Archive</a>
    <a href="biography.html" class="btn">ğŸ“– Biographies</a>
    <a href="media.html" class="btn">ğŸ“º Media</a>
    <a href="viewer.html" class="btn">ğŸ—‚ï¸ Viewer</a>
    <a href="legacy.html" class="btn">ğŸŒ± Legacy</a>
  </nav>

  <header>
    <h1>ğŸ“œ Legacy Entry</h1>
    <p class="tagline">â€œOne story. One spark. One legacy.â€</p>
    <div class="button-group">
      <a href="app.html" class="btn">ğŸ”™ Back to Archive</a>
    </div>
  </header>

  <!-- ğŸ”“ Decrypted Intel Viewer -->
  <section class="intel-card" id="viewerCard">
    <h2 id="viewerTitle">Loading title...</h2>
    <p id="viewerContent">Loading content...</p>
  </section>

  <!-- ğŸ“š Published Works -->
  <section class="books-gallery">
    <h2>ğŸ“š Published Works</h2>
    <div class="slideshow">
      <img src="src/emeka-cover.png" class="slide" />
      <img src="src/zawadi-cover.png" class="slide" />
      <img src="src/machetes-cover.png" class="slide" />
    </div>
    <div class="book-row">
      <div class="book-entry">
        <img src="src/emeka-cover.png" alt="Emeka the Chiefâ€™s Son cover" />
        <h3>ğŸ“˜ Emeka the Chiefâ€™s Son</h3>
        <p>A dramatic tale of pride, betrayal, and chaos on a wedding day in Imo State, Nigeria.</p>
        <a href="https://www.booksie.com/748649-emeka-the-chiefs-son" target="_blank">Read on Booksie</a>
      </div>

      <div class="book-entry">
        <img src="src/zawadi-cover.png" alt="Ashes to Ambition cover" />
        <h3>ğŸ”¥ Ashes to Ambition</h3>
        <p>A poetic testament of rebirth, ambition, and the fire that fuels legacy.</p>
        <a href="https://www.booksie.com/769963-ashes-to-ambition-the-testament-of-zawadi" target="_blank">Read on Booksie</a>
      </div>

      <div class="book-entry">
        <img src="src/machetes-cover.png" alt="When the Machetes Came cover" />
        <h3>ğŸ—¡ï¸ When the Machetes Came</h3>
        <p>A haunting reflection on survival, memory, and the silence that followed violence.</p>
        <a href="https://www.booksie.com/769812-when-the-machetes-came-a-night-we-didnt-die" target="_blank">Read on Booksie</a>
      </div>

      <div class="book-entry">
        <img src="src/mahesh-cover.png" alt="Mahesh cover" />
        <h3>ğŸš¶ Mahesh: From Rebellion to Redemption</h3>
        <p>A cinematic journey of transformation, rebellion, and spiritual awakening.</p>
        <a href="https://www.booksie.com/747147-the-unstoppable-journey-of-maheshfrom-rebellion-to-redemption" target="_blank">Read on Booksie</a>
      </div>
    </div>
  </section>

  <!-- ğŸ§  User-Written About Me Section -->
  <section class="about-card">
    <h2>ğŸ‘¤ About Me</h2>
    <textarea id="aboutInput" placeholder="Write something about yourself..."></textarea>
    <div class="button-group">
      <button onclick="saveAbout()">ğŸ’¾ Save</button>
      <button onclick="clearAbout()">ğŸ§¹ Clear</button>
    </div>
    <div id="aboutDisplay" class="about-output"></div>
  </section>

  <footer>
    <p>&copy; 2025 Zawadi Intel. Legacy preserved by its users.</p>
  </footer>

  <script src="js/main.js"></script>
  <script>
    // Theme toggle functionality
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
      themeToggle.classList.toggle('dark-mode', isDark);
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark-mode');
      themeToggle.textContent = 'â˜€ï¸';
      themeToggle.classList.add('dark-mode');
    }

    window.onload = () => {
      const rawTitle = localStorage.getItem('fullIntelTitle');
      const rawContent = localStorage.getItem('fullIntelContent');
      const aboutText = localStorage.getItem('aboutMe');

      document.getElementById('viewerTitle').textContent = decrypt(rawTitle);
      document.getElementById('viewerContent').textContent = decrypt(rawContent);

      if (aboutText) {
        document.getElementById('aboutInput').value = aboutText;
        document.getElementById('aboutDisplay').textContent = aboutText;
      }
    };

    function saveAbout() {
      const about = document.getElementById('aboutInput').value.trim();
      localStorage.setItem('aboutMe', about);
      document.getElementById('aboutDisplay').textContent = about;
    }

    function clearAbout() {
      localStorage.removeItem('aboutMe');
      document.getElementById('aboutInput').value = '';
      document.getElementById('aboutDisplay').textContent = '';
    }

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    });

    document.querySelectorAll('.intel-card, .about-card, .books-gallery').forEach(el => {
      observer.observe(el);
    });

    // Slideshow functionality
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;

    function showSlide(index) {
      slides.forEach(slide => slide.classList.remove('active'));
      slides[index].classList.add('active');
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      showSlide(currentSlide);
    }

    // Auto-slide every 3 seconds
    setInterval(nextSlide, 3000);

    // Start with first slide
    showSlide(0);
  </script>
</body>
</html>
